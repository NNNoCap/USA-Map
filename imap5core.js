(function(){if(!window.imap5){var ma=function(b,c){var g=document.createElement("div");g.id="imap5_"+b.usermap+"_categorylegend";g.options=c;g.style.position="fixed";g._show=!0;a.div[b.usermap].appendChild(g);g.setOptions=function(a){this.options=a};g.hide=function(){this.style.display="none";this._show=!1};g.show=function(){this.style.display="block";this._show=!0};g.remove=function(){a.div[b.usermap].removeChild(document.getElementById(this.id))};g.drawCategoryLegend=function(){this.visiblelist=
[];this.touchlist={};if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);for(var d in c.style)"backgroundColor"!=d&&"opacity"!=d&&(this.style[d]=this.options.style[d]);this.style.backgroundColor="rgba("+I(this.options.style.backgroundColor)+","+J(this.options.style.backgroundColor)+","+K(this.options.style.backgroundColor)+","+this.options.style.opacity+")";var e=0,f=this.options.columnsPerRow,m=parseInt(this.options.columnWidth)*f,h=parseInt(this.options.columnWidth)*
f-6,l=parseInt(this.options.columnWidth)-22-6,g=parseInt(this.options.columnWidth),k=new L;k.style.width=m+"px";this.appendChild(k);for(d in this.options.items)if(this.options.items.hasOwnProperty(d)){switch(this.options.items[d].type){case 1:k={};k.text=this.options.items[d].text;k.width=h;k.fontFamily=this.options.style.fontFamily;k.fontSize=this.options.style.fontSize;k.fontColor=this.options.style.fontColor;e=new la(k);this.appendChild(e);e=0;break;case 2:0==this.options.mode?(k={},k.text=this.options.items[d].text,
k.categoryid=this.options.items[d].categoryid,k.checked=this.options.items[d].checked,this.options.items[d].checked&&-1==this.visiblelist.indexOf(this.options.items[d].categoryid)&&this.visiblelist.push(this.options.items[d].categoryid),k.usermap=b.usermap,k.legendTextWidth=l,k.width=g,k.fontFamily=this.options.style.fontFamily,k.fontSize=this.options.style.fontSize,k.fontColor=this.options.style.fontColor,k.columnsPerRow=this.options.columnsPerRow,k=new Da(k)):(k={},k.text=this.options.items[d].text,
k.categoryid=this.options.items[d].categoryid,k.usermap=b.usermap,k.legendTextWidth=l+22,k.width=g,k.fontFamily=this.options.style.fontFamily,k.fontSize=this.options.style.fontSize,k.fontColor=this.options.style.fontColor,k.columnsPerRow=this.options.columnsPerRow,k=new Ea(k)),this.appendChild(k),e+=1}if(e==f||"1"==this.options.items[d].type)k=new L,k.style.width=m+"px",this.appendChild(k),e=0}this.style.position="absolute";this.style.display="table";this.style.width=m+2*parseInt(this.options.style.padding)+
"px";switch(this.options.anchor){case 1:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.bottom="auto";this.style.right="auto";break;case 2:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.width)-parseInt(this.offsetWidth))/2+"px";this.style.bottom=
"auto";this.style.right="auto";break;case 3:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.right=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.bottom="auto";this.style.left="auto";break;case 4:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.height)-parseInt(this.offsetHeight))/2+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.bottom=
"auto";this.style.right="auto";break;case 5:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.height)-parseInt(this.offsetHeight))/2+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.width)-parseInt(this.offsetWidth))/2+"px";this.style.bottom="auto";this.style.right="auto";break;case 6:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.height)-
parseInt(this.offsetHeight))/2+"px";this.style.right=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.bottom="auto";this.style.left="auto";break;case 7:this.style.bottom=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.top="auto";this.style.right="auto";break;case 8:this.style.bottom=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+
(parseInt(a.usermap[b.usermap].div.style.width)-parseInt(this.offsetWidth))/2+"px";this.style.top="auto";this.style.right="auto";break;case 9:this.style.bottom=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.right=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.top="auto";this.style.left="auto";break;default:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px",this.style.right=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+
"px",this.style.bottom="auto",this.style.left="auto"}};g.onmouseup=function(a){};g.onmousedown=function(a){};g.onmouseover=function(c){"edit"==a.mode[b.usermap]&&(this.style.cursor="pointer");"edit"==a.mode[b.usermap]&&x(b,c,"Click to select")};g.onmouseout=function(c){"edit"==a.mode[b.usermap]&&(this.style.cursor="auto");"edit"==a.mode[b.usermap]&&H(b)};g.onmousewheel=function(a){};a.div[b.usermap].addEventListener&&g.addEventListener("DOMMouseScroll",function(a){},!1);g.onclick=function(c){c.stopPropagation&&
c.stopPropagation();this._mapdragged||this._transformed||a.div[b.usermap]._mapdragged||"edit"!=a.mode[b.usermap]||(null!=a.selectedVerticesObj[b.usermap]&&a.selectedVerticesObj[b.usermap]!=this&&a.selectedVerticesObj[b.usermap].deleteVertices(),c={event:"click",object:"categorylegend"},window.console&&console.log(JSON.stringify(c)))};a.touchdevices&&(g.ontouchstart=g.ontouchmove=g.ontouchend=function(a){a.stopPropagation&&a.stopPropagation()});g.drawCategoryLegend();return g},na=function(b,c){var g=
t("g");g.id="imap5_"+b.usermap+"_maptitle";g.options=c;g._show=!0;a.svg[b.usermap].appendChild(g);g.setOptions=function(a){this.options=a};g.hide=function(){this.style.display="none";this._show=!1};g.show=function(){this.style.display="block";this._show=!0};g.remove=function(){a.svg[b.usermap].removeChild(this)};g.drawMapTitle=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);var c=t("text");this.appendChild(c);var e=t("text");e.appendChild(document.createTextNode(this.options.text));
e.style.cursor="default";e.setAttribute("style","stroke-width:0");e.style.strokeOpacity=0;e.style.fontFamily=this.options.style.fontFamily;e.style.fill=this.options.style.fontColor;e.style.fontSize=this.options.style.fontSize;e.style.fontStyle=this.options.style.fontStyle;e.style.fontWeight=this.options.style.fontWeight;e.style.pointerEvents="none";this.appendChild(e);e.setAttribute("x",-4096);e.setAttribute("y",-4096);e.setAttribute("text-anchor","middle");if(a.responsivemap[b.usermap])for(var f=
parseInt(e.style.fontSize);e.getBBox().width>a.div[b.usermap].clientWidth-20;)f-=2,e.style.fontSize=f+"px";var m=f=0,h="middle";switch(this.options.anchor){case 1:f=0;m=parseInt(e.style.fontSize);h="start";break;case 2:f=a.div[b.usermap].clientWidth/2;m=parseInt(e.style.fontSize);h="middle";break;case 3:f=a.div[b.usermap].clientWidth;m=parseInt(e.style.fontSize);h="end";break;case 4:f=0;m=a.div[b.usermap].clientHeight/2+parseInt(e.style.fontSize)/2;h="start";break;case 5:f=a.div[b.usermap].clientWidth/
2;m=a.div[b.usermap].clientHeight/2+parseInt(e.style.fontSize)/2;h="middle";break;case 6:f=a.div[b.usermap].clientWidth;m=a.div[b.usermap].clientHeight/2+parseInt(e.style.fontSize)/2;h="end";break;case 7:f=0;m=a.div[b.usermap].clientHeight-5;h="start";break;case 8:f=a.div[b.usermap].clientWidth/2;m=a.div[b.usermap].clientHeight-5;h="middle";break;case 9:f=a.div[b.usermap].clientWidth;m=a.div[b.usermap].clientHeight-5;h="end";break;default:f=a.div[b.usermap].clientWidth/2,m=parseInt(e.style.fontSize),
h="middle"}e.setAttribute("text-anchor",h);e.setAttribute("x",f);e.setAttribute("y",m);c.appendChild(document.createTextNode(this.options.text));c.style.cursor="default";c.setAttribute("style","stroke-width:0");c.style.strokeOpacity=0;c.style.fontFamily=this.options.style.fontFamily;c.style.fill="undefined"==typeof this.options.style.shadowColor?"#ffffff":this.options.style.shadowColor;c.style.fontSize=e.style.fontSize;c.style.fontStyle=this.options.style.fontStyle;c.style.fontWeight=this.options.style.fontWeight;
c.style.fillOpacity="undefined"==typeof this.options.style.shadowOpacity?.7:this.options.style.shadowOpacity;c.setAttribute("text-anchor",h);c.setAttribute("x",f+1);c.setAttribute("y",m+1)};g.drawMapTitle();return g},Da=function(b){var c=document.createElement("div"),g=document.createElement("div");g.style.cssFloat="left";g.style.width="16px";g.style.height="16px";var d=document.createElement("input");d.setAttribute("type","checkbox");d.checked=b.checked;d.setAttribute("width","16px");d.setAttribute("height",
"16px");g.appendChild(d);d.onchange=function(a){this.checked?imap5.categorylegend[b.usermap].visiblelist.push(b.categoryid):(a=imap5.categorylegend[b.usermap].visiblelist.indexOf(b.categoryid),imap5.categorylegend[b.usermap].visiblelist.splice(a,1));a={};a.usermap=b.usermap;imap5.updateCategoryLegend(a)};d.onclick=function(a){};var e={};e.width=b.legendTextWidth;e.fontFamily=b.fontFamily;e.fontSize=b.fontSize;e.fontColor=b.fontColor;e.text=b.text;e=new S(e);e.checkbox=d;e.onclick=function(){if(!this._touch){this.checkbox.checked=
!this.checkbox.checked;if(this.checkbox.checked)imap5.categorylegend[b.usermap].visiblelist.push(b.categoryid);else{var a=imap5.categorylegend[b.usermap].visiblelist.indexOf(b.categoryid);imap5.categorylegend[b.usermap].visiblelist.splice(a,1)}a={};a.usermap=b.usermap;imap5.updateCategoryLegend(a)}};a.touchdevices&&(e.ontouchstart=function(a){a.preventDefault&&a.preventDefault();a.stopPropagation&&a.stopPropagation();this._touch=1==a.touches.length?!0:!1});a.touchdevices&&(e.ontouchend=function(a){this._touch&&
(this.checkbox.checked=!this.checkbox.checked,this.checkbox.checked?imap5.categorylegend[b.usermap].visiblelist.push(b.categoryid):(a=imap5.categorylegend[b.usermap].visiblelist.indexOf(b.categoryid),imap5.categorylegend[b.usermap].visiblelist.splice(a,1)),a={},a.usermap=b.usermap,imap5.updateCategoryLegend(a))});e.style.cursor="pointer";d=new L;c.style.width=b.width+"px";c.style.height="auto";c.style.cssFloat="left";c.style.padding="0px";c.appendChild(g);c.appendChild(e);c.appendChild(d);return c},
Ea=function(b){var c={};c.width=b.legendTextWidth;c.fontFamily=b.fontFamily;c.fontSize=b.fontSize;c.fontColor=b.fontColor;c.text=b.text;c=new S(c);c.style.cursor="pointer";a.touchdevices||(c.onmouseover=function(){imap5.categorylegend[b.usermap].visiblelist.length=0;imap5.categorylegend[b.usermap].visiblelist.push(b.categoryid);var a={};a.usermap=b.usermap;imap5.updateCategoryLegend(a);this.style.textDecoration="underline"},c.onmouseout=function(){this.style.textDecoration="none"});a.touchdevices&&
(c.onclick=function(){"undefined"!==typeof imap5.categorylegend[b.usermap].touchlist&&null!==imap5.categorylegend[b.usermap].touchlist&&"undefined"!==typeof imap5.categorylegend[b.usermap].touchlist.style&&(imap5.categorylegend[b.usermap].touchlist.style.textDecoration="none");imap5.categorylegend[b.usermap].visiblelist.length=0;imap5.categorylegend[b.usermap].visiblelist.push(b.categoryid);imap5.categorylegend[b.usermap].touchlist=this;this.style.textDecoration="underline";var a={};a.usermap=b.usermap;
imap5.updateCategoryLegend(a)});a.touchdevices&&(c.ontouchstart=function(a){a.preventDefault&&a.preventDefault();a.stopPropagation&&a.stopPropagation();this._touch=1==a.touches.length?!0:!1});a.touchdevices&&(c.ontouchend=function(a){this._touch&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),"undefined"!==typeof imap5.categorylegend[b.usermap].touchlist&&null!==imap5.categorylegend[b.usermap].touchlist&&"undefined"!==typeof imap5.categorylegend[b.usermap].touchlist.style&&
(imap5.categorylegend[b.usermap].touchlist.style.textDecoration="none"),imap5.categorylegend[b.usermap].visiblelist.length=0,imap5.categorylegend[b.usermap].visiblelist.push(b.categoryid),imap5.categorylegend[b.usermap].touchlist=this,this.style.textDecoration="underline",a={},a.usermap=b.usermap,imap5.updateCategoryLegend(a))});return c},L=function(){var a=document.createElement("div");a.style.clear="both";return a},Fa=function(a){var c=document.createElement("div"),g=document.createElement("div");
g.style.cssFloat="left";g.style.padding="3px";g.style.width=a.iconWidth+"px";g.style.height=a.iconHeight+"px";g.style.backgroundColor=a.fill;var d=t("svg");d.setAttribute("xmlns","http://www.w3.org/2000/svg");d.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");d.setAttribute("version","1.1");d.setAttribute("width",a.iconWidth+"px");d.setAttribute("height",a.iconHeight+"px");d.style.overflow="hidden";var e=t("polyline");e.setAttribute("points","1,"+a.iconHeight/2+" "+(a.iconWidth-1)+","+a.iconHeight/
2);e.style.fill="none";e.style.stroke=a.stroke;e.style.strokeOpacity=a.opacity;e.style.strokeWidth=2;d.appendChild(e);g.appendChild(d);d={};d.width=a.legendTextWidth;d.fontFamily=a.fontFamily;d.fontSize=a.fontSize;d.fontColor=a.fontColor;d.text=a.text;d=new S(d);e=new L;e.style.width=a.width+"px";c.style.width=a.width+"px";c.style.height="auto";c.style.cssFloat="left";c.style.padding="0px";c.appendChild(g);c.appendChild(d);c.appendChild(e);return c},Ga=function(a){var c=document.createElement("div"),
g=document.createElement("div");g.style.cssFloat="left";g.style.margin="3px";g.style.width=a.iconWidth+"px";g.style.height=a.iconHeight+"px";g.style.backgroundColor=a.fill;g.style.opacity=a.opacity;var d={};d.width=a.legendTextWidth;d.fontFamily=a.fontFamily;d.fontSize=a.fontSize;d.fontColor=a.fontColor;d.text=a.text;var d=new S(d),e=new L;c.style.width=a.width+"px";c.style.height="auto";c.style.cssFloat="left";c.style.padding="0px";c.appendChild(g);c.appendChild(d);c.appendChild(e);return c},Ha=
function(a){var c=document.createElement("div"),g=document.createElement("div");g.style.cssFloat="left";g.style.padding="3px";g.style.width=a.iconWidth+"px";g.style.height=a.iconHeight+"px";var d=document.createElement("img");d.setAttribute("src",a.basepath+a.image);d.setAttribute("width",a.iconWidth+"px");d.setAttribute("height",a.iconHeight+"px");g.appendChild(d);d={};d.width=a.legendTextWidth;d.fontFamily=a.fontFamily;d.fontSize=a.fontSize;d.fontColor=a.fontColor;d.text=a.text;var d=new S(d),e=
new L;c.style.width=a.width+"px";c.style.height="auto";c.style.cssFloat="left";c.style.padding="0px";c.appendChild(g);c.appendChild(d);c.appendChild(e);return c},S=function(a){var c=document.createElement("div");c.style.cssFloat="left";c.style.overflow="hidden";c.style.textOverflow="ellipsis";c.style.whiteSpace="nowrap";c.style.width=a.width+"px";c.style.padding="3px";c.style.fontFamily=a.fontFamily;c.style.fontSize=a.fontSize;c.style.color=a.fontColor;c.style.border="0px";c.innerHTML=a.text;return c},
la=function(a){var c=document.createElement("div");c.style.cssFloat="left";c.style.overflow="hidden";c.style.textOverflow="ellipsis";c.style.whiteSpace="nowrap";c.style.padding="3px";c.style.fontFamily=a.fontFamily;c.style.fontSize=a.fontSize;c.style.color=a.fontColor;c.style.width=a.width+"px";c.style.fontWeight="bold";c.innerHTML=a.text;return c},oa=function(b,c,g){var d=document.createElement("div");d.id="imap5_"+b.usermap+"_maplegend_"+c;d.options=g;d.style.position="fixed";d._show=!0;a.div[b.usermap].appendChild(d);
d.setOptions=function(a){this.options=a};d.hide=function(){this.style.display="none";this._show=!1};d.show=function(){this.style.display="block";this._show=!0};d.toggleCategory=function(){"normal"==a.mode[b.usermap]?"undefined"!=typeof a.usermap[b.usermap].map.categorylegend&&a.usermap[b.usermap].map.categorylegend.enable?0!=this.options.categoryid&&("undefined"!=typeof a.categorylegend[b.usermap]?-1!=a.categorylegend[b.usermap].visiblelist.indexOf(this.options.categoryid)?this.show():this.hide():
this.show()):this.show():this.show()};d.drawMapLegend=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);for(var c in g.style)"backgroundColor"!=c&&"opacity"!=c&&(this.style[c]=this.options.style[c]);this.style.backgroundColor="rgba("+I(this.options.style.backgroundColor)+","+J(this.options.style.backgroundColor)+","+K(this.options.style.backgroundColor)+","+this.options.style.opacity+")";var f=0,m=this.options.columnsPerRow,h=parseInt(this.options.columnWidth)*
m,l=parseInt(this.options.columnWidth)*m-6,d=parseInt(this.options.icon.width),k=parseInt(this.options.icon.height),r=parseInt(this.options.columnWidth)-(d+6)-6,p=parseInt(this.options.columnWidth),n=new L;n.style.width=h+"px";this.appendChild(n);for(c in this.options.items)if(this.options.items.hasOwnProperty(c)){switch(this.options.items[c].type){case 1:n={};n.text=this.options.items[c].text;n.width=l;n.fontFamily=this.options.style.fontFamily;n.fontSize=this.options.style.fontSize;n.fontColor=
this.options.style.fontColor;f=new la(n);this.appendChild(f);f=0;break;case 2:n={};n.text=this.options.items[c].text;n.image=this.options.items[c].image;n.basepath=a.base[b.usermap];n.iconWidth=d;n.iconHeight=k;n.legendTextWidth=r;n.width=p;n.fontFamily=this.options.style.fontFamily;n.fontSize=this.options.style.fontSize;n.fontColor=this.options.style.fontColor;n.columnsPerRow=this.options.columnsPerRow;n=new Ha(n);this.appendChild(n);f+=1;break;case 3:n={};n.text=this.options.items[c].text;n.fill=
this.options.items[c].fill;n.opacity="undefined"!==typeof this.options.items[c].opacity?this.options.items[c].opacity:1;n.iconWidth=d;n.iconHeight=k;n.legendTextWidth=r;n.width=p;n.fontFamily=this.options.style.fontFamily;n.fontSize=this.options.style.fontSize;n.fontColor=this.options.style.fontColor;n.columnsPerRow=this.options.columnsPerRow;n=new Ga(n);this.appendChild(n);f+=1;break;case 4:n={},n.text=this.options.items[c].text,n.stroke=this.options.items[c].stroke,n.opacity="undefined"!==typeof this.options.items[c].opacity?
this.options.items[c].opacity:1,n.iconWidth=d,n.iconHeight=k,n.legendTextWidth=r,n.width=p,n.fontFamily=this.options.style.fontFamily,n.fontSize=this.options.style.fontSize,n.fontColor=this.options.style.fontColor,n.columnsPerRow=this.options.columnsPerRow,n=new Fa(n),this.appendChild(n),f+=1}if(f==m||"1"==this.options.items[c].type)n=new L,n.style.width=h+"px",this.appendChild(n),f=0}this.style.position="absolute";this.style.display="table";this.style.width=h+2*parseInt(this.options.style.padding)+
"px";switch(this.options.anchor){case 1:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.bottom="auto";this.style.right="auto";break;case 2:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.width)-parseInt(this.offsetWidth))/2+"px";this.style.bottom=
"auto";this.style.right="auto";break;case 3:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.right=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.bottom="auto";this.style.left="auto";break;case 4:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.height)-parseInt(this.offsetHeight))/2+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.bottom=
"auto";this.style.right="auto";break;case 5:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.height)-parseInt(this.offsetHeight))/2+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.width)-parseInt(this.offsetWidth))/2+"px";this.style.bottom="auto";this.style.right="auto";break;case 6:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+(parseInt(a.usermap[b.usermap].div.style.height)-
parseInt(this.offsetHeight))/2+"px";this.style.right=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.bottom="auto";this.style.left="auto";break;case 7:this.style.bottom=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px";this.style.top="auto";this.style.right="auto";break;case 8:this.style.bottom=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+
(parseInt(a.usermap[b.usermap].div.style.width)-parseInt(this.offsetWidth))/2+"px";this.style.top="auto";this.style.right="auto";break;case 9:this.style.bottom=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.right=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";this.style.top="auto";this.style.left="auto";break;default:this.style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+10+"px",this.style.right=10-parseInt(a.usermap[b.usermap].div.style.borderWidth)+
"px",this.style.bottom="auto",this.style.left="auto"}};d.remove=function(){a.div[b.usermap].removeChild(document.getElementById(this.id))};d.onmouseup=function(a){};d.onmousedown=function(a){};d.onmouseover=function(c){if("maplegend"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="pointer";"edit"==a.mode[b.usermap]&&x(b,c,"Click to select")};d.onmouseout=function(c){if("maplegend"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="auto";"edit"==a.mode[b.usermap]&&H(b)};
d.onmousewheel=function(a){};a.div[b.usermap].addEventListener&&d.addEventListener("DOMMouseScroll",function(a){},!1);d.onclick=function(d){d.stopPropagation&&d.stopPropagation();this._mapdragged||this._transformed||a.div[b.usermap]._mapdragged||"edit"!=a.mode[b.usermap]||(null!=a.selectedVerticesObj[b.usermap]&&a.selectedVerticesObj[b.usermap]!=this&&a.selectedVerticesObj[b.usermap].deleteVertices(),d={event:"click",object:"maplegend"},d.id=Number(c),window.console&&console.log(JSON.stringify(d)))};
a.touchdevices&&(d.ontouchstart=d.ontouchmove=d.ontouchend=function(a){a.stopPropagation&&a.stopPropagation()});d.drawMapLegend();return d},B=function(b,c,g){var d=document.createElement("div");d.id="imap5_"+b.usermap+"_infobox_"+g.obj+"_"+c;d.options=g;d.style.position="fixed";d.style.top=g.clientY+3+"px";d.style.left=g.clientX+3+"px";for(var e in a.usermap[b.usermap].infobox.style)"backgroundColor"!=e&&"opacity"!=e&&(d.style[e]=a.usermap[b.usermap].infobox.style[e]);d.style.backgroundColor="rgba("+
I(a.usermap[b.usermap].infobox.style.backgroundColor)+","+J(a.usermap[b.usermap].infobox.style.backgroundColor)+","+K(a.usermap[b.usermap].infobox.style.backgroundColor)+","+a.usermap[b.usermap].infobox.style.opacity+")";d.innerHTML=g.infobox.replace(/%_BASE_%/g,a.base[b.usermap]);a.div[b.usermap].appendChild(d);d.onmouseout=function(a){for(var b=a.relatedTarget;null!=b;){if(b==this)return;b=b.parentNode}null!=a.relatedTarget&&this.id.split("_")[4]!=a.relatedTarget.parentNode.id&&this.remove()};d.onmouseup=
function(a){a.stopPropagation&&a.stopPropagation()};d.onmousedown=function(a){a.stopPropagation&&a.stopPropagation()};d.onmousewheel=function(a){a.stopPropagation&&a.stopPropagation()};a.div[b.usermap].addEventListener&&d.addEventListener("DOMMouseScroll",function(a){a.stopPropagation&&a.stopPropagation()},!1);d.show=function(){this.style.display="block"};d.hide=function(){this.style.display="none"};d.reposition=function(f,c,h){var l;l="undefined"!=typeof a.usermap[b.usermap].infobox.style.sensitivity?
a.usermap[b.usermap].infobox.style.sensitivity:15;var d=document.body.offsetHeight,e=document.body.offsetWidth,g=2*parseInt(a.usermap[b.usermap].infobox.style.padding);if(h||Math.sqrt((this.options.clientX-f)*(this.options.clientX-f)+(this.options.clientY-c)*(this.options.clientY-c))>l)this.options.clientX=f,this.options.clientY=c,"undefined"!=typeof a.usermap[b.usermap].infobox.style.width?(h=parseInt(a.usermap[b.usermap].infobox.style.width),h>e?(this.style.width=e-g+"px",this.style.left=0):h>Math.max(f,
e-f)-g?(e=e-f-h-g,0<e&&(e=0),this.style.width=h+"px",this.style.left=f+e+"px"):(this.style.width=h+"px",this.style.left=(h>e-f?f-h-g:f)+"px")):f>3*e/5?(this.style.width="auto",this.style.left="0px",h=parseFloat(window.getComputedStyle(document.getElementById(this.id),null).getPropertyValue("width")),h>e/2?(this.style.width=e/2+"px",this.style.left=f-e/2-g+"px"):(this.style.width=h+"px",this.style.left=f-h-g+"px")):(this.style.width="auto",this.style.left=f+"px"),"undefined"!=typeof a.usermap[b.usermap].infobox.style.height?
(f=parseInt(a.usermap[b.usermap].infobox.style.height),e=Math.max(c,d-c)-g,f>e?(this.style.height=e+"px",this.style.top=(c>d/2?0:c)+"px"):(this.style.height=f+"px",this.style.top=(f>d-c?c-f-g:c)+"px")):c>3*d/5?(this.style.height="auto",f=parseFloat(window.getComputedStyle(document.getElementById(this.id),null).getPropertyValue("height")),f>d/2?(this.style.height=d/2+"px",this.style.top=c-d/2-g+"px"):(this.style.height=f+"px",this.style.top=c-f-g+"px")):(this.style.height="auto",f=parseFloat(window.getComputedStyle(document.getElementById(this.id),
null).getPropertyValue("height")),this.style.height=f>d-c-g-3?d-c-g-3+"px":"auto",this.style.top=c+"px")};d.remove=function(){document.getElementById(this.id)&&(a.div[b.usermap].removeChild(document.getElementById(this.id)),a.infobox[b.usermap].pop())};a.touchdevices&&(d.ontouchstart=d.ontouchmove=d.ontouchend=function(a){a.stopPropagation&&a.stopPropagation()});e={};e.object=g.obj;e.id=c;a.infobox[b.usermap].push(e);d.reposition(g.clientX,g.clientY,!0);return d},N=function(b,c,g,d){var e=this,f=
a.usermap[b.usermap].map.id,m=t("g");a.g[b.usermap].appendChild(m);m._options=d;m._id=c;0==d.type?m.setAttribute("id","imap5_"+b.usermap+"_verticesobj_"+c):m.setAttribute("id","imap5_"+b.usermap+"_subverticesobj_"+c);m._lat=d.lat;m._lng=d.lng;m._type=d.type;m._removable=d.removeable;this._parentnode=g;m._dx=a.map[f].precision/a.factor[b.usermap]*m._lng;m._dy=v(m._lat)*(a.map[f].precision/a.factor[b.usermap]);m.setOptions=function(a){this._options=a;this._lat=a.lat;this._lng=a.lng;this._type=a.type;
this._removable=a.removable};m.hide=function(){this.style.visibility="hidden"};m.show=function(){this.style.visibility="visible"};m.onmouseover=function(f){"edit"==a.mode[b.usermap]&&(this.style.cursor="pointer");"edit"==a.mode[b.usermap]&&(0==d.type?d.removable?x(b,f,"<strong>[Drag]</strong> to change position. <strong>[Right Click]</strong> to delete."):x(b,f,"<strong>[Drag]</strong> to change position."):x(b,f,"<strong>[Click]</strong> to split the line segment"))};m.onmouseout=function(f){"edit"==
a.mode[b.usermap]&&(this.style.cursor="auto");"edit"==a.mode[b.usermap]&&H(b);"normal"==a.mode[b.usermap]&&(this.style.cursor="auto")};m.onmousedown=function(f){f.preventDefault&&f.preventDefault();"edit"==a.mode[b.usermap]&&(f.stopPropagation&&f.stopPropagation(),this._mousedown=!0,this._mapdragged=!1,this._x=f.clientX,this._y=f.clientY,0==d.type?(a.selectedOverlay[b.usermap]=this,e._parentnode.hideSubVertices()):e._parentnode.addVertices(c,this._options.lat,this._options.lng))};0==d.type&&(m.onmousemove=
function(h){h.preventDefault&&h.preventDefault();if("edit"==a.mode[b.usermap]&&(h.stopPropagation&&h.stopPropagation(),this._mousedown&&0==d.type&&(2<Math.abs(h.clientX-this._x)||2<Math.abs(h.clientY-this._y)))){this._mapdragged=!0;this._x=h.clientX;this._y=h.clientY;var l=a.svgcoord[b.usermap];l.x=h.clientX;l.y=h.clientY;l=w(l,a.g[b.usermap]);l.x/=a.map[f].precision/a.factor[b.usermap];l.y/=a.map[f].precision/a.factor[b.usermap];h=l.x;var m=360*(Math.atan(Math.pow(Math.E,l.y.toFixed(a.precision)*
Math.PI/180))-Math.PI/4)/Math.PI;O(m,h)||(this._lat=a.map[f].precision/a.factor[b.usermap]*l.y,this._lng=a.map[f].precision/a.factor[b.usermap]*l.x,this.setAttribute("transform","translate("+k(this._lng,a.precision)+","+k(this._lat,a.precision)+") scale("+k(a.map[f].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")"),e._parentnode.updateVertices(c,m,h))}},m.onmouseup=function(f){f.preventDefault&&f.preventDefault();"edit"==a.mode[b.usermap]&&0==d.type&&(f.stopPropagation&&
f.stopPropagation(),a.selectedOverlay[b.usermap]==this&&(a.selectedOverlay[b.usermap]=null),e._parentnode.postPosChange(),this._mousedown=!1)},m.oncontextmenu=function(f){f.preventDefault&&f.preventDefault();"edit"==a.mode[b.usermap]&&(f.stopPropagation&&f.stopPropagation(),0==d.type&&d.removable&&e._parentnode.removeVertices(c))});m.drawVerticesObj=function(){var h=this.getElementsByTagName("g")[0];"undefined"!=typeof h&&this.removeChild(h);var h=t("g"),c=t("circle");h.appendChild(c);this.appendChild(h);
c.setAttribute("cx",0);c.setAttribute("cy",0);c.setAttribute("r",5);c.setAttribute("stroke","#000000");c.setAttribute("stroke-width",1);1==this._type?(c.setAttribute("fill","#CCCCCC"),c.setAttribute("fill-opacity",.5)):(c.setAttribute("fill","#FFFFFF"),c.setAttribute("fill-opacity",1));h.setAttribute("transform","scale(1,-1)");h=180/Math.PI*Math.log(Math.tan(Math.PI/4+Math.PI*this._options.lat/360));c=this._options.lng;this._lat=a.map[f].precision/a.factor[b.usermap]*h;this._lng=a.map[f].precision/
a.factor[b.usermap]*c;this.setAttribute("transform","translate("+k(a.map[f].precision/a.factor[b.usermap]*c,a.precision)+","+k(a.map[f].precision/a.factor[b.usermap]*h,a.precision)+") scale("+k(a.map[f].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};m.rescale=function(){this.setAttribute("transform","translate("+k(this._lng,a.precision)+","+k(this._lat,a.precision)+") scale("+k(a.map[f].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};
m.remove=function(){a.g[b.usermap].removeChild(this)};m.drawVerticesObj();return m},Ia=function(b,c,g){var d=a.usermap[b.usermap].map.id,e=t("g");a.g[b.usermap].appendChild(e);e._options=g;e._id=c;e.setAttribute("id","imap5_"+b.usermap+"_mapabbr_"+c);e._lat=g.lat;e._lng=g.lng;e._dx=a.map[d].precision/a.factor[b.usermap]*e._lng;e._dy=v(e._lat)*(a.map[d].precision/a.factor[b.usermap]);e._show=!0;e.setPosition=function(f){this._lat=a.usermap[b.usermap].map.mapabbr[this._id].lat=f.lat;this._lng=a.usermap[b.usermap].map.mapabbr[this._id].lng=
f.lng;this._dy=v(this._lat)*(a.map[d].precision/a.factor[b.usermap]);this._dx=a.map[d].precision/a.factor[b.usermap]*this._lng;e.setAttribute("transform","translate("+k(this._dx,a.precision)+","+k(this._dy,a.precision)+") scale("+k(a.map[d].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};e.getPosition=function(){var a={};a.lat=this._lat;a.lng=this._lng;return a};e.setOptions=function(a){this._options=a};e.setLabel=function(a){this._options.label.text=a;this.drawMapAbbr()};
e.hide=function(){this.style.visibility="hidden";this._show=!1};e.show=function(){this.style.visibility="visible";this._show=!0};e.drawMapAbbr=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);if(""!=this._options.label.text){var f=t("text");this.appendChild(f);var c=t("text");this.appendChild(c);var h=document.createTextNode(this._options.label.text);c.appendChild(h);c.setAttribute("style","stroke-width:0");c.style.strokeOpacity=0;c.style.fontFamily=
this._options.label.style.fontFamily;c.style.fill=this._options.label.style.fontColor;c.style.fontSize=this._options.label.style.fontSize;c.style.fontStyle=this._options.label.style.fontStyle;c.style.fontWeight=this._options.label.style.fontWeight;c.style.pointerEvents="none";h=0+parseInt(c.style.fontSize)/2-(c.getBBox().height+c.getBBox().y)/2;c.setAttribute("x",0);c.setAttribute("y",h);c.setAttribute("transform","scale(1,-1)");c.setAttribute("text-anchor","middle");c=document.createTextNode(this._options.label.text);
f.appendChild(c);f.setAttribute("style","stroke-width:0");f.style.strokeOpacity=0;f.style.fontFamily=this._options.label.style.fontFamily;f.style.fill="undefined"==typeof this._options.label.style.shadowColor?"#ffffff":this._options.label.style.shadowColor;f.style.fontSize=this._options.label.style.fontSize;f.style.fontStyle=this._options.label.style.fontStyle;f.style.fontWeight=this._options.label.style.fontWeight;f.style.pointerEvents="none";f.setAttribute("x",1);f.setAttribute("y",h+1);f.setAttribute("transform",
"scale(1,-1)");f.setAttribute("text-anchor","middle");f.style.fillOpacity="undefined"==typeof this._options.label.style.shadowOpacity?.7:this._options.label.style.shadowOpacity}f=180/Math.PI*Math.log(Math.tan(Math.PI/4+Math.PI*this._options.lat/360));c=this._options.lng;this._lat=a.map[d].precision/a.factor[b.usermap]*f;this._lng=a.map[d].precision/a.factor[b.usermap]*c;this.setAttribute("transform","translate("+k(a.map[d].precision/a.factor[b.usermap]*c,a.precision)+","+k(a.map[d].precision/a.factor[b.usermap]*
f,a.precision)+") scale("+k(a.map[d].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};e.remove=function(){a.g[b.usermap].removeChild(this);a.mapabbr[b.usermap][this._id]=null};e.drawMapAbbr();return e},pa=function(b,c,g){var d=t("g"),e=a.usermap[b.usermap].map.id;a.g[b.usermap].appendChild(d);d._options=g;d._id=c;d.setAttribute("id","imap5_"+b.usermap+"_piechart_"+c);d.hide=function(){this.style.visibility="hidden"};d.show=function(){this.style.visibility="visible"};
d.drawPieChart=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);for(var f=a.usermap[b.usermap].map.piechart.radius,c=f/2,h=a.usermap[b.usermap].map.piechart.colorset.split(","),l=this._options.pievalue.split(","),d=0,q=a.usermap[b.usermap].map.piechart.series,r=0;r<q;r++)l.hasOwnProperty(r)&&(d+=parseFloat(l[r]));var p=[];if(0>=d)this.style.visibility="hidden",p=[0,0,0,0,0,0,0,0];else for(this.style.visibility="true",r=0;r<q;r++)l.hasOwnProperty(r)&&
p.push(2*Math.PI*parseFloat(l[r])/d);for(var l=t("g"),n=0,r=0;r<q;r++){var d=n+p[r],u=k(0+2*f*Math.sin(n),6),v=k(0-f*Math.cos(n),6),x=k(0+2*f*Math.sin(d),6),U=k(0-f*Math.cos(d),6),y=0,w=0;d-n>=Math.PI&&(y=1);if(n!=d){if(d-n==2*Math.PI)w=1;else var B="M 0,0 L "+u+","+v+" A "+2*f+","+f+" 0 "+y+" 1 "+x+","+U+" Z";w?(y=t("ellipse"),y.setAttribute("cx",0),y.setAttribute("cy",0),y.setAttribute("rx",2*f),y.setAttribute("ry",f)):(y=t("path"),y.setAttribute("d",B));y.setAttribute("fill",h[r]);y.setAttribute("fill-opacity",
a.usermap[b.usermap].map.piechart.opacity);y.setAttribute("stroke",a.usermap[b.usermap].map.piechart.stroke);y.setAttribute("stroke-width",a.usermap[b.usermap].map.piechart.strokeWidth);y.setAttribute("stroke-opacity",a.usermap[b.usermap].map.piechart.strokeOpacity);l.appendChild(y)}u=n;v=d;if(n>=Math.PI/2&&n<=3*Math.PI/2||d>=Math.PI/2&&d<=3*Math.PI/2||n<=Math.PI/2&&d>=3*Math.PI/2)d>=3*Math.PI/2&&(v=3*Math.PI/2),n<=Math.PI/2&&(u=Math.PI/2),y=0,v-u>Math.PI&&(y=1),n=k(0+2*f*Math.sin(u),6),x=k(0-f*Math.cos(u),
6),U=k(0+2*f*Math.sin(v),6),w=k(0-f*Math.cos(v),6),u!=v&&(B="M "+n+","+x+" L "+n+","+(x+c)+" A "+2*f+","+f+" 0 "+y+" 1 "+U+","+(w+c)+" L "+U+","+w+" A "+2*f+","+f+" 0 "+y+" 0 "+n+","+x+" Z ",y=t("path"),y.setAttribute("d",B),y.setAttribute("fill",h[r]),y.setAttribute("fill-opacity",a.usermap[b.usermap].map.piechart.opacity),y.setAttribute("stroke",a.usermap[b.usermap].map.piechart.stroke),y.setAttribute("stroke-width",a.usermap[b.usermap].map.piechart.strokeWidth),y.setAttribute("stroke-opacity",
a.usermap[b.usermap].map.piechart.strokeOpacity),l.appendChild(y));n=d}l.setAttribute("transform","scale(1,-1)");this.appendChild(l);f=180/Math.PI*Math.log(Math.tan(Math.PI/4+Math.PI*g.lat/360));c=g.lng;this._lat=a.map[e].precision/a.factor[b.usermap]*f;this._lng=a.map[e].precision/a.factor[b.usermap]*c;this.setAttribute("transform","translate("+k(a.map[e].precision/a.factor[b.usermap]*c,a.precision)+","+k(a.map[e].precision/a.factor[b.usermap]*f,a.precision)+") scale("+k(a.map[e].precision/a.factor[b.usermap]/
a.zoom[b.usermap].currentzoom,a.precision)+")")};d.onmouseover=function(f){if("normal"==a.mode[b.usermap]){for(var c=this.getElementsByTagName("g")[0],h=c.getElementsByTagName("path"),l=0;l<h.length;l++)h.hasOwnProperty(l)&&h[l].setAttribute("stroke",a.usermap[b.usermap].map.piechart.strokeHover);c=c.getElementsByTagName("ellipse");for(l=0;l<c.length;l++)c.hasOwnProperty(l)&&c[l].setAttribute("stroke",a.usermap[b.usermap].map.piechart.strokeHover);if(a.usermap[b.usermap].map.piechart.showdetails&&
!document.getElementById("imap5_"+b.usermap+"_infobox_piechart_"+this._id)){for(var c=a.usermap[b.usermap].map.piechart.contentformat.replace(/__TITLE__/g,a.usermap[b.usermap].map.geometry[this._id].title),h=this._options.pievalue.split(","),d=0,e=a.usermap[b.usermap].map.piechart.series,l=0;l<e;l++)h.hasOwnProperty(l)&&(d+=parseFloat(h[l]));c=c.replace(/__DATA1__/g,h[0]);c=c.replace(/__DATA2__/g,h[1]);c=c.replace(/__DATA3__/g,h[2]);c=c.replace(/__DATA4__/g,h[3]);c=c.replace(/__DATA5__/g,h[4]);c=
c.replace(/__DATA6__/g,h[5]);c=c.replace(/__DATA7__/g,h[6]);c=c.replace(/__DATA8__/g,h[7]);c=c.replace(/__PERCENT1__/g,k(parseFloat(h[0])/d*100,2));c=c.replace(/__PERCENT2__/g,k(parseFloat(h[1])/d*100,2));c=c.replace(/__PERCENT3__/g,k(parseFloat(h[2])/d*100,2));c=c.replace(/__PERCENT4__/g,k(parseFloat(h[3])/d*100,2));c=c.replace(/__PERCENT5__/g,k(parseFloat(h[4])/d*100,2));c=c.replace(/__PERCENT6__/g,k(parseFloat(h[5])/d*100,2));c=c.replace(/__PERCENT7__/g,k(parseFloat(h[6])/d*100,2));c=c.replace(/__PERCENT8__/g,
k(parseFloat(h[7])/d*100,2));l={};l.clientX=f.clientX;l.clientY=f.clientY;l.obj="piechart";l.infobox=c;this.infobox=new B(b,this._id,l)}}};d.onmouseout=function(f){if("normal"==a.mode[b.usermap]){for(var c=this.getElementsByTagName("g")[0],h=c.getElementsByTagName("path"),l=0;l<h.length;l++)h.hasOwnProperty(l)&&h[l].setAttribute("stroke",a.usermap[b.usermap].map.piechart.stroke);c=c.getElementsByTagName("ellipse");for(l=0;l<c.length;l++)c.hasOwnProperty(l)&&c[l].setAttribute("stroke",a.usermap[b.usermap].map.piechart.stroke);
(null==f.relatedTarget||f.relatedTarget.id!="imap5_"+b.usermap+"_infobox_piechart_"+this._id)&&document.getElementById("imap5_"+b.usermap+"_infobox_piechart_"+this._id)&&this.infobox.remove()}};d.onmousemove=function(f){f.preventDefault&&f.preventDefault();"normal"==a.mode[b.usermap]&&(a.div[b.usermap]._mousedown?document.getElementById("imap5_"+b.usermap+"_infobox_piechart_"+this._id)&&this.infobox.hide():document.getElementById("imap5_"+b.usermap+"_infobox_piechart_"+this._id)&&(this.infobox.reposition(f.clientX,
f.clientY),this.infobox.show()))};a.touchdevices&&(d.ontouchstart=function(a){1==a.touches.length&&(this._touch=!0,this._move=!1,this._posX=a.touches[0].clientX,this._posY=a.touches[0].clientY)},d.ontouchmove=function(a){1==a.touches.length?this._touch&&(10<Math.abs(a.touches[0].clientX-this._posX)||10<Math.abs(a.touches[0].clientY-this._posY))&&(this._move=!0):this._touch=!1},d.ontouchend=function(f){if(this._touch&&!this._move&&!a.div[b.usermap]._mapdragged){if("edit"==a.mode[b.usermap])return;
if(this.ishighlight)for(this.ishighlight=!1,f=this.getElementsByTagName("g")[0],c=f.getElementsByTagName("path"),f=0;f<c.length;f++)c.hasOwnProperty(f)&&c[f].setAttribute("stroke",a.usermap[b.usermap].map.piechart.stroke);else{this.ishighlight=!0;f=this.getElementsByTagName("g")[0];var c=f.getElementsByTagName("path");for(f=0;f<c.length;f++)c.hasOwnProperty(f)&&c[f].setAttribute("stroke",a.usermap[b.usermap].map.piechart.strokeHover)}0<a.infobox[b.usermap].length&&(document.getElementById("imap5_"+
b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)&&a.div[b.usermap].removeChild(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)),a.infobox[b.usermap].pop());if(!document.getElementById("imap5_"+b.usermap+"_infobox_piechart_"+this._id)){var c=a.usermap[b.usermap].map.piechart.contentformat.replace(/__TITLE__/g,a.usermap[b.usermap].map.geometry[this._id].title),h=this._options.pievalue.split(","),
l=0,d=a.usermap[b.usermap].map.piechart.series;for(f=0;f<d;f++)h.hasOwnProperty(f)&&(l+=parseFloat(h[f]));c=c.replace(/__DATA1__/g,h[0]);c=c.replace(/__DATA2__/g,h[1]);c=c.replace(/__DATA3__/g,h[2]);c=c.replace(/__DATA4__/g,h[3]);c=c.replace(/__DATA5__/g,h[4]);c=c.replace(/__DATA6__/g,h[5]);c=c.replace(/__DATA7__/g,h[6]);c=c.replace(/__DATA8__/g,h[7]);c=c.replace(/__PERCENT1__/g,k(parseFloat(h[0])/l*100,2));c=c.replace(/__PERCENT2__/g,k(parseFloat(h[1])/l*100,2));c=c.replace(/__PERCENT3__/g,k(parseFloat(h[2])/
l*100,2));c=c.replace(/__PERCENT4__/g,k(parseFloat(h[3])/l*100,2));c=c.replace(/__PERCENT5__/g,k(parseFloat(h[4])/l*100,2));c=c.replace(/__PERCENT6__/g,k(parseFloat(h[5])/l*100,2));c=c.replace(/__PERCENT7__/g,k(parseFloat(h[6])/l*100,2));c=c.replace(/__PERCENT8__/g,k(parseFloat(h[7])/l*100,2));f={};f.clientX=this._posX;f.clientY=this._posY;f.obj="piechart";f.infobox=c;this.infobox=new B(b,this._id,f)}}this._move=this._touch=!1});d.rescale=function(){this.setAttribute("transform","translate("+k(this._lng,
a.precision)+","+k(this._lat,a.precision)+") scale("+k(a.map[e].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};d.remove=function(){a.g[b.usermap].removeChild(this);a.piechart[b.usermap][this._id]=null};d.drawPieChart();return d},qa=function(b,c,g){var d=t("g"),e=a.usermap[b.usermap].map.id;a.g[b.usermap].appendChild(d);d._options=g;d._id=c;d.setAttribute("id","imap5_"+b.usermap+"_mapbubble_"+c);d.hide=function(){this.style.visibility="hidden"};d.show=function(){this.style.visibility=
"visible"};d.drawMapBubble=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);var f=t("g"),c=t("circle");f.appendChild(c);this.appendChild(f);c.setAttribute("cx",0);c.setAttribute("cy",0);c.setAttribute("r",Math.abs(this._options.bubblevalue/a.usermap[b.usermap].map.bubblemap.maxbubble)*a.usermap[b.usermap].map.bubblemap.radius);c.setAttribute("stroke","#EEEEEE");c.setAttribute("stroke-width",0);0<this._options.bubblevalue?c.setAttribute("fill",a.usermap[b.usermap].map.bubblemap.poscolor):
c.setAttribute("fill",a.usermap[b.usermap].map.bubblemap.negcolor);c.setAttribute("fill-opacity",a.usermap[b.usermap].map.bubblemap.opacity);f.setAttribute("transform","scale(1,-1)");f=180/Math.PI*Math.log(Math.tan(Math.PI/4+Math.PI*g.lat/360));c=g.lng;this._lat=a.map[e].precision/a.factor[b.usermap]*f;this._lng=a.map[e].precision/a.factor[b.usermap]*c;this.setAttribute("transform","translate("+k(a.map[e].precision/a.factor[b.usermap]*c,a.precision)+","+k(a.map[e].precision/a.factor[b.usermap]*f,
a.precision)+") scale("+k(a.map[e].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};d.onmouseover=function(f){if("normal"==a.mode[b.usermap]){var c=this.getElementsByTagName("g")[0].getElementsByTagName("circle")[0];c.setAttribute("stroke","#EEEEEE");c.setAttribute("stroke-width",2);if(a.usermap[b.usermap].map.bubblemap.showdetails&&!document.getElementById("imap5_"+b.usermap+"_infobox_mapbubble_"+this._id)){var c=a.usermap[b.usermap].map.bubblemap.contentformat.replace(/__TITLE__/g,
a.usermap[b.usermap].map.geometry[this._id].title).replace(/__DATA__/g,this._options.bubblevalue),h={};h.clientX=f.clientX;h.clientY=f.clientY;h.obj="mapbubble";h.infobox=c;this.infobox=new B(b,this._id,h)}}};d.onmouseout=function(f){if("normal"==a.mode[b.usermap]){var c=this.getElementsByTagName("g")[0].getElementsByTagName("circle")[0];c.setAttribute("stroke","#EEEEEE");c.setAttribute("stroke-width",0);(null==f.relatedTarget||f.relatedTarget.id!="imap5_"+b.usermap+"_infobox_mapbubble_"+this._id)&&
document.getElementById("imap5_"+b.usermap+"_infobox_mapbubble_"+this._id)&&this.infobox.remove()}};d.onmousemove=function(f){f.preventDefault&&f.preventDefault();"normal"==a.mode[b.usermap]&&(a.div[b.usermap]._mousedown?document.getElementById("imap5_"+b.usermap+"_infobox_mapbubble_"+this._id)&&this.infobox.hide():document.getElementById("imap5_"+b.usermap+"_infobox_mapbubble_"+this._id)&&(this.infobox.reposition(f.clientX,f.clientY),this.infobox.show()))};a.touchdevices&&(d.ontouchstart=function(a){1==
a.touches.length&&(this._touch=!0,this._move=!1,this._posX=a.touches[0].clientX,this._posY=a.touches[0].clientY)},d.ontouchmove=function(a){1==a.touches.length?this._touch&&(10<Math.abs(a.touches[0].clientX-this._posX)||10<Math.abs(a.touches[0].clientY-this._posY))&&(this._move=!0):this._touch=!1},d.ontouchend=function(f){if(this._touch&&!this._move&&!a.div[b.usermap]._mapdragged){if("edit"==a.mode[b.usermap])return;this.ishighlight?(this.ishighlight=!1,f=this.getElementsByTagName("g")[0],f=f.getElementsByTagName("circle")[0],
f.setAttribute("stroke","#EEEEEE"),f.setAttribute("stroke-width",0)):(this.ishighlight=!0,f=this.getElementsByTagName("g")[0],f=f.getElementsByTagName("circle")[0],f.setAttribute("stroke","#EEEEEE"),f.setAttribute("stroke-width",2));0<a.infobox[b.usermap].length&&(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)&&a.div[b.usermap].removeChild(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+
a.infobox[b.usermap][0].id)),a.infobox[b.usermap].pop());if(!document.getElementById("imap5_"+b.usermap+"_infobox_mapbubble_"+this._id)){f=a.usermap[b.usermap].map.bubblemap.contentformat.replace(/__TITLE__/g,a.usermap[b.usermap].map.geometry[this._id].title).replace(/__DATA__/g,this._options.bubblevalue);var c={};c.clientX=this._posX;c.clientY=this._posY;c.obj="mapbubble";c.infobox=f;this.infobox=new B(b,this._id,c)}}this._move=this._touch=!1});d.rescale=function(){this.setAttribute("transform",
"translate("+k(this._lng,a.precision)+","+k(this._lat,a.precision)+") scale("+k(a.map[e].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};d.remove=function(){a.g[b.usermap].removeChild(this);a.mapbubble[b.usermap][this._id]=null};d.drawMapBubble();return d},ba=function(b,c,g){var d=a.usermap[b.usermap].map.id,e=t("g");a.g[b.usermap].appendChild(e);e._options=g;e._id=c;e.setAttribute("id","imap5_"+b.usermap+"_mapcurve_"+c);e._points=g.points;e._movingpoints="";e._mainvertices=
[];e._show=!0;e.updateVertices=function(b,c,h){var l=this._points.split(" ");l[b-1]=k(c,a.precision)+","+k(h,a.precision);b="";for(c=0;c<l.length;c++)""!=b&&(b+=" "),b=b+l[c].split(",")[0]+","+l[c].split(",")[1];this._points=this._options.points=b;this.drawMapCurve()};e.postPosChange=function(){this.createVertices();var a={event:"poschange",object:"mapcurve"};a.id=Number(this._id);a.points=this._points;window.console&&console.log(JSON.stringify(a))};e.setPosition=function(f){this._points=a.usermap[b.usermap].map.mapcurve[this._id].points=
f.points;this.drawMapCurve()};e.getPosition=function(){var a={};a.points=this._points;return a};e.setOptions=function(a){this._options=a};e.count=function(){return this._options.points.split(" ").length};e.addPoint=function(a,b){var c=this._options.points;this._options.points=this._points=c+" "+a+","+b;this.drawMapCurve()};e.hide=function(){this.style.visibility="hidden";this._show=!1};e.show=function(){this.style.visibility="visible";this._show=!0};e.toggleCategory=function(){"normal"==a.mode[b.usermap]?
"undefined"!=typeof a.usermap[b.usermap].map.categorylegend&&a.usermap[b.usermap].map.categorylegend.enable?0!=this._options.categoryid&&("undefined"!=typeof a.categorylegend[b.usermap]?-1!=a.categorylegend[b.usermap].visiblelist.indexOf(this._options.categoryid)?this.show():this.hide():this.show()):this.show():this.show()};e.createVertices=function(){null!=a.selectedVerticesObj[b.usermap]&&a.selectedVerticesObj[b.usermap]!=this&&a.selectedVerticesObj[b.usermap].deleteVertices();a.selectedVerticesObj[b.usermap]=
this;for(var f in this._mainvertices)this._mainvertices.hasOwnProperty(f)&&this._mainvertices[f].remove();this._mainvertices.length=0;var c=this._points.split(" "),h,l={};for(f=0;f<c.length;f++)h=c[f].split(","),l.lat=h[0],l.lng=h[1],l.type=0,l.removable=!1,this._mainvertices[f+1]=new N(b,f+1,this,l),l={}};e.deleteVertices=function(){for(var a in this._mainvertices)this._mainvertices.hasOwnProperty(a)&&this._mainvertices[a].remove();this._mainvertices.length=0};e.hideSubVertices=function(){};e.showSubVertices=
function(){};e.drawMapCurve=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);var f,c,h,l,e,g,r,p;e=t("path");this.appendChild(e);g=t("path");this.appendChild(g);g.setAttribute("fill","none");g.setAttribute("stroke",this._options.style.stroke);g.setAttribute("stroke-width",k(this._options.style.strokeWidth/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));e.setAttribute("fill","none");e.setAttribute("stroke","#FFFFFF");
e.setAttribute("stroke-width",k(4/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));if("undefined"!=typeof this._options.style.strokeDasharray&&"none"!==this._options.style.strokeDasharray){r=this._options.style.strokeDasharray.split(",");f="";for(c=0;c<r.length;c++)""!=f&&(f+=","),f+=k(r[c]/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision);g.setAttribute("stroke-dasharray",f);e.setAttribute("stroke-dasharray",f)}r=this._options.points.split(" ");
f="";1==this.count()?(h=r[0].split(","),c=v(h[0])*(a.map[d].precision/a.factor[b.usermap]),h=a.map[d].precision/a.factor[b.usermap]*h[1],f=f+"M"+k(h,a.precision)+","+k(c,a.precision),""!=this._movingpoints&&(h=this._movingpoints.split(","),c=v(h[0])*(a.map[d].precision/a.factor[b.usermap]),h=a.map[d].precision/a.factor[b.usermap]*h[1],""!=f&&(f+=" L"),f=f+k(h,a.precision)+","+k(c,a.precision))):2==this.count()?(h=r[0].split(","),c=v(h[0])*(a.map[d].precision/a.factor[b.usermap]),h=a.map[d].precision/
a.factor[b.usermap]*h[1],f=f+"M"+k(h,a.precision)+","+k(c,a.precision),""!=this._movingpoints&&(h=this._movingpoints.split(","),c=v(h[0])*(a.map[d].precision/a.factor[b.usermap]),h=a.map[d].precision/a.factor[b.usermap]*h[1],""!=f&&(f+=" "),f=f+"Q"+k(h,a.precision)+","+k(c,a.precision)),h=r[1].split(","),c=v(h[0])*(a.map[d].precision/a.factor[b.usermap]),h=a.map[d].precision/a.factor[b.usermap]*h[1],f=f+" "+k(h,a.precision)+","+k(c,a.precision)):3==this.count()&&(h=r[0].split(","),c=v(h[0])*(a.map[d].precision/
a.factor[b.usermap]),h=a.map[d].precision/a.factor[b.usermap]*h[1],f=f+"M"+k(h,a.precision)+","+k(c,a.precision),""!=f&&(f+=" "),h=r[2].split(","),c=v(h[0])*(a.map[d].precision/a.factor[b.usermap]),h=a.map[d].precision/a.factor[b.usermap]*h[1],f=f+"Q"+k(h,a.precision)+","+k(c,a.precision),""!=f&&(f+=" "),h=r[1].split(","),c=v(h[0])*(a.map[d].precision/a.factor[b.usermap]),h=a.map[d].precision/a.factor[b.usermap]*h[1],f=f+k(h,a.precision)+","+k(c,a.precision));g.setAttribute("d",f);g.setAttribute("stroke-opacity",
this._options.style.strokeOpacity);g.setAttribute("stroke-linejoin","round");e.setAttribute("d",f);e.setAttribute("stroke-opacity",.01);e.setAttribute("stroke-linejoin","round");if(3==this.count()){p=f.split(" ");f=parseFloat(p[0].substring(1).split(",")[0]);c=parseFloat(p[0].substring(1).split(",")[1]);h=parseFloat(p[1].substring(1).split(",")[0]);l=parseFloat(p[1].substring(1).split(",")[1]);e=parseFloat(p[1].substring(1).split(",")[0]);g=parseFloat(p[1].substring(1).split(",")[1]);r=parseFloat(p[2].split(",")[0]);
p=parseFloat(p[2].split(",")[1]);switch("undefined"==typeof this._options.style.arrowStartType?0:this._options.style.arrowStartType){case 1:var n=parseInt(this._options.style.strokeWidth)+4,u=t("polygon");this.appendChild(u);u.setAttribute("fill",this._options.style.stroke);u.setAttribute("fill-opacity",this._options.style.strokeOpacity);u.setAttribute("stroke",this._options.style.stroke);u.setAttribute("stroke-width",0);u.setAttribute("points",V(f,c,k(n/a.zoom[b.usermap].currentzoom*(a.map[d].precision/
a.factor[b.usermap]),a.precision),M(f,c,h,l,0)));break;case 2:n=parseInt(this._options.style.strokeWidth)+2;u=t("path");this.appendChild(u);u.setAttribute("fill","none");u.setAttribute("stroke",this._options.style.stroke);u.setAttribute("stroke-opacity",this._options.style.strokeOpacity);u.setAttribute("stroke-width",k(parseInt(this._options.style.strokeWidth)/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));u.setAttribute("d",W(f,c,k(n/a.zoom[b.usermap].currentzoom*
(a.map[d].precision/a.factor[b.usermap]),a.precision),M(f,c,h,l,0)));u.setAttribute("stroke-linejoin","round");u.setAttribute("stroke-linecap","round");break;case 3:n=parseInt(this._options.style.strokeWidth)+2,u=t("circle"),this.appendChild(u),u.setAttribute("cx",f),u.setAttribute("cy",c),u.setAttribute("r",k(n/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision)),u.setAttribute("stroke","#EEEEEE"),u.setAttribute("stroke-width",0),u.setAttribute("fill",this._options.style.stroke),
u.setAttribute("fill-opacity",this._options.style.strokeOpacity)}switch("undefined"==typeof this._options.style.arrowEndType?0:this._options.style.arrowEndType){case 1:n=parseInt(this._options.style.strokeWidth)+4;f=t("polygon");this.appendChild(f);f.setAttribute("fill",this._options.style.stroke);f.setAttribute("fill-opacity",this._options.style.strokeOpacity);f.setAttribute("stroke",this._options.style.stroke);f.setAttribute("stroke-width",0);f.setAttribute("points",V(r,p,k(n/a.zoom[b.usermap].currentzoom*
(a.map[d].precision/a.factor[b.usermap]),a.precision),M(e,g,r,p,1)));break;case 2:n=parseInt(this._options.style.strokeWidth)+2;f=t("path");this.appendChild(f);f.setAttribute("fill","none");f.setAttribute("stroke",this._options.style.stroke);f.setAttribute("stroke-opacity",this._options.style.strokeOpacity);f.setAttribute("stroke-width",k(parseInt(this._options.style.strokeWidth)/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));f.setAttribute("d",W(r,p,k(n/a.zoom[b.usermap].currentzoom*
(a.map[d].precision/a.factor[b.usermap]),a.precision),M(e,g,r,p,1)));f.setAttribute("stroke-linejoin","round");f.setAttribute("stroke-linecap","round");break;case 3:n=parseInt(this._options.style.strokeWidth)+2,f=t("circle"),this.appendChild(f),f.setAttribute("cx",r),f.setAttribute("cy",p),f.setAttribute("r",k(n/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision)),f.setAttribute("stroke","#EEEEEE"),f.setAttribute("stroke-width",0),f.setAttribute("fill",this._options.style.stroke),
f.setAttribute("fill-opacity",this._options.style.strokeOpacity)}}};e.onmouseover=function(f){if("mapcurve"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="pointer";"edit"==a.mode[b.usermap]&&x(b,f,"Click to select");if(!a.touchdevices&&"normal"==a.mode[b.usermap]&&("undefined"!=typeof a.usermap[b.usermap].map.mapcurve[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mapcurve[this._id].link&&(this.style.cursor="pointer"),"onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=
typeof a.usermap[b.usermap].map.mapcurve[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mapcurve[this._id].infobox&&!document.getElementById("imap5_"+b.usermap+"_infobox_mapcurve_"+this._id))){var c={};c.clientX=f.clientX;c.clientY=f.clientY;c.obj="mapcurve";c.infobox=a.usermap[b.usermap].map.mapcurve[this._id].infobox;this.infobox=new B(b,this._id,c)}};e.onmouseout=function(f){if("mapcurve"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="auto";"edit"==a.mode[b.usermap]&&
H(b);"normal"==a.mode[b.usermap]&&(this.style.cursor="auto","onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=typeof a.usermap[b.usermap].map.mapcurve[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mapcurve[this._id].infobox&&(null==f.relatedTarget||f.relatedTarget.id!="imap5_"+b.usermap+"_infobox_mapcurve_"+this._id)&&document.getElementById("imap5_"+b.usermap+"_infobox_mapcurve_"+this._id)&&this.infobox.remove())};e.onmousemove=function(f){f.preventDefault&&f.preventDefault();
"normal"==a.mode[b.usermap]&&(a.div[b.usermap]._mousedown?document.getElementById("imap5_"+b.usermap+"_infobox_mapcurve_"+this._id)&&this.infobox.hide():document.getElementById("imap5_"+b.usermap+"_infobox_mapcurve_"+this._id)&&(this.infobox.reposition(f.clientX,f.clientY),this.infobox.show()))};e.onclick=function(f){this._mapdragged||this._transformed||a.div[b.usermap]._mapdragged||("edit"==a.mode[b.usermap]?(this.createVertices(),f={event:"click",object:"mapcurve"},f.id=Number(this._id),window.console&&
console.log(JSON.stringify(f))):"normal"==a.mode[b.usermap]&&"undefined"!=typeof a.usermap[b.usermap].map.mapcurve[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mapcurve[this._id].link&&("undefined"==typeof a.usermap[b.usermap].map.mapcurve[this._id].link_target?location.href=a.usermap[b.usermap].map.mapcurve[this._id].link:window.open(a.usermap[b.usermap].map.mapcurve[this._id].link,a.usermap[b.usermap].map.mapcurve[this._id].link_target)))};a.touchdevices&&(e.ontouchstart=function(a){1==
a.touches.length&&(this._touch=!0,this._move=!1,this._posX=a.touches[0].clientX,this._posY=a.touches[0].clientY)},e.ontouchmove=function(a){1==a.touches.length?this._touch&&(10<Math.abs(a.touches[0].clientX-this._posX)||10<Math.abs(a.touches[0].clientY-this._posY))&&(this._move=!0):this._touch=!1},e.ontouchend=function(f){if(this._touch&&!this._move&&!a.div[b.usermap]._mapdragged){if("edit"==a.mode[b.usermap]){f={event:"click",object:"mapcurve"};f.id=this._id;window.console&&console.log(JSON.stringify(f));
return}"undefined"!=typeof a.usermap[b.usermap].map.mapcurve[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mapcurve[this._id].link&&("undefined"==typeof a.usermap[b.usermap].map.mapcurve[this._id].link_target?location.href=a.usermap[b.usermap].map.mapcurve[this._id].link:window.open(a.usermap[b.usermap].map.mapcurve[this._id].link,a.usermap[b.usermap].map.mapcurve[this._id].link_target));if("edit"==a.mode[b.usermap])return;0<a.infobox[b.usermap].length&&(document.getElementById("imap5_"+
b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)&&a.div[b.usermap].removeChild(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)),a.infobox[b.usermap].pop());"undefined"==typeof a.usermap[b.usermap].map.mapcurve[this._id]||"undefined"==typeof a.usermap[b.usermap].map.mapcurve[this._id].infobox||document.getElementById("imap5_"+b.usermap+"_infobox_mapcurve_"+this._id)||(f={},f.clientX=this._posX,
f.clientY=this._posY,f.obj="mapcurve",f.infobox=a.usermap[b.usermap].map.mapcurve[this._id].infobox,this.infobox=new B(b,this._id,f))}this._move=this._touch=!1});e.remove=function(){for(var f in this._mainvertices)this._mainvertices.hasOwnProperty(f)&&this._mainvertices[f].remove();a.g[b.usermap].removeChild(this);a.mapcurve[b.usermap][this._id]=null};e.drawMapCurve();return e},ca=function(b,c,g){var d=a.usermap[b.usermap].map.id,e=t("g");a.g[b.usermap].appendChild(e);e._options=g;e._id=c;e.setAttribute("id",
"imap5_"+b.usermap+"_maprect_"+c);e._points=g.points;e._movingpoints="";e._mainvertices=[];e.ishighlight=!1;e._show=!0;e.setOptions=function(a){this._options=a;this._points=a.points};e.hide=function(){this.style.visibility="hidden";this._show=!1};e.show=function(){this.style.visibility="visible";this._show=!0};e.toggleCategory=function(){"normal"==a.mode[b.usermap]?"undefined"!=typeof a.usermap[b.usermap].map.categorylegend&&a.usermap[b.usermap].map.categorylegend.enable?0!=this._options.categoryid&&
("undefined"!=typeof a.categorylegend[b.usermap]?-1!=a.categorylegend[b.usermap].visiblelist.indexOf(this._options.categoryid)?this.show():this.hide():this.show()):this.show():this.show()};e.createVertices=function(){null!=a.selectedVerticesObj[b.usermap]&&a.selectedVerticesObj[b.usermap]!=this&&a.selectedVerticesObj[b.usermap].deleteVertices();a.selectedVerticesObj[b.usermap]=this;for(var f in this._mainvertices)this._mainvertices.hasOwnProperty(f)&&this._mainvertices[f].remove();this._mainvertices.length=
0;var c=this._points.split(" "),h,l={};for(f=0;f<c.length;f++)h=c[f].split(","),l.lat=h[0],l.lng=h[1],l.type=0,l.removable=!1,this._mainvertices[f+1]=new N(b,f+1,this,l),l={}};e.deleteVertices=function(){for(var a in this._mainvertices)this._mainvertices.hasOwnProperty(a)&&this._mainvertices[a].remove();this._mainvertices.length=0};e.postPosChange=function(){this.createVertices();var a={event:"poschange",object:"maprect"};a.id=Number(this._id);a.points=this._points;window.console&&console.log(JSON.stringify(a))};
e.updateVertices=function(b,c,h){var l=this._points.split(" ");l[b-1]=k(c,a.precision)+","+k(h,a.precision);l[b-1].split(",");var d=l[(b-1+2)%4].split(",");l[(b-1+1)%4]=k(d[0],a.precision)+","+k(h,a.precision);l[(b-1+2)%4]=k(d[0],a.precision)+","+k(d[1],a.precision);l[(b-1+3)%4]=k(c,a.precision)+","+k(d[1],a.precision);for(var e="",e="",g=0;g<l.length;g++)""!=e&&(e+=" "),e=e+l[g].split(",")[0]+","+l[g].split(",")[1];this._points=this._options.points=e;l={};l.lat=d[0];l.lng=h;l.type=0;l.removable=
!1;this._mainvertices[(b-1+1)%4+1].setOptions(l);this._mainvertices[(b-1+1)%4+1].drawVerticesObj();l={};l.lat=c;l.lng=d[1];l.type=0;l.removable=!1;this._mainvertices[(b-1+3)%4+1].setOptions(l);this._mainvertices[(b-1+3)%4+1].drawVerticesObj();this.drawMapRect()};e.hideSubVertices=function(){};e.showSubVertices=function(){};e.drawMapRect=function(){var f=this.getElementsByTagName("polygon")[0];"undefined"!=typeof f&&this.removeChild(f);f=t("polygon");this.appendChild(f);f.setAttribute("fill",this._options.fill);
f.setAttribute("fill-opacity",this._options.fillOpacity);f.setAttribute("stroke",this._options.style.stroke);f.setAttribute("stroke-width",k(this._options.style.strokeWidth/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));if("undefined"!=typeof this._options.style.strokeDasharray&&"none"!==this._options.style.strokeDasharray){for(var c=this._options.style.strokeDasharray.split(","),h="",l=0;l<c.length;l++)""!=h&&(h+=","),h+=k(c[l]/a.zoom[b.usermap].currentzoom*
(a.map[d].precision/a.factor[b.usermap]),a.precision);f.setAttribute("stroke-dasharray",h)}var c=this._options.points.split(" "),h="",e,g;g=l="";if(1==c.length)l=c[0].split(","),g=""==this._movingpoints?l:this._movingpoints.split(","),h=h+k(a.map[d].precision/a.factor[b.usermap]*l[1],a.precision)+",",h=h+k(v(l[0])*(a.map[d].precision/a.factor[b.usermap]),a.precision)+" ",h=h+k(a.map[d].precision/a.factor[b.usermap]*g[1],a.precision)+",",h=h+k(v(l[0])*(a.map[d].precision/a.factor[b.usermap]),a.precision)+
" ",h=h+k(a.map[d].precision/a.factor[b.usermap]*g[1],a.precision)+",",h=h+k(v(g[0])*(a.map[d].precision/a.factor[b.usermap]),a.precision)+" ",h=h+k(a.map[d].precision/a.factor[b.usermap]*l[1],a.precision)+",",h+=k(v(g[0])*(a.map[d].precision/a.factor[b.usermap]),a.precision);else for(l=0;l<c.length;l++)""!=h&&(h+=" "),e=c[l].split(","),g=v(e[0])*(a.map[d].precision/a.factor[b.usermap]),e=a.map[d].precision/a.factor[b.usermap]*e[1],h=h+k(e,a.precision)+","+k(g,a.precision);f.setAttribute("points",
h);f.setAttribute("stroke-opacity",this._options.style.strokeOpacity);f.setAttribute("stroke-linejoin","round")};e.onclick=function(f){this._mapdragged||this._transformed||a.div[b.usermap]._mapdragged||("edit"==a.mode[b.usermap]?(this.createVertices(),f={event:"click",object:"maprect"},f.id=Number(this._id),window.console&&console.log(JSON.stringify(f))):"normal"==a.mode[b.usermap]&&"undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id].link&&
("undefined"==typeof a.usermap[b.usermap].map.maprect[this._id].link_target?location.href=a.usermap[b.usermap].map.maprect[this._id].link:window.open(a.usermap[b.usermap].map.maprect[this._id].link,a.usermap[b.usermap].map.maprect[this._id].link_target)))};a.touchdevices||(e.onmouseover=function(f){if("maprect"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="pointer";"edit"==a.mode[b.usermap]&&null==a.selectedOverlay[b.usermap]&&(x(b,f,"<strong>[Click]</strong> to select and <strong>[Drag]</strong> to change position"),
this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fillHighlight),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillHighlightOpacity));if(!a.touchdevices&&"normal"==a.mode[b.usermap]&&("undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id].link&&(this.style.cursor="pointer"),this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fillHighlight),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",
this._options.fillHighlightOpacity),"onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id].infobox&&!document.getElementById("imap5_"+b.usermap+"_infobox_maprect_"+this._id))){var c={};c.clientX=f.clientX;c.clientY=f.clientY;c.obj="maprect";c.infobox=a.usermap[b.usermap].map.maprect[this._id].infobox;this.infobox=new B(b,this._id,c)}});a.touchdevices||(e.onmouseout=function(f){if("maprect"==
a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="auto";"edit"==a.mode[b.usermap]&&(H(b),this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fill),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillOpacity));"normal"==a.mode[b.usermap]&&(this.style.cursor="auto",this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fill),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillOpacity),
"onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id].infobox&&(null==f.relatedTarget||f.relatedTarget.id!="imap5_"+b.usermap+"_infobox_maprect_"+this._id)&&document.getElementById("imap5_"+b.usermap+"_infobox_maprect_"+this._id)&&this.infobox.remove())});e.onmousedown=function(f){f.preventDefault&&f.preventDefault();"edit"==a.mode[b.usermap]&&(f.stopPropagation&&f.stopPropagation(),
this._mousedown=!0,this._mapdragged=!1,this._x=f.clientX,this._y=f.clientY,a.selectedOverlay[b.usermap]=this)};e.onmouseup=function(f){f.preventDefault&&f.preventDefault();if("edit"==a.mode[b.usermap])if(a.selectedOverlay[b.usermap]==this)f.stopPropagation&&f.stopPropagation(),a.selectedOverlay[b.usermap]=null,this.createVertices(),f={event:"poschange",object:"maprect"},f.id=Number(this._id),f.points=this._points,window.console&&console.log(JSON.stringify(f)),this._mousedown=!1;else if(null!=a.selectedOverlay[b.usermap])a.selectedOverlay[b.usermap].onmouseup(f)};
e.onmousemove=function(f){f.preventDefault&&f.preventDefault();if("edit"==a.mode[b.usermap])if(a.selectedOverlay[b.usermap]==this){if(this._mousedown&&(f.stopPropagation&&f.stopPropagation(),2<Math.abs(f.clientX-this._x)||2<Math.abs(f.clientY-this._y))){this._mapdragged=!0;var c=k((f.clientX-this._x)/a.zoom[b.usermap].currentzoom,a.precision),h=k((f.clientY-this._y)/a.zoom[b.usermap].currentzoom,a.precision),l=this._points.split(" "),d,e;for(e in l)l.hasOwnProperty(e)&&(d=l[e].split(","),l[e]=k(P(v(parseFloat(d[0]))-
h),a.precision)+","+k(parseFloat(d[1])+c,a.precision));c="";for(e=0;e<l.length;e++)""!=c&&(c+=" "),c=c+l[e].split(",")[0]+","+l[e].split(",")[1];this._points=this._options.points=c;this.deleteVertices();this.drawMapRect();this.createVertices();this._x=f.clientX;this._y=f.clientY}}else if(null!=a.selectedOverlay[b.usermap])a.selectedOverlay[b.usermap].onmousemove(f);"normal"==a.mode[b.usermap]&&(a.div[b.usermap]._mousedown?document.getElementById("imap5_"+b.usermap+"_infobox_maprect_"+this._id)&&this.infobox.hide():
document.getElementById("imap5_"+b.usermap+"_infobox_maprect_"+this._id)&&(this.infobox.reposition(f.clientX,f.clientY),this.infobox.show()))};a.touchdevices&&(e.ontouchstart=function(a){1==a.touches.length&&(this._touch=!0,this._move=!1,this._posX=a.touches[0].clientX,this._posY=a.touches[0].clientY)},e.ontouchmove=function(a){1==a.touches.length?this._touch&&(10<Math.abs(a.touches[0].clientX-this._posX)||10<Math.abs(a.touches[0].clientY-this._posY))&&(this._move=!0):this._touch=!1},e.ontouchend=
function(f){if(this._touch&&!this._move&&!a.div[b.usermap]._mapdragged){if("edit"==a.mode[b.usermap]){f={event:"click",object:"maprect"};f.id=this._id;window.console&&console.log(JSON.stringify(f));return}"undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.maprect[this._id].link&&("undefined"==typeof a.usermap[b.usermap].map.maprect[this._id].link_target?location.href=a.usermap[b.usermap].map.maprect[this._id].link:window.open(a.usermap[b.usermap].map.maprect[this._id].link,
a.usermap[b.usermap].map.maprect[this._id].link_target));if("edit"==a.mode[b.usermap])return;this.ishighlight?(this.ishighlight=!1,this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fill),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillOpacity)):(this.ishighlight=!0,this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fillHighlight),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillHighlightOpacity));
0<a.infobox[b.usermap].length&&(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)&&a.div[b.usermap].removeChild(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)),a.infobox[b.usermap].pop());"undefined"==typeof a.usermap[b.usermap].map.maprect[this._id]||"undefined"==typeof a.usermap[b.usermap].map.maprect[this._id].infobox||document.getElementById("imap5_"+b.usermap+
"_infobox_maprect_"+this._id)||(f={},f.clientX=this._posX,f.clientY=this._posY,f.obj="maprect",f.infobox=a.usermap[b.usermap].map.maprect[this._id].infobox,this.infobox=new B(b,this._id,f))}this._move=this._touch=!1});e.remove=function(){for(var f in this._mainvertices)this._mainvertices.hasOwnProperty(f)&&this._mainvertices[f].remove();a.g[b.usermap].removeChild(this);a.maprect[b.usermap][this._id]=null};e.drawMapRect();return e},da=function(b,c,g){var d=a.usermap[b.usermap].map.id,e=t("g");a.g[b.usermap].appendChild(e);
e._options=g;e._id=c;e.setAttribute("id","imap5_"+b.usermap+"_mappoly_"+c);e._points=g.points;e._movingpoints="";e._mainvertices=[];e._subvertices=[];e.ishighlight=!1;e._show=!0;e.updateVertices=function(b,c,h){var l=this._points.split(" ");l[b-1]=k(c,a.precision)+","+k(h,a.precision);b="";for(c=0;c<l.length;c++)""!=b&&(b+=" "),b=b+l[c].split(",")[0]+","+l[c].split(",")[1];this._points=this._options.points=b;this.drawMapPoly()};e.addVertices=function(b,c,h){for(var l=this._points.split(" "),d="",
e=0;e<l.length;e++)""!=d&&(d+=" "),e==b&&(d=d+k(c,a.precision)+","+k(h,a.precision)+" "),d=d+l[e].split(",")[0]+","+l[e].split(",")[1];b==l.length&&(""!=d&&(d+=" "),d=d+k(c,a.precision)+","+k(h,a.precision));this._points=this._options.points=d;this.drawMapPoly();this.postPosChange()};e.removeVertices=function(a){var b=this._points.split(" ");if(3<b.length){for(var c="",l=0;l<b.length;l++)l!=a-1&&(""!=c&&(c+=" "),c=c+b[l].split(",")[0]+","+b[l].split(",")[1]);this._points=this._options.points=c;this.drawMapPoly();
this.postPosChange()}};e.postPosChange=function(){this.createVertices();var a={event:"poschange",object:"mappoly"};a.id=Number(this._id);a.points=this._points;window.console&&console.log(JSON.stringify(a))};e.setPosition=function(f){this._points=a.usermap[b.usermap].map.mappoly[this._id].points=f.points;this.drawMapPoly()};e.getPosition=function(){var a={};a.points=this._points;return a};e.setOptions=function(a){this._options=a;this._points=a.points};e.addPoint=function(a,b){var c=this._options.points;
this._options.points=this._points=c+" "+a+","+b;this.drawMapPoly()};e.hide=function(){this.style.visibility="hidden";this._show=!1};e.show=function(){this.style.visibility="visible";this._show=!0};e.toggleCategory=function(){"normal"==a.mode[b.usermap]?"undefined"!=typeof a.usermap[b.usermap].map.categorylegend&&a.usermap[b.usermap].map.categorylegend.enable?0!=this._options.categoryid&&("undefined"!=typeof a.categorylegend[b.usermap]?-1!=a.categorylegend[b.usermap].visiblelist.indexOf(this._options.categoryid)?
this.show():this.hide():this.show()):this.show():this.show()};e.count=function(){return this._options.points.split(" ").length};e.drawMapPoly=function(){var f=this.getElementsByTagName("polygon")[0];"undefined"!=typeof f&&this.removeChild(f);f=this.getElementsByTagName("polyline")[0];"undefined"!=typeof f&&this.removeChild(f);f=1>=this.count()?t("polyline"):t("polygon");this.appendChild(f);f.setAttribute("fill",this._options.fill);f.setAttribute("fill-opacity",this._options.fillOpacity);f.setAttribute("stroke",
this._options.style.stroke);f.setAttribute("stroke-width",k(this._options.style.strokeWidth/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));if("undefined"!=typeof this._options.style.strokeDasharray&&"none"!==this._options.style.strokeDasharray){for(var c=this._options.style.strokeDasharray.split(","),h="",l=0;l<c.length;l++)""!=h&&(h+=","),h+=k(c[l]/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision);f.setAttribute("stroke-dasharray",
h)}for(var c=this._options.points.split(" "),h="",e,g,l=0;l<c.length;l++)""!=h&&(h+=" "),e=c[l].split(","),g=v(e[0])*(a.map[d].precision/a.factor[b.usermap]),e=a.map[d].precision/a.factor[b.usermap]*e[1],h=h+k(e,a.precision)+","+k(g,a.precision);""!=this._movingpoints&&(e=this._movingpoints.split(","),g=v(e[0])*(a.map[d].precision/a.factor[b.usermap]),e=a.map[d].precision/a.factor[b.usermap]*e[1],""!=h&&(h+=" "),h=h+k(e,a.precision)+","+k(g,a.precision));f.setAttribute("points",h);f.setAttribute("stroke-opacity",
this._options.style.strokeOpacity);f.setAttribute("stroke-linejoin","round")};a.touchdevices||(e.onmouseover=function(c){if("mappoly"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="pointer";"edit"==a.mode[b.usermap]&&null==a.selectedOverlay[b.usermap]&&(x(b,c,"<strong>[Click]</strong> to select and <strong>[Drag]</strong> to change position"),this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fillHighlight),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",
this._options.fillHighlightOpacity));if(!a.touchdevices&&"normal"==a.mode[b.usermap]&&("undefined"!=typeof a.usermap[b.usermap].map.mappoly[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mappoly[this._id].link&&(this.style.cursor="pointer"),this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fillHighlight),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillHighlightOpacity),"onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=
typeof a.usermap[b.usermap].map.mappoly[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mappoly[this._id].infobox&&!document.getElementById("imap5_"+b.usermap+"_infobox_mappoly_"+this._id))){var d={};d.clientX=c.clientX;d.clientY=c.clientY;d.obj="mappoly";d.infobox=a.usermap[b.usermap].map.mappoly[this._id].infobox;this.infobox=new B(b,this._id,d)}});a.touchdevices||(e.onmouseout=function(c){if("mappoly"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="auto";"edit"==a.mode[b.usermap]&&
(H(b),this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fill),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillOpacity));"normal"==a.mode[b.usermap]&&(this.style.cursor="auto",this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fill),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillOpacity),"onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=typeof a.usermap[b.usermap].map.mappoly[this._id]&&
"undefined"!=typeof a.usermap[b.usermap].map.mappoly[this._id].infobox&&(null==c.relatedTarget||c.relatedTarget.id!="imap5_"+b.usermap+"_infobox_mappoly_"+this._id)&&document.getElementById("imap5_"+b.usermap+"_infobox_mappoly_"+this._id)&&this.infobox.remove())});e.onmousedown=function(c){c.preventDefault&&c.preventDefault();"edit"==a.mode[b.usermap]&&(c.stopPropagation&&c.stopPropagation(),this._mousedown=!0,this._mapdragged=!1,this._x=c.clientX,this._y=c.clientY,a.selectedOverlay[b.usermap]=this)};
e.onmouseup=function(c){c.preventDefault&&c.preventDefault();if("edit"==a.mode[b.usermap])if(a.selectedOverlay[b.usermap]==this)c.stopPropagation&&c.stopPropagation(),a.selectedOverlay[b.usermap]=null,this.createVertices(),c={event:"poschange",object:"mappoly"},c.id=Number(this._id),c.points=this._points,window.console&&console.log(JSON.stringify(c)),this._mousedown=!1;else if(null!=a.selectedOverlay[b.usermap])a.selectedOverlay[b.usermap].onmouseup(c)};e.onmousemove=function(c){c.preventDefault&&
c.preventDefault();if("edit"==a.mode[b.usermap])if(a.selectedOverlay[b.usermap]==this){if(this._mousedown&&(c.stopPropagation&&c.stopPropagation(),2<Math.abs(c.clientX-this._x)||2<Math.abs(c.clientY-this._y))){this._mapdragged=!0;var d=k((c.clientX-this._x)/a.zoom[b.usermap].currentzoom,a.precision),h=k((c.clientY-this._y)/a.zoom[b.usermap].currentzoom,a.precision),l=this._points.split(" "),e,g;for(g in l)l.hasOwnProperty(g)&&(e=l[g].split(","),l[g]=k(P(v(parseFloat(e[0]))-h),a.precision)+","+k(parseFloat(e[1])+
d,a.precision));d="";for(g=0;g<l.length;g++)""!=d&&(d+=" "),d=d+l[g].split(",")[0]+","+l[g].split(",")[1];this._points=this._options.points=d;this.deleteVertices();this.drawMapPoly();this.createVertices();this._x=c.clientX;this._y=c.clientY}}else if(null!=a.selectedOverlay[b.usermap])a.selectedOverlay[b.usermap].onmousemove(c);"normal"==a.mode[b.usermap]&&(a.div[b.usermap]._mousedown?document.getElementById("imap5_"+b.usermap+"_infobox_mappoly_"+this._id)&&this.infobox.hide():document.getElementById("imap5_"+
b.usermap+"_infobox_mappoly_"+this._id)&&(this.infobox.reposition(c.clientX,c.clientY),this.infobox.show()))};e.createVertices=function(){null!=a.selectedVerticesObj[b.usermap]&&a.selectedVerticesObj[b.usermap]!=this&&a.selectedVerticesObj[b.usermap].deleteVertices();a.selectedVerticesObj[b.usermap]=this;for(var c in this._mainvertices)this._mainvertices.hasOwnProperty(c)&&this._mainvertices[c].remove();this._mainvertices.length=0;for(var d in this._subvertices)this._subvertices.hasOwnProperty(c)&&
this._subvertices[d].remove();this._subvertices.length=0;var h=this._points.split(" "),l={};for(c=0;c<h.length;c++)d=h[c].split(","),l.lat=d[0],l.lng=d[1],l.type=0,l.removable=!0,this._mainvertices[c+1]=new N(b,c+1,this,l),l={};var e,l={};for(d=0;d<h.length-1;d++)c=h[d].split(","),e=h[d+1].split(","),l.lat=k(P((v(c[0])+v(e[0]))/2),a.precision),l.lng=k((parseFloat(c[1])+parseFloat(e[1]))/2,a.precision),l.type=1,l.removable=!1,this._subvertices[d+1]=new N(b,d+1,this,l),l={};d=h.length-1;c=h[d].split(",");
e=h[0].split(",");l.lat=k(P((v(c[0])+v(e[0]))/2),a.precision);l.lng=k((parseFloat(c[1])+parseFloat(e[1]))/2,a.precision);l.type=1;l.removable=!1;this._subvertices[d+1]=new N(b,d+1,this,l)};e.deleteVertices=function(){for(var a in this._mainvertices)this._mainvertices.hasOwnProperty(a)&&this._mainvertices[a].remove();this._mainvertices.length=0;for(var b in this._subvertices)this._subvertices.hasOwnProperty(b)&&this._subvertices[b].remove();this._subvertices.length=0};e.hideSubVertices=function(){for(var a in this._subvertices)this._subvertices.hasOwnProperty(a)&&
this._subvertices[a].hide()};e.showSubVertices=function(){for(var a in this._subvertices)this._subvertices.hasOwnProperty(a)&&this._subvertices[a].show()};e.onclick=function(c){this._mapdragged||this._transformed||a.div[b.usermap]._mapdragged||("edit"==a.mode[b.usermap]?(this.createVertices(),c={event:"click",object:"mappoly"},c.id=Number(this._id),window.console&&console.log(JSON.stringify(c))):"normal"==a.mode[b.usermap]&&"undefined"!=typeof a.usermap[b.usermap].map.mappoly[this._id]&&"undefined"!=
typeof a.usermap[b.usermap].map.mappoly[this._id].link&&("undefined"==typeof a.usermap[b.usermap].map.mappoly[this._id].link_target?location.href=a.usermap[b.usermap].map.mappoly[this._id].link:window.open(a.usermap[b.usermap].map.mappoly[this._id].link,a.usermap[b.usermap].map.mappoly[this._id].link_target)))};a.touchdevices&&(e.ontouchstart=function(a){1==a.touches.length&&(this._touch=!0,this._move=!1,this._posX=a.touches[0].clientX,this._posY=a.touches[0].clientY)},e.ontouchmove=function(a){1==
a.touches.length?this._touch&&(10<Math.abs(a.touches[0].clientX-this._posX)||10<Math.abs(a.touches[0].clientY-this._posY))&&(this._move=!0):this._touch=!1},e.ontouchend=function(c){if(this._touch&&!this._move&&!a.div[b.usermap]._mapdragged){if("edit"==a.mode[b.usermap]){c={event:"click",object:"mappoly"};c.id=this._id;window.console&&console.log(JSON.stringify(c));return}"undefined"!=typeof a.usermap[b.usermap].map.mappoly[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mappoly[this._id].link&&
("undefined"==typeof a.usermap[b.usermap].map.mappoly[this._id].link_target?location.href=a.usermap[b.usermap].map.mappoly[this._id].link:window.open(a.usermap[b.usermap].map.mappoly[this._id].link,a.usermap[b.usermap].map.mappoly[this._id].link_target));if("edit"==a.mode[b.usermap])return;this.ishighlight?(this.ishighlight=!1,this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fill),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillOpacity)):
(this.ishighlight=!0,this.getElementsByTagName("polygon")[0].setAttribute("fill",this._options.fillHighlight),this.getElementsByTagName("polygon")[0].setAttribute("fill-opacity",this._options.fillHighlightOpacity));0<a.infobox[b.usermap].length&&(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)&&a.div[b.usermap].removeChild(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)),
a.infobox[b.usermap].pop());"undefined"==typeof a.usermap[b.usermap].map.mappoly[this._id]||"undefined"==typeof a.usermap[b.usermap].map.mappoly[this._id].infobox||document.getElementById("imap5_"+b.usermap+"_infobox_mappoly_"+this._id)||(c={},c.clientX=this._posX,c.clientY=this._posY,c.obj="mappoly",c.infobox=a.usermap[b.usermap].map.mappoly[this._id].infobox,this.infobox=new B(b,this._id,c))}this._move=this._touch=!1});e.remove=function(){for(var c in this._mainvertices)this._mainvertices.hasOwnProperty(c)&&
this._mainvertices[c].remove();for(c in this._subvertices)this._subvertices.hasOwnProperty(c)&&this._subvertices[c].remove();a.g[b.usermap].removeChild(this);a.mappoly[b.usermap][this._id]=null};e.drawMapPoly();return e},ea=function(b,c,g){var d=a.usermap[b.usermap].map.id,e=t("g");a.g[b.usermap].appendChild(e);e._options=g;e._id=c;e.setAttribute("id","imap5_"+b.usermap+"_mappath_"+c);e._show=!0;e._points=g.points;e._movingpoints="";e._mainvertices=[];e._subvertices=[];e.updateVertices=function(b,
c,h){var d=this._points.split(" ");d[b-1]=k(c,a.precision)+","+k(h,a.precision);b="";for(c=0;c<d.length;c++)""!=b&&(b+=" "),b=b+d[c].split(",")[0]+","+d[c].split(",")[1];this._points=this._options.points=b;this.drawMapPath()};e.addVertices=function(b,c,h){for(var d=this._points.split(" "),e="",g=0;g<d.length;g++)""!=e&&(e+=" "),g==b&&(e=e+k(c,a.precision)+","+k(h,a.precision)+" "),e=e+d[g].split(",")[0]+","+d[g].split(",")[1];this._points=this._options.points=e;this.drawMapPath();this.postPosChange()};
e.removeVertices=function(a){var b=this._points.split(" ");if(2<b.length){for(var c="",d=0;d<b.length;d++)d!=a-1&&(""!=c&&(c+=" "),c=c+b[d].split(",")[0]+","+b[d].split(",")[1]);this._points=this._options.points=c;this.drawMapPath();this.postPosChange()}};e.postPosChange=function(){this.createVertices();var a={event:"poschange",object:"mappath"};a.id=Number(this._id);a.points=this._points;window.console&&console.log(JSON.stringify(a))};e.setPosition=function(c){this._points=a.usermap[b.usermap].map.mappath[this._id].points=
c.points;this.drawMapPath()};e.getPosition=function(){var a={};a.points=this._points;return a};e.setOptions=function(a){this._options=a};e.addPoint=function(a,b){var c=this._options.points;this._options.points=this._points=c+" "+a+","+b;this.drawMapPath()};e.hide=function(){this.style.visibility="hidden";this._show=!1};e.show=function(){this.style.visibility="visible";this._show=!0};e.toggleCategory=function(){"normal"==a.mode[b.usermap]?"undefined"!=typeof a.usermap[b.usermap].map.categorylegend&&
a.usermap[b.usermap].map.categorylegend.enable?0!=this._options.categoryid&&("undefined"!=typeof a.categorylegend[b.usermap]?-1!=a.categorylegend[b.usermap].visiblelist.indexOf(this._options.categoryid)?this.show():this.hide():this.show()):this.show():this.show()};e.drawMapPath=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);var c,e,h,l,g,q,r,p;g=t("polyline");this.appendChild(g);q=t("polyline");this.appendChild(q);q.setAttribute("fill","none");
q.setAttribute("stroke",this._options.style.stroke);q.setAttribute("stroke-width",k(this._options.style.strokeWidth/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));g.setAttribute("fill","none");g.setAttribute("stroke","#FFFFFF");g.setAttribute("stroke-width",k(4/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));if("undefined"!=typeof this._options.style.strokeDasharray&&"none"!==this._options.style.strokeDasharray){c=this._options.style.strokeDasharray.split(",");
e="";for(r=0;r<c.length;r++)""!=e&&(e+=","),e+=k(c[r]/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision);q.setAttribute("stroke-dasharray",e);g.setAttribute("stroke-dasharray",e)}c=this._options.points.split(" ");e="";for(r=0;r<c.length;r++)""!=e&&(e+=" "),l=c[r].split(","),h=v(l[0])*(a.map[d].precision/a.factor[b.usermap]),l=a.map[d].precision/a.factor[b.usermap]*l[1],e=e+k(l,a.precision)+","+k(h,a.precision);""!=this._movingpoints&&(l=this._movingpoints.split(","),
h=v(l[0])*(a.map[d].precision/a.factor[b.usermap]),l=a.map[d].precision/a.factor[b.usermap]*l[1],""!=e&&(e+=" "),e=e+k(l,a.precision)+","+k(h,a.precision));q.setAttribute("points",e);q.setAttribute("stroke-opacity",this._options.style.strokeOpacity);q.setAttribute("stroke-linejoin","round");g.setAttribute("points",e);g.setAttribute("stroke-opacity",.01);g.setAttribute("stroke-linejoin","round");p=e.split(" ");var n=p.length;if(1<n){c=parseFloat(p[0].split(",")[0]);e=parseFloat(p[0].split(",")[1]);
h=parseFloat(p[1].split(",")[0]);l=parseFloat(p[1].split(",")[1]);g=parseFloat(p[n-2].split(",")[0]);q=parseFloat(p[n-2].split(",")[1]);r=parseFloat(p[n-1].split(",")[0]);p=parseFloat(p[n-1].split(",")[1]);switch("undefined"==typeof this._options.style.arrowStartType?0:this._options.style.arrowStartType){case 1:var n=parseInt(this._options.style.strokeWidth)+4,u=t("polygon");this.appendChild(u);u.setAttribute("fill",this._options.style.stroke);u.setAttribute("fill-opacity",this._options.style.strokeOpacity);
u.setAttribute("stroke",this._options.style.stroke);u.setAttribute("stroke-width",0);u.setAttribute("points",V(c,e,k(n/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision),M(c,e,h,l,0)));break;case 2:n=parseInt(this._options.style.strokeWidth)+2;u=t("path");this.appendChild(u);u.setAttribute("fill","none");u.setAttribute("stroke",this._options.style.stroke);u.setAttribute("stroke-opacity",this._options.style.strokeOpacity);u.setAttribute("stroke-width",k(parseInt(this._options.style.strokeWidth)/
a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));u.setAttribute("d",W(c,e,k(n/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision),M(c,e,h,l,0)));u.setAttribute("stroke-linejoin","round");u.setAttribute("stroke-linecap","round");break;case 3:n=parseInt(this._options.style.strokeWidth)+2,u=t("circle"),this.appendChild(u),u.setAttribute("cx",c),u.setAttribute("cy",e),u.setAttribute("r",k(n/a.zoom[b.usermap].currentzoom*(a.map[d].precision/
a.factor[b.usermap]),a.precision)),u.setAttribute("stroke","#EEEEEE"),u.setAttribute("stroke-width",0),u.setAttribute("fill",this._options.style.stroke),u.setAttribute("fill-opacity",this._options.style.strokeOpacity)}switch("undefined"==typeof this._options.style.arrowEndType?0:this._options.style.arrowEndType){case 1:n=parseInt(this._options.style.strokeWidth)+4;c=t("polygon");this.appendChild(c);c.setAttribute("fill",this._options.style.stroke);c.setAttribute("fill-opacity",this._options.style.strokeOpacity);
c.setAttribute("stroke",this._options.style.stroke);c.setAttribute("stroke-width",0);c.setAttribute("points",V(r,p,k(n/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision),M(g,q,r,p,1)));break;case 2:n=parseInt(this._options.style.strokeWidth)+2;c=t("path");this.appendChild(c);c.setAttribute("fill","none");c.setAttribute("stroke",this._options.style.stroke);c.setAttribute("stroke-opacity",this._options.style.strokeOpacity);c.setAttribute("stroke-width",k(parseInt(this._options.style.strokeWidth)/
a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision));c.setAttribute("d",W(r,p,k(n/a.zoom[b.usermap].currentzoom*(a.map[d].precision/a.factor[b.usermap]),a.precision),M(g,q,r,p,1)));c.setAttribute("stroke-linejoin","round");c.setAttribute("stroke-linecap","round");break;case 3:n=parseInt(this._options.style.strokeWidth)+2,c=t("circle"),this.appendChild(c),c.setAttribute("cx",r),c.setAttribute("cy",p),c.setAttribute("r",k(n/a.zoom[b.usermap].currentzoom*(a.map[d].precision/
a.factor[b.usermap]),a.precision)),c.setAttribute("stroke","#EEEEEE"),c.setAttribute("stroke-width",0),c.setAttribute("fill",this._options.style.stroke),c.setAttribute("fill-opacity",this._options.style.strokeOpacity)}}};e.onmouseover=function(c){if("mappath"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="pointer";"edit"==a.mode[b.usermap]&&x(b,c,"Click to select");if(!a.touchdevices&&"normal"==a.mode[b.usermap]&&("undefined"!=typeof a.usermap[b.usermap].map.mappath[this._id]&&"undefined"!=
typeof a.usermap[b.usermap].map.mappath[this._id].link&&(this.style.cursor="pointer"),"onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=typeof a.usermap[b.usermap].map.mappath[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mappath[this._id].infobox&&!document.getElementById("imap5_"+b.usermap+"_infobox_mappath_"+this._id))){var d={};d.clientX=c.clientX;d.clientY=c.clientY;d.obj="mappath";d.infobox=a.usermap[b.usermap].map.mappath[this._id].infobox;this.infobox=new B(b,this._id,
d)}};e.onmouseout=function(c){if("mappath"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="auto";"edit"==a.mode[b.usermap]&&H(b);"normal"==a.mode[b.usermap]&&(this.style.cursor="auto","onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=typeof a.usermap[b.usermap].map.mappath[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mappath[this._id].infobox&&(null==c.relatedTarget||c.relatedTarget.id!="imap5_"+b.usermap+"_infobox_mappath_"+this._id)&&document.getElementById("imap5_"+
b.usermap+"_infobox_mappath_"+this._id)&&this.infobox.remove())};e.onmousemove=function(c){c.preventDefault&&c.preventDefault();"normal"==a.mode[b.usermap]&&(a.div[b.usermap]._mousedown?document.getElementById("imap5_"+b.usermap+"_infobox_mappath_"+this._id)&&this.infobox.hide():document.getElementById("imap5_"+b.usermap+"_infobox_mappath_"+this._id)&&(this.infobox.reposition(c.clientX,c.clientY),this.infobox.show()))};e.createVertices=function(){null!=a.selectedVerticesObj[b.usermap]&&a.selectedVerticesObj[b.usermap]!=
this&&a.selectedVerticesObj[b.usermap].deleteVertices();a.selectedVerticesObj[b.usermap]=this;for(var c in this._mainvertices)this._mainvertices.hasOwnProperty(c)&&this._mainvertices[c].remove();this._mainvertices.length=0;for(var d in this._subvertices)this._subvertices.hasOwnProperty(d)&&this._subvertices[d].remove();this._subvertices.length=0;var h=this._points.split(" "),l={};for(c=0;c<h.length;c++)d=h[c].split(","),l.lat=d[0],l.lng=d[1],l.type=0,l.removable=!0,this._mainvertices[c+1]=new N(b,
c+1,this,l),l={};var e,l={};for(d=0;d<h.length-1;d++)c=h[d].split(","),e=h[d+1].split(","),l.lat=k(P((v(c[0])+v(e[0]))/2),a.precision),l.lng=k((parseFloat(c[1])+parseFloat(e[1]))/2,a.precision),l.type=1,l.removable=!1,this._subvertices[d+1]=new N(b,d+1,this,l),l={}};e.deleteVertices=function(){for(var a in this._mainvertices)this._mainvertices.hasOwnProperty(a)&&this._mainvertices[a].remove();this._mainvertices.length=0;for(var b in this._subvertices)this._subvertices.hasOwnProperty(b)&&this._subvertices[b].remove();
this._subvertices.length=0};e.hideSubVertices=function(){for(var a in this._subvertices)this._subvertices.hasOwnProperty(a)&&this._subvertices[a].hide()};e.showSubVertices=function(){for(var a in this._subvertices)this._subvertices.hasOwnProperty(a)&&this._subvertices[a].show()};e.onclick=function(c){this._mapdragged||this._transformed||a.div[b.usermap]._mapdragged||("edit"==a.mode[b.usermap]?(this.createVertices(),c={event:"click",object:"mappath"},c.id=Number(this._id),window.console&&console.log(JSON.stringify(c))):
"normal"==a.mode[b.usermap]&&"undefined"!=typeof a.usermap[b.usermap].map.mappath[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.mappath[this._id].link&&("undefined"==typeof a.usermap[b.usermap].map.mappath[this._id].link_target?location.href=a.usermap[b.usermap].map.mappath[this._id].link:window.open(a.usermap[b.usermap].map.mappath[this._id].link,a.usermap[b.usermap].map.mappath[this._id].link_target)))};a.touchdevices&&(e.ontouchstart=function(a){1==a.touches.length&&(this._touch=!0,this._move=
!1,this._posX=a.touches[0].clientX,this._posY=a.touches[0].clientY)},e.ontouchmove=function(a){1==a.touches.length?this._touch&&(10<Math.abs(a.touches[0].clientX-this._posX)||10<Math.abs(a.touches[0].clientY-this._posY))&&(this._move=!0):this._touch=!1},e.ontouchend=function(c){if(this._touch&&!this._move&&!a.div[b.usermap]._mapdragged){if("edit"==a.mode[b.usermap]){c={event:"click",object:"mappath"};c.id=this._id;window.console&&console.log(JSON.stringify(c));return}"undefined"!=typeof a.usermap[b.usermap].map.mappath[this._id]&&
"undefined"!=typeof a.usermap[b.usermap].map.mappath[this._id].link&&("undefined"==typeof a.usermap[b.usermap].map.mappath[this._id].link_target?location.href=a.usermap[b.usermap].map.mappath[this._id].link:window.open(a.usermap[b.usermap].map.mappath[this._id].link,a.usermap[b.usermap].map.mappath[this._id].link_target));if("edit"==a.mode[b.usermap])return;0<a.infobox[b.usermap].length&&(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)&&
a.div[b.usermap].removeChild(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)),a.infobox[b.usermap].pop());"undefined"==typeof a.usermap[b.usermap].map.mappath[this._id]||"undefined"==typeof a.usermap[b.usermap].map.mappath[this._id].infobox||document.getElementById("imap5_"+b.usermap+"_infobox_mappath_"+this._id)||(c={},c.clientX=this._posX,c.clientY=this._posY,c.obj="mappath",c.infobox=a.usermap[b.usermap].map.mappath[this._id].infobox,
this.infobox=new B(b,this._id,c))}this._move=this._touch=!1});e.remove=function(){for(var c in this._mainvertices)this._mainvertices.hasOwnProperty(c)&&this._mainvertices[c].remove();for(c in this._subvertices)this._subvertices.hasOwnProperty(c)&&this._subvertices[c].remove();a.g[b.usermap].removeChild(this);a.mappath[b.usermap][this._id]=null};e.drawMapPath();return e},ra=function(b,c,g){var d=a.usermap[b.usermap].map.id,e=t("g");a.g[b.usermap].appendChild(e);e._options=g;e._id=c;e.setAttribute("id",
"imap5_"+b.usermap+"_maplabel_"+c);e._lat=g.lat;e._lng=g.lng;e._dx=a.map[d].precision/a.factor[b.usermap]*e._lng;e._dy=v(e._lat)*(a.map[d].precision/a.factor[b.usermap]);e._show=!0;e.setPosition=function(c){this._lat=a.usermap[b.usermap].map.maplabel[this._id].lat=c.lat;this._lng=a.usermap[b.usermap].map.maplabel[this._id].lng=c.lng;this._dy=v(this._lat)*(a.map[d].precision/a.factor[b.usermap]);this._dx=a.map[d].precision/a.factor[b.usermap]*this._lng;e.setAttribute("transform","translate("+k(this._dx,
a.precision)+","+k(this._dy,a.precision)+") scale("+k(a.map[d].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};e.getPosition=function(){var a={};a.lat=this._lat;a.lng=this._lng;return a};e.setOptions=function(a){this._options=a};e.setLabel=function(a){this._options.label=a;this.drawMapLabel()};e.hide=function(){this.style.visibility="hidden";this._show=!1};e.show=function(){this.style.visibility="visible";this._show=!0};e.toggleCategory=function(){"normal"==a.mode[b.usermap]?
"undefined"!=typeof a.usermap[b.usermap].map.categorylegend&&a.usermap[b.usermap].map.categorylegend.enable?0!=this._options.categoryid&&("undefined"!=typeof a.categorylegend[b.usermap]?-1!=a.categorylegend[b.usermap].visiblelist.indexOf(this._options.categoryid)?this.show():this.hide():this.show()):this.show():this.show()};e.drawMapLabel=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);if(""!=this._options.label.text){var c=t("text");this.appendChild(c);
var e=t("text");this.appendChild(e);var h=document.createTextNode(this._options.label.text);e.appendChild(h);e.setAttribute("style","stroke-width:0");e.style.strokeOpacity=0;e.style.fontFamily=this._options.label.style.fontFamily;e.style.fill=this._options.label.style.fontColor;e.style.fontSize=this._options.label.style.fontSize;e.style.fontStyle=this._options.label.style.fontStyle;e.style.fontWeight=this._options.label.style.fontWeight;"normal"==a.mode[b.usermap]&&(e.style.pointerEvents="none");
h=0+parseInt(e.style.fontSize)/2-(e.getBBox().height+e.getBBox().y)/2;e.setAttribute("x",0);e.setAttribute("y",h);e.setAttribute("transform","scale(1,-1)");e.setAttribute("text-anchor","middle");e=document.createTextNode(this._options.label.text);c.appendChild(e);c.setAttribute("style","stroke-width:0");c.style.strokeOpacity=0;c.style.fontFamily=this._options.label.style.fontFamily;c.style.fill="undefined"==typeof this._options.label.style.shadowColor?"#ffffff":this._options.label.style.shadowColor;
c.style.fontSize=this._options.label.style.fontSize;c.style.fontStyle=this._options.label.style.fontStyle;c.style.fontWeight=this._options.label.style.fontWeight;c.style.pointerEvents="none";c.setAttribute("x",1);c.setAttribute("y",h+1);c.setAttribute("transform","scale(1,-1)");c.setAttribute("text-anchor","middle");c.style.fillOpacity="undefined"==typeof this._options.label.style.shadowOpacity?.7:this._options.label.style.shadowOpacity}c=180/Math.PI*Math.log(Math.tan(Math.PI/4+Math.PI*this._options.lat/
360));e=this._options.lng;this._lat=a.map[d].precision/a.factor[b.usermap]*c;this._lng=a.map[d].precision/a.factor[b.usermap]*e;this.setAttribute("transform","translate("+k(a.map[d].precision/a.factor[b.usermap]*e,a.precision)+","+k(a.map[d].precision/a.factor[b.usermap]*c,a.precision)+") scale("+k(a.map[d].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};e.onmouseover=function(c){if("maplabel"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="pointer";
"edit"==a.mode[b.usermap]&&null==a.selectedOverlay[b.usermap]&&x(b,c,"<strong>[Click]</strong> to select or <strong>[Drag]</strong> to change position")};e.onmouseout=function(c){if("maplabel"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="auto";"edit"==a.mode[b.usermap]&&H(b);"normal"==a.mode[b.usermap]&&(this.style.cursor="auto")};e.onmousedown=function(c){c.preventDefault&&c.preventDefault();"edit"==a.mode[b.usermap]&&(c.stopPropagation&&c.stopPropagation(),this._mousedown=!0,
this._mapdragged=!1,this._x=c.clientX,this._y=c.clientY,a.selectedOverlay[b.usermap]=this)};e.onmousemove=function(c){c.preventDefault&&c.preventDefault();if("edit"==a.mode[b.usermap])if(a.selectedOverlay[b.usermap]==this){if(c.stopPropagation&&c.stopPropagation(),this._mousedown&&(2<Math.abs(c.clientX-this._x)||2<Math.abs(c.clientY-this._y))){this._mapdragged=!0;this._x=c.clientX;this._y=c.clientY;var e=a.svgcoord[b.usermap];e.x=c.clientX;e.y=c.clientY;e=w(e,a.g[b.usermap]);e.x/=a.map[d].precision/
a.factor[b.usermap];e.y/=a.map[d].precision/a.factor[b.usermap];c=e.x;var h=360*(Math.atan(Math.pow(Math.E,e.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI;O(h,c)||(this._lat=a.map[d].precision/a.factor[b.usermap]*e.y,this._lng=a.map[d].precision/a.factor[b.usermap]*e.x,this.setAttribute("transform","translate("+k(this._lng,a.precision)+","+k(this._lat,a.precision)+") scale("+k(a.map[d].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")"))}}else if(null!=a.selectedOverlay[b.usermap])a.selectedOverlay[b.usermap].onmousemove(c)};
e.onmouseup=function(c){c.preventDefault&&c.preventDefault();if("edit"==a.mode[b.usermap])if(a.selectedOverlay[b.usermap]==this)c.stopPropagation&&c.stopPropagation(),a.selectedOverlay[b.usermap]=null,c={event:"poschange",object:"maplabel"},c.id=Number(this._id),c.lat=k(360*(Math.atan(Math.pow(Math.E,this._lat/(a.map[d].precision/a.factor[b.usermap])*Math.PI/180))-Math.PI/4)/Math.PI,a.precision),c.lng=k(this._lng/(a.map[d].precision/a.factor[b.usermap]),a.precision),window.console&&console.log(JSON.stringify(c)),
this._mousedown=!1;else if(null!=a.selectedOverlay[b.usermap])a.selectedOverlay[b.usermap].onmouseup(c)};e.onclick=function(c){this._mapdragged||this._transformed||"edit"!=a.mode[b.usermap]||(null!=a.selectedVerticesObj[b.usermap]&&a.selectedVerticesObj[b.usermap]!=this&&a.selectedVerticesObj[b.usermap].deleteVertices(),c={event:"click",object:"maplabel"},c.id=Number(this._id),window.console&&console.log(JSON.stringify(c)))};a.touchdevices&&(e.ontouchstart=function(a){1==a.touches.length&&(this._touch=
!0,this._move=!1,this._posX=a.touches[0].clientX,this._posY=a.touches[0].clientY)},e.ontouchmove=function(a){1==a.touches.length?this._touch&&(10<Math.abs(a.touches[0].clientX-this._posX)||10<Math.abs(a.touches[0].clientY-this._posY))&&(this._move=!0):this._touch=!1},e.ontouchend=function(c){!this._touch||this._move||a.div[b.usermap]._mapdragged||"edit"!=a.mode[b.usermap]?this._move=this._touch=!1:(c={event:"click",object:"maplabel"},c.id=this._id,window.console&&console.log(JSON.stringify(c)))});
e.remove=function(){a.g[b.usermap].removeChild(this);a.maplabel[b.usermap][this._id]=null};e.drawMapLabel();return e},sa=function(b,c,g){var d=a.usermap[b.usermap].map.id,e=t("g");a.g[b.usermap].appendChild(e);e._options=g;e._id=c;e.setAttribute("id","imap5_"+b.usermap+"_marker_"+c);e._lat=g.lat;e._lng=g.lng;e._dx=a.map[d].precision/a.factor[b.usermap]*e._lng;e._dy=v(e._lat)*(a.map[d].precision/a.factor[b.usermap]);e._show=!0;e.setPosition=function(c){this._lat=a.usermap[b.usermap].map.marker[this._id].lat=
c.lat;this._lng=a.usermap[b.usermap].map.marker[this._id].lng=c.lng;this._dy=v(this._lat)*(a.map[d].precision/a.factor[b.usermap]);this._dx=a.map[d].precision/a.factor[b.usermap]*this._lng;e.setAttribute("transform","translate("+k(this._dx,a.precision)+","+k(this._dy,a.precision)+") scale("+k(a.map[d].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};e.getPosition=function(){var a={};a.lat=this._lat;a.lng=this._lng;return a};e.setIcon=function(a){this._options.icon=a;
this.drawMarker()};e.setOptions=function(a){this._options=a};e.setLabel=function(a){this._options.label=a;this.drawMarker()};e.hide=function(){this.style.visibility="hidden";this._show=!1};e.show=function(){this.style.visibility="visible";this._show=!0};e.toggleCategory=function(){"normal"==a.mode[b.usermap]?"undefined"!=typeof a.usermap[b.usermap].map.categorylegend&&a.usermap[b.usermap].map.categorylegend.enable?0!=this._options.categoryid&&("undefined"!=typeof a.categorylegend[b.usermap]?-1!=a.categorylegend[b.usermap].visiblelist.indexOf(this._options.categoryid)?
this.show():this.hide():this.show()):this.show():this.show()};e.drawMarker=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);var c=t("g"),e=t("image");c.appendChild(e);this.appendChild(c);"local"==this._options.icon.type?e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.base[b.usermap]+this._options.icon.path):e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this._options.icon.path);e.setAttribute("x",this._options.icon.anchorx);
e.setAttribute("y",this._options.icon.anchory);e.setAttribute("width",this._options.icon.width);e.setAttribute("height",this._options.icon.height);c.setAttribute("transform","scale(1,-1)");if(""!=this._options.label.text){e=t("text");this.appendChild(e);var h=t("text");this.appendChild(h);var l=document.createTextNode(this._options.label.text);h.appendChild(l);h.setAttribute("style","stroke-width:0;pointer-events:none");h.style.strokeOpacity=0;h.style.fontFamily=this._options.label.style.fontFamily;
h.style.fill=this._options.label.style.fontColor;h.style.fontSize=this._options.label.style.fontSize;h.style.fontStyle="undefined"!==typeof this._options.label.style.fontStyle?this._options.label.style.fontStyle:"normal";h.style.fontWeight="undefined"!==typeof this._options.label.style.fontWeight?this._options.label.style.fontWeight:"normal";var l="middle",g=0,q=0;switch(this._options.label.position){case "right":l="start";g=c.getBBox().width/2+parseInt(this._options.label.offsetX);q=parseInt(h.style.fontSize)/
2-(h.getBBox().height+h.getBBox().y)/2+parseInt(this._options.label.offsetY);break;case "top":l="middle";g=0+parseInt(this._options.label.offsetX);q=-c.getBBox().height/2-(h.getBBox().height+h.getBBox().y)/2+parseInt(this._options.label.offsetY);break;case "left":l="end";g=c.getBBox().x+parseInt(this._options.label.offsetX);q=parseInt(h.style.fontSize)/2-(h.getBBox().height+h.getBBox().y)/2+parseInt(this._options.label.offsetY);break;case "bottom":l="middle";g=0+parseInt(this._options.label.offsetX);
q=c.getBBox().height/2+parseInt(h.style.fontSize)-(h.getBBox().height+h.getBBox().y)/2+parseInt(this._options.label.offsetY);break;case "center":l="middle",g=0+parseInt(this._options.label.offsetX),q=parseInt(h.style.fontSize)/2-(h.getBBox().height+h.getBBox().y)/2+parseInt(this._options.label.offsetY)}h.setAttribute("x",g);h.setAttribute("y",q);h.setAttribute("transform","scale(1,-1)");h.setAttribute("text-anchor",l);c=document.createTextNode(this._options.label.text);e.appendChild(c);e.setAttribute("style",
"stroke-width:0;pointer-events:none");e.style.strokeOpacity=0;e.style.fontFamily=this._options.label.style.fontFamily;e.style.fill="undefined"==typeof this._options.label.style.shadowColor?"#ffffff":this._options.label.style.shadowColor;e.style.fontSize=this._options.label.style.fontSize;e.style.fontStyle="undefined"!==typeof this._options.label.style.fontStyle?this._options.label.style.fontStyle:"normal";e.style.fontWeight="undefined"!==typeof this._options.label.style.fontWeight?this._options.label.style.fontWeight:
"normal";e.setAttribute("x",g+1);e.setAttribute("y",q+1);e.setAttribute("transform","scale(1,-1)");e.setAttribute("text-anchor",l);e.style.fillOpacity="undefined"==typeof this._options.label.style.shadowOpacity?.7:this._options.label.style.shadowOpacity}c=180/Math.PI*Math.log(Math.tan(Math.PI/4+Math.PI*this._options.lat/360));e=this._options.lng;this._lat=a.map[d].precision/a.factor[b.usermap]*c;this._lng=a.map[d].precision/a.factor[b.usermap]*e;this.setAttribute("transform","translate("+k(a.map[d].precision/
a.factor[b.usermap]*e,a.precision)+","+k(a.map[d].precision/a.factor[b.usermap]*c,a.precision)+") scale("+k(a.map[d].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")")};e.onmouseover=function(c){if("marker"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="pointer";"edit"==a.mode[b.usermap]&&null==a.selectedOverlay[b.usermap]&&x(b,c,"<strong>[Click]</strong> to select or <strong>[Drag]</strong> to change position");if(!a.touchdevices&&"normal"==a.mode[b.usermap]&&
("undefined"!=typeof a.usermap[b.usermap].map.marker[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.marker[this._id].link&&(this.style.cursor="pointer"),"onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=typeof a.usermap[b.usermap].map.marker[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.marker[this._id].infobox&&!document.getElementById("imap5_"+b.usermap+"_infobox_marker_"+this._id))){var e={};e.clientX=c.clientX;e.clientY=c.clientY;e.obj="marker";e.infobox=a.usermap[b.usermap].map.marker[this._id].infobox;
this.infobox=new B(b,this._id,e)}};e.onmouseout=function(c){if("marker"==a.mode[b.usermap]||"edit"==a.mode[b.usermap])this.style.cursor="auto";"edit"==a.mode[b.usermap]&&H(b);"normal"==a.mode[b.usermap]&&(this.style.cursor="auto","onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=typeof a.usermap[b.usermap].map.marker[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.marker[this._id].infobox&&(null==c.relatedTarget||c.relatedTarget.id!="imap5_"+b.usermap+"_infobox_marker_"+this._id)&&
document.getElementById("imap5_"+b.usermap+"_infobox_marker_"+this._id)&&this.infobox.remove())};e.onmousedown=function(c){c.preventDefault&&c.preventDefault();"edit"==a.mode[b.usermap]&&(c.stopPropagation&&c.stopPropagation(),this._mousedown=!0,this._mapdragged=!1,this._x=c.clientX,this._y=c.clientY,a.selectedOverlay[b.usermap]=this)};e.onmousemove=function(c){c.preventDefault&&c.preventDefault();if("edit"==a.mode[b.usermap])if(a.selectedOverlay[b.usermap]==this){if(c.stopPropagation&&c.stopPropagation(),
this._mousedown&&(2<Math.abs(c.clientX-this._x)||2<Math.abs(c.clientY-this._y))){this._mapdragged=!0;this._x=c.clientX;this._y=c.clientY;var e=a.svgcoord[b.usermap];e.x=c.clientX;e.y=c.clientY;e=w(e,a.g[b.usermap]);e.x/=a.map[d].precision/a.factor[b.usermap];e.y/=a.map[d].precision/a.factor[b.usermap];var h=e.x,l=360*(Math.atan(Math.pow(Math.E,e.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI;O(l,h)||(this._lat=a.map[d].precision/a.factor[b.usermap]*e.y,this._lng=a.map[d].precision/a.factor[b.usermap]*
e.x,this.setAttribute("transform","translate("+k(this._lng,a.precision)+","+k(this._lat,a.precision)+") scale("+k(a.map[d].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")"))}}else if(null!=a.selectedOverlay[b.usermap])a.selectedOverlay[b.usermap].onmousemove(c);"normal"==a.mode[b.usermap]&&(a.div[b.usermap]._mousedown?document.getElementById("imap5_"+b.usermap+"_infobox_marker_"+this._id)&&this.infobox.hide():document.getElementById("imap5_"+b.usermap+"_infobox_marker_"+
this._id)&&(this.infobox.reposition(c.clientX,c.clientY),this.infobox.show()))};e.onmouseup=function(c){c.preventDefault&&c.preventDefault();if("edit"==a.mode[b.usermap])if(a.selectedOverlay[b.usermap]==this)c.stopPropagation&&c.stopPropagation(),a.selectedOverlay[b.usermap]=null,c={event:"poschange",object:"marker"},c.id=Number(this._id),c.lat=k(360*(Math.atan(Math.pow(Math.E,this._lat/(a.map[d].precision/a.factor[b.usermap])*Math.PI/180))-Math.PI/4)/Math.PI,a.precision),c.lng=k(this._lng/(a.map[d].precision/
a.factor[b.usermap]),a.precision),window.console&&console.log(JSON.stringify(c)),this._mousedown=!1;else if(null!=a.selectedOverlay[b.usermap])a.selectedOverlay[b.usermap].onmouseup(c)};e.onclick=function(c){this._mapdragged||this._transformed||a.div[b.usermap]._mapdragged||("edit"==a.mode[b.usermap]?(null!=a.selectedVerticesObj[b.usermap]&&a.selectedVerticesObj[b.usermap]!=this&&a.selectedVerticesObj[b.usermap].deleteVertices(),c={event:"click",object:"marker"},c.id=Number(this._id),window.console&&
console.log(JSON.stringify(c))):"normal"==a.mode[b.usermap]&&"undefined"!=typeof a.usermap[b.usermap].map.marker[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.marker[this._id].link&&("undefined"==typeof a.usermap[b.usermap].map.marker[this._id].link_target?location.href=a.usermap[b.usermap].map.marker[this._id].link:window.open(a.usermap[b.usermap].map.marker[this._id].link,a.usermap[b.usermap].map.marker[this._id].link_target)))};a.touchdevices&&(e.ontouchstart=function(a){1==a.touches.length&&
(this._touch=!0,this._move=!1,this._posX=a.touches[0].clientX,this._posY=a.touches[0].clientY)},e.ontouchmove=function(a){1==a.touches.length?this._touch&&(10<Math.abs(a.touches[0].clientX-this._posX)||10<Math.abs(a.touches[0].clientY-this._posY))&&(this._move=!0):this._touch=!1},e.ontouchend=function(c){if(this._touch&&!this._move&&!a.div[b.usermap]._mapdragged){if("edit"==a.mode[b.usermap]){c={event:"click",object:"marker"};c.id=this._id;window.console&&console.log(JSON.stringify(c));return}"undefined"!=
typeof a.usermap[b.usermap].map.marker[this._id]&&"undefined"!=typeof a.usermap[b.usermap].map.marker[this._id].link&&("undefined"==typeof a.usermap[b.usermap].map.marker[this._id].link_target?location.href=a.usermap[b.usermap].map.marker[this._id].link:window.open(a.usermap[b.usermap].map.marker[this._id].link,a.usermap[b.usermap].map.marker[this._id].link_target));if("edit"==a.mode[b.usermap])return;0<a.infobox[b.usermap].length&&(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+
"_"+a.infobox[b.usermap][0].id)&&a.div[b.usermap].removeChild(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)),a.infobox[b.usermap].pop());"undefined"==typeof a.usermap[b.usermap].map.marker[this._id]||"undefined"==typeof a.usermap[b.usermap].map.marker[this._id].infobox||document.getElementById("imap5_"+b.usermap+"_infobox_marker_"+this._id)||(c={},c.clientX=this._posX,c.clientY=this._posY,c.obj="marker",c.infobox=a.usermap[b.usermap].map.marker[this._id].infobox,
this.infobox=new B(b,this._id,c))}this._move=this._touch=!1});e.remove=function(){a.g[b.usermap].removeChild(this);a.marker[b.usermap][this._id]=null};e.drawMarker();return e},P=function(b){return 360*(Math.atan(Math.pow(Math.E,b.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI},v=function(a){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+Math.PI*a/360))},w=function(a,c){var g=c.getScreenCTM();return a.matrixTransform(g.inverse())},Na=function(b){var c=a.usermap[b.usermap].map.id,g=a.usermap[b.usermap].map.zoom,
d=0;a.svg[b.usermap]=t("svg");a.svg[b.usermap].setAttribute("xmlns","http://www.w3.org/2000/svg");a.svg[b.usermap].setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");a.svg[b.usermap].setAttribute("width",a.div[b.usermap].clientWidth+"px");a.svg[b.usermap].setAttribute("height",a.div[b.usermap].clientHeight+"px");a.svg[b.usermap].style.overflow="hidden";a.foreground[b.usermap].appendChild(a.svg[b.usermap]);a.svgcoord[b.usermap]=a.svg[b.usermap].createSVGPoint();a.grouphighlight[b.usermap].enable=
"undefined"==typeof a.usermap[b.usermap].map.grouphighlight?!1:a.usermap[b.usermap].map.grouphighlight.enable;a.fadeout[b.usermap].enable="undefined"==typeof a.usermap[b.usermap].map.fadeout?!0:a.usermap[b.usermap].map.fadeout.enable;a.heatmap[b.usermap].enable="undefined"==typeof a.usermap[b.usermap].map.heatmap?!1:a.usermap[b.usermap].map.heatmap.enable;if(a.heatmap[b.usermap].enable)if("continuous"==a.usermap[b.usermap].map.heatmap.heattype){var e={},e=ta(b);a.heatmap[b.usermap].hmin=e.hmin;a.heatmap[b.usermap].hmax=
e.hmax}else{var e=a.usermap[b.usermap].map.heatmap.discrete.rangeset.split(",").length,f=a.usermap[b.usermap].map.heatmap.discrete.colorset.split(",").length;0<e&&0<f&&f==e+1||(a.heatmap[b.usermap].enable=!1)}a.g[b.usermap]=t("g");a.g[b.usermap].setAttribute("stroke",a.usermap[b.usermap].map.geometry_default.stroke);a.g[b.usermap].setAttribute("stroke-width",a.usermap[b.usermap].map.geometry_default.stroke_width/g*(a.map[c].precision/a.factor[b.usermap]));a.g[b.usermap].setAttribute("stroke-linejoin",
a.usermap[b.usermap].map.geometry_default.stroke_linejoin);a.svg[b.usermap].appendChild(a.g[b.usermap]);var g=!0,m;for(m in a.map[c].geometry)if(a.map[c].geometry.hasOwnProperty(m)){var e=0,h=[],l=0,z=0,f=a.map[c].geometry[m].id;a.geometry[b.usermap][f]=t("g");a.g[b.usermap].appendChild(a.geometry[b.usermap][f]);a.geometry[b.usermap][f].setAttribute("id",a.map[c].geometry[m].id);a.geometry[b.usermap][f].fade={};a.geometry[b.usermap][f].fade.curColor={};a.geometry[b.usermap][f].fade.diffColor={};a.geometry[b.usermap][f].group=
{};a.geometry[b.usermap][f].group.id="undefined"==typeof a.usermap[b.usermap].map.geometry[f].group?0:a.usermap[b.usermap].map.geometry[f].group;a.heatmap[b.usermap].enable&&(a.geometry[b.usermap][f].heatcolor="continuous"==a.usermap[b.usermap].map.heatmap.heattype?fa(a.usermap[b.usermap].map.heatmap.continuous.startcolor,a.usermap[b.usermap].map.heatmap.continuous.endcolor,ga(a.heatmap[b.usermap].hmin,a.heatmap[b.usermap].hmax,a.usermap[b.usermap].map.geometry[f].heatvalue)):ha(a.usermap[b.usermap].map.geometry[f].heatvalue,
a.usermap[b.usermap].map.heatmap.discrete.rangeset.split(","),a.usermap[b.usermap].map.heatmap.discrete.colorset.split(",")));"undefined"==typeof a.groupHL[b.usermap][a.geometry[b.usermap][f].group.id]&&(a.groupHL[b.usermap][a.geometry[b.usermap][f].group.id]=[]);a.groupHL[b.usermap][a.geometry[b.usermap][f].group.id].push(f);X({usermap:b.usermap,geometry:f});a.geometry[b.usermap][f].fadeTo=function(a,b){var c=this;this.fade.startcolor=this.getAttribute("fill");this.fade.endcolor=a;this.fade.curColor.r=
I(this.fade.startcolor);this.fade.curColor.g=J(this.fade.startcolor);this.fade.curColor.b=K(this.fade.startcolor);this.fade.diffColor.r=I(this.fade.endcolor)-I(this.fade.startcolor);this.fade.diffColor.g=J(this.fade.endcolor)-J(this.fade.startcolor);this.fade.diffColor.b=K(this.fade.endcolor)-K(this.fade.startcolor);this.fade.totalCount=1E3*b/20;this.fade.count=0;0<this.fade.totalCount?this.fade.interval=setInterval(function(){c.fade.count<c.fade.totalCount?(c.fade.curColor.r+=c.fade.diffColor.r/
c.fade.totalCount,c.fade.curColor.g+=c.fade.diffColor.g/c.fade.totalCount,c.fade.curColor.b+=c.fade.diffColor.b/c.fade.totalCount,c.setAttribute("fill","#"+Q(c.fade.curColor.r,2)+Q(c.fade.curColor.g,2)+Q(c.fade.curColor.b,2)),c.fade.count++):(c.setAttribute("fill",c.fade.endcolor),clearInterval(c.fade.interval))},20):this.setAttribute("fill",a)};a.touchdevices||(a.geometry[b.usermap][f].onmouseover=function(c){"marker"==a.mode[b.usermap]&&(this.style.cursor="pointer");"maplabel"==a.mode[b.usermap]&&
(this.style.cursor="pointer");"mappath"==a.mode[b.usermap]&&(this.style.cursor="pointer");"mappoly"==a.mode[b.usermap]&&(this.style.cursor="pointer");"maprect"==a.mode[b.usermap]&&(this.style.cursor="pointer");"mapcurve"==a.mode[b.usermap]&&(this.style.cursor="pointer");if(0!=this.group.id&&a.grouphighlight[b.usermap].enable)for(var e in a.groupHL[b.usermap][this.group.id])a.groupHL[b.usermap][this.group.id].hasOwnProperty(e)&&clearInterval(a.geometry[b.usermap][a.groupHL[b.usermap][this.group.id][e]].fade.interval);
else clearInterval(this.fade.interval);if(0!=this.group.id&&a.grouphighlight[b.usermap].enable)for(e in a.groupHL[b.usermap][this.group.id])a.groupHL[b.usermap][this.group.id].hasOwnProperty(e)&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][this.group.id][e]]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][this.group.id][e]].fill_mouseover&&a.geometry[b.usermap][a.groupHL[b.usermap][this.group.id][e]].setAttribute("fill",R(b,a.groupHL[b.usermap][this.group.id][e]));
else"undefined"!=typeof a.usermap[b.usermap].map.geometry[this.id]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[this.id].fill_mouseover&&this.setAttribute("fill",R(b,this.id));"normal"!=a.mode[b.usermap]||"onmouseover"!=a.usermap[b.usermap].infobox.show||"undefined"==typeof a.usermap[b.usermap].map.geometry[this.id]||"undefined"==typeof a.usermap[b.usermap].map.geometry[this.id].infobox||document.getElementById("imap5_"+b.usermap+"_infobox_geometry_"+this.id)||(e={},e.clientX=c.clientX,
e.clientY=c.clientY,e.obj="geometry",e.infobox=a.usermap[b.usermap].map.geometry[this.id].infobox,this.infobox=new B(b,this.id,e))},a.geometry[b.usermap][f].onmouseout=function(c){"marker"==a.mode[b.usermap]&&(this.style.cursor="auto");if(0!=this.group.id&&a.grouphighlight[b.usermap].enable)for(var e in a.groupHL[b.usermap][this.group.id])a.groupHL[b.usermap][this.group.id].hasOwnProperty(e)&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][this.group.id][e]]&&"undefined"!=
typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][this.group.id][e]].fill_mouseover&&(a.fadeout[b.usermap].enable?a.geometry[b.usermap][a.groupHL[b.usermap][this.group.id][e]].fadeTo(G(b,a.groupHL[b.usermap][this.group.id][e]),.2):a.geometry[b.usermap][a.groupHL[b.usermap][this.group.id][e]].fadeTo(G(b,a.groupHL[b.usermap][this.group.id][e]),0));else a.fadeout[b.usermap].enable?this.fadeTo(G(b,this.id),.2):this.fadeTo(G(b,this.id),0);"onmouseover"==a.usermap[b.usermap].infobox.show&&"undefined"!=
typeof a.usermap[b.usermap].map.geometry[this.id]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[this.id].infobox&&(null==c.relatedTarget||c.relatedTarget.id!="imap5_"+b.usermap+"_infobox_geometry_"+this.id)&&document.getElementById("imap5_"+b.usermap+"_infobox_geometry_"+this.id)&&this.infobox.remove()});a.touchdevices||(a.geometry[b.usermap][f].onclick=function(c){a.div[b.usermap]._mapdragged||a.div[b.usermap]._transformed||("edit"==a.mode[b.usermap]?(null!=a.selectedVerticesObj[b.usermap]&&
a.selectedVerticesObj[b.usermap]!=this&&a.selectedVerticesObj[b.usermap].deleteVertices(),c={event:"click",object:"geometry"},c.id=this.id,window.console&&console.log(JSON.stringify(c))):"normal"==a.mode[b.usermap]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[this.id]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[this.id].link&&("undefined"==typeof a.usermap[b.usermap].map.geometry[this.id].link_target?location.href=a.usermap[b.usermap].map.geometry[this.id].link:window.open(a.usermap[b.usermap].map.geometry[this.id].link,
a.usermap[b.usermap].map.geometry[this.id].link_target)))});a.touchdevices||(a.geometry[b.usermap][f].onmousemove=function(c){c.preventDefault&&c.preventDefault();"normal"==a.mode[b.usermap]&&(a.div[b.usermap]._mousedown?document.getElementById("imap5_"+b.usermap+"_infobox_geometry_"+this.id)&&this.infobox.hide():document.getElementById("imap5_"+b.usermap+"_infobox_geometry_"+this.id)&&(this.infobox.reposition(c.clientX,c.clientY),this.infobox.show()))});a.touchdevices&&(a.geometry[b.usermap][f].ontouchstart=
function(a){1==a.touches.length&&(this._touch=!0,this._move=!1,this._posX=a.touches[0].clientX,this._posY=a.touches[0].clientY)});a.touchdevices&&(a.geometry[b.usermap][f].ontouchmove=function(a){1==a.touches.length?this._touch&&(10<Math.abs(a.touches[0].clientX-this._posX)||10<Math.abs(a.touches[0].clientY-this._posY))&&(this._move=!0):this._touch=!1});a.touchdevices&&(a.geometry[b.usermap][f].ontouchend=function(c){if(this._touch&&!this._move&&!a.div[b.usermap]._mapdragged){if("edit"==a.mode[b.usermap]){var e=
{event:"click",object:"geometry"};e.id=this.id;window.console&&console.log(JSON.stringify(e));return}"undefined"!=typeof a.usermap[b.usermap].map.geometry[this.id]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[this.id].link&&("undefined"==typeof a.usermap[b.usermap].map.geometry[this.id].link_target?location.href=a.usermap[b.usermap].map.geometry[this.id].link:window.open(a.usermap[b.usermap].map.geometry[this.id].link,a.usermap[b.usermap].map.geometry[this.id].link_target));if(0<a.selected[b.usermap].length){if(this.id==
a.selected[b.usermap][0]){if(0!=this.group.id&&a.grouphighlight[b.usermap].enable)for(e in a.groupHL[b.usermap][this.group.id])a.groupHL[b.usermap][this.group.id].hasOwnProperty(e)&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][this.group.id][e]]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][this.group.id][e]].fill_mouseover&&(a.fadeout[b.usermap].enable?a.geometry[b.usermap][a.groupHL[b.usermap][this.group.id][e]].fadeTo(G(b,a.groupHL[b.usermap][this.group.id][e]),
.2):a.geometry[b.usermap][a.groupHL[b.usermap][this.group.id][e]].fadeTo(G(b,a.groupHL[b.usermap][this.group.id][e]),0));else a.fadeout[b.usermap].enable?this.fadeTo(G(b,this.id),.2):this.fadeTo(G(b,this.id),0);a.selected[b.usermap].pop();0<a.infobox[b.usermap].length&&(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)&&a.div[b.usermap].removeChild(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+
"_"+a.infobox[b.usermap][0].id)),a.infobox[b.usermap].pop());return}c=a.geometry[b.usermap][a.selected[b.usermap][0]].group.id;if(0!=c&&a.grouphighlight[b.usermap].enable)for(e in a.groupHL[b.usermap][c])a.groupHL[b.usermap][c].hasOwnProperty(e)&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][c][e]]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][c][e]].fill_mouseover&&(a.fadeout[b.usermap].enable?a.geometry[b.usermap][a.groupHL[b.usermap][c][e]].fadeTo(G(b,
a.groupHL[b.usermap][c][e]),.2):a.geometry[b.usermap][a.groupHL[b.usermap][c][e]].fadeTo(G(b,a.groupHL[b.usermap][c][e]),0));else a.fadeout[b.usermap].enable?a.geometry[b.usermap][a.selected[b.usermap][0]].fadeTo(G(b,a.selected[b.usermap][0]),.2):a.geometry[b.usermap][a.selected[b.usermap][0]].fadeTo(G(b,a.selected[b.usermap][0]),0);a.selected[b.usermap].pop()}if("undefined"!=typeof a.usermap[b.usermap].map.geometry[this.id]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[this.id].fill_mouseover)if(0!=
this.group.id&&a.grouphighlight[b.usermap].enable)for(e in a.groupHL[b.usermap][this.group.id])a.groupHL[b.usermap][this.group.id].hasOwnProperty(e)&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][this.group.id][e]]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[a.groupHL[b.usermap][this.group.id][e]].fill_mouseover&&(a.fadeout[b.usermap].enable?a.geometry[b.usermap][a.groupHL[b.usermap][this.group.id][e]].fadeTo(R(b,a.groupHL[b.usermap][this.group.id][e]),.2):
a.geometry[b.usermap][a.groupHL[b.usermap][this.group.id][e]].fadeTo(R(b,a.groupHL[b.usermap][this.group.id][e]),0));else a.fadeout[b.usermap].enable?this.fadeTo(R(b,this.id),.2):this.fadeTo(R(b,this.id),0);if("edit"==a.mode[b.usermap])return;a.selected[b.usermap].push(this.id);0<a.infobox[b.usermap].length&&(document.getElementById("imap5_"+b.usermap+"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)&&a.div[b.usermap].removeChild(document.getElementById("imap5_"+b.usermap+
"_infobox_"+a.infobox[b.usermap][0].object+"_"+a.infobox[b.usermap][0].id)),a.infobox[b.usermap].pop());"undefined"==typeof a.usermap[b.usermap].map.geometry[this.id]||"undefined"==typeof a.usermap[b.usermap].map.geometry[this.id].infobox||document.getElementById("imap5_"+b.usermap+"_infobox_geometry_"+this.id)||(e={},e.clientX=this._posX,e.clientY=this._posY,e.obj="geometry",e.infobox=a.usermap[b.usermap].map.geometry[this.id].infobox,this.infobox=new B(b,this.id,e))}this._move=this._touch=!1});
"undefined"==typeof a.usermap[b.usermap].map.geometry[a.map[c].geometry[m].id]||"undefined"==typeof a.usermap[b.usermap].map.geometry[a.map[c].geometry[m].id].title||"undefined"!=typeof a.usermap[b.usermap].map.geometry_default.disableTooltip&&a.usermap[b.usermap].map.geometry_default.disableTooltip||(l=t("title"),l.appendChild(document.createTextNode(a.usermap[b.usermap].map.geometry[a.map[c].geometry[m].id].title)),a.geometry[b.usermap][f].appendChild(l));for(var q in a.map[c].geometry[m].polygons){var r,
p,n,u=[];if(a.map[c].geometry[m].polygons.hasOwnProperty(q)){var v=t("path");a.geometry[b.usermap][f].appendChild(v);var x="",w;for(w in a.map[c].geometry[m].polygons[q]){if(a.map[c].geometry[m].polygons[q].hasOwnProperty(w)){var x=x+"M",y=0,A=0,D=!0;n=0;l=-90;z=-180;r=90;p=180;var u=[],F;for(F in a.map[c].geometry[m].polygons[q][w])a.map[c].geometry[m].polygons[q][w].hasOwnProperty(F)&&(D||(x+=" L"),g&&(a.factor[b.usermap]=Ja(a.map[c].geometry[m].polygons[q][w][F][0],a.map[c].geometry[m].polygons[q][w][F][1]),
g=!1),y+=a.map[c].geometry[m].polygons[q][w][F][0]/a.factor[b.usermap],d++,null!=a.map[c].geometry[m].polygons[q][w][F][1]&&(A+=a.map[c].geometry[m].polygons[q][w][F][1]/a.factor[b.usermap],d--),lat2=180/Math.PI*Math.log(Math.tan(Math.PI/4+A/(a.map[c].precision/a.factor[b.usermap])*Math.PI/360))*(a.map[c].precision/a.factor[b.usermap]),x+=k(y,a.precision)+" "+k(lat2,a.precision),D=!1,n+=1,l=A*a.factor[b.usermap]/a.map[c].precision>l?A*a.factor[b.usermap]/a.map[c].precision:l,z=y*a.factor[b.usermap]/
a.map[c].precision>z?y*a.factor[b.usermap]/a.map[c].precision:z,r=A*a.factor[b.usermap]/a.map[c].precision<r?A*a.factor[b.usermap]/a.map[c].precision:r,p=y*a.factor[b.usermap]/a.map[c].precision<p?y*a.factor[b.usermap]/a.map[c].precision:p,u[n-1]={},u[n-1].lat=A*a.factor[b.usermap]/a.map[c].precision,u[n-1].lng=y*a.factor[b.usermap]/a.map[c].precision);(l-r)*(z-p)>=e&&(e=(l-r)*(z-p),h.length=0,h=u.slice(),u.length=0);x+=" Z "}v.setAttribute("d",x)}}}l=h.length;h[l]={};h[l].lat=h[0].lat;h[l].lng=h[0].lng;
h=Ka(h);l=h.lat;z=h.lng;a.geometry[b.usermap][f].centroid={};a.geometry[b.usermap][f].centroid.lat=l;a.geometry[b.usermap][f].centroid.lng=z;a.geoareasize[b.usermap].push({id:f,area:e})}q=t("g");a.g[b.usermap].appendChild(q);q.setAttribute("id","imap5_"+b.usermap+"_centerref");w=t("g");F=t("circle");w.appendChild(F);q.appendChild(w);F.setAttribute("cx",0);F.setAttribute("cy",0);F.setAttribute("r",0);F.setAttribute("stroke","#006600");F.setAttribute("stroke-width",0);F.setAttribute("fill","#ff0000");
w.setAttribute("transform","scale(1,-1)");a.center[b.usermap]=q;a.center[b.usermap].setAttribute("transform","scale("+k(a.map[c].precision/a.factor[b.usermap]/a.zoom[b.usermap].currentzoom,a.precision)+")");if("undefined"!=typeof a.usermap[b.usermap].map.geometry_default.geometryAbbreviation&&"undefined"!=typeof a.usermap[b.usermap].map.geometry_default.geometryAbbreviation.enable&&a.usermap[b.usermap].map.geometry_default.geometryAbbreviation.enable)for(m in ia.label.style=a.usermap[b.usermap].map.geometry_default.geometryAbbreviation.style,
a.geometry[b.usermap])!a.geometry[b.usermap].hasOwnProperty(m)||"undefined"!=typeof a.usermap[b.usermap].map.geometry[m].hideAbbreviation&&a.usermap[b.usermap].map.geometry[m].hideAbbreviation||(q={},q.name=ia.name,q.lat=a.geometry[b.usermap][m].centroid.lat,q.lng=a.geometry[b.usermap][m].centroid.lng,q.label={},q.label.text="undefined"==typeof a.usermap[b.usermap].map.geometry[m].title?"":a.usermap[b.usermap].map.geometry[m].title,q.label.style={},q.label.style=Object(ia.label.style),a.mapabbr[b.usermap][m]=
new Ia(b,m,q));if("undefined"!=typeof a.usermap[b.usermap].map.bubblemap&&"undefined"!=typeof a.usermap[b.usermap].map.bubblemap.enable&&a.usermap[b.usermap].map.bubblemap.enable){q=0;for(m in a.geometry[b.usermap])a.mapbubblesize[b.usermap].push({id:a.geometry[b.usermap][m].id,bubblesize:Math.abs(a.usermap[b.usermap].map.geometry[m].bubblevalue)}),Math.abs(a.usermap[b.usermap].map.geometry[m].bubblevalue)>=q&&(q=Math.abs(a.usermap[b.usermap].map.geometry[m].bubblevalue));a.mapbubblesize[b.usermap].sort(function(a,
b){return b.bubblesize-a.bubblesize});a.usermap[b.usermap].map.bubblemap.maxbubble=q;for(q=0;q<a.mapbubblesize[b.usermap].length;q++)a.mapbubblesize[b.usermap].hasOwnProperty(q)&&(m=a.mapbubblesize[b.usermap][q].id,a.geometry[b.usermap].hasOwnProperty(m)&&(w={},w.lat=a.geometry[b.usermap][m].centroid.lat,w.lng=a.geometry[b.usermap][m].centroid.lng,w.bubblevalue=a.usermap[b.usermap].map.geometry[m].bubblevalue,a.mapbubble[b.usermap][m]=new qa(b,m,w),"undefined"!=typeof a.usermap[b.usermap].map.geometry[m].hidden&&
a.usermap[b.usermap].map.geometry[m].hidden?a.mapbubble[b.usermap][m].hide():a.mapbubble[b.usermap][m].show()))}if("undefined"!=typeof a.usermap[b.usermap].map.piechart&&"undefined"!=typeof a.usermap[b.usermap].map.piechart.enable&&a.usermap[b.usermap].map.piechart.enable)for(m in a.geometry[b.usermap])a.geometry[b.usermap].hasOwnProperty(m)&&(q={},q.lat=a.geometry[b.usermap][m].centroid.lat,q.lng=a.geometry[b.usermap][m].centroid.lng,q.pievalue=a.usermap[b.usermap].map.geometry[m].pievalue,a.piechart[b.usermap][m]=
new pa(b,m,q),"undefined"!=typeof a.usermap[b.usermap].map.geometry[m].hidden&&a.usermap[b.usermap].map.geometry[m].hidden?a.piechart[b.usermap][m].hide():a.piechart[b.usermap][m].show());for(m in a.usermap[b.usermap].map.mappoly)a.usermap[b.usermap].map.mappoly.hasOwnProperty(m)&&(a.mappoly[b.usermap][m]=new da(b,m,a.usermap[b.usermap].map.mappoly[m]));for(m in a.usermap[b.usermap].map.maprect)a.usermap[b.usermap].map.maprect.hasOwnProperty(m)&&(a.maprect[b.usermap][m]=new ca(b,m,a.usermap[b.usermap].map.maprect[m]));
for(m in a.usermap[b.usermap].map.mappath)a.usermap[b.usermap].map.mappath.hasOwnProperty(m)&&(a.mappath[b.usermap][m]=new ea(b,m,a.usermap[b.usermap].map.mappath[m]));for(m in a.usermap[b.usermap].map.mapcurve)a.usermap[b.usermap].map.mapcurve.hasOwnProperty(m)&&(a.mapcurve[b.usermap][m]=new ba(b,m,a.usermap[b.usermap].map.mapcurve[m]));for(m in a.usermap[b.usermap].map.maplabel)a.usermap[b.usermap].map.maplabel.hasOwnProperty(m)&&(a.maplabel[b.usermap][m]=new ra(b,m,a.usermap[b.usermap].map.maplabel[m]));
for(m in a.usermap[b.usermap].map.marker)a.usermap[b.usermap].map.marker.hasOwnProperty(m)&&(a.marker[b.usermap][m]=new sa(b,m,a.usermap[b.usermap].map.marker[m]));for(m in a.usermap[b.usermap].map.maplegend)a.usermap[b.usermap].map.maplegend.hasOwnProperty(m)&&(a.maplegend[b.usermap][m]=new oa(b,m,a.usermap[b.usermap].map.maplegend[m]));"undefined"!=typeof a.usermap[b.usermap].map.categorylegend&&"undefined"!=typeof a.usermap[b.usermap].map.categorylegend.enable&&a.usermap[b.usermap].map.categorylegend.enable&&
(a.categorylegend[b.usermap]=new ma(b,a.usermap[b.usermap].map.categorylegend),T(b));"undefined"!=typeof a.usermap[b.usermap].map.maptitle&&(a.maptitle[b.usermap]=new na(b,a.usermap[b.usermap].map.maptitle));d+a.map[c].precision!=a.map[c].point&&La(b);Ma(b);ua(b);a.div[b.usermap].style.visibility="hidden";a.zoom[b.usermap].loadeditingsetting?E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx):Y(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currentlat,a.zoom[b.usermap].currentlng);
if(a.responsivemap[b.usermap]){var C={};C.usermap=b.usermap;a.responsive(C);d+a.map[c].precision!=a.map[c].point&&va(C);window.addEventListener&&window.addEventListener("resize",function(b){a.responsive(C);d+a.map[c].precision!=a.map[c].point&&va(C)},!0)}a.div[b.usermap].style.visibility="visible"},E=function(b,c,g,d){var e=a.usermap[b.usermap].map.id,f=a.div[b.usermap].clientWidth,m=a.div[b.usermap].clientHeight;k(a.zoom[b.usermap].currentzoom,a.precision);a.zoom[b.usermap].currentzoom=k(c,a.precision);
a.zoom[b.usermap].currentx=k(d,a.precision);a.zoom[b.usermap].currenty=k(g,a.precision);a.g[b.usermap].setAttribute("transform","translate("+k(f/2+-d*c,a.precision)+","+k(m/2+g*c,a.precision)+") scale("+k(c/(a.map[e].precision/a.factor[b.usermap]),a.precision)+",-"+k(c/(a.map[e].precision/a.factor[b.usermap]),a.precision)+")");a.g[b.usermap].setAttribute("stroke-width",k(a.usermap[b.usermap].map.geometry_default.stroke_width/c*(a.map[e].precision/a.factor[b.usermap]),a.precision));window.console&&
(f={event:"poschange",object:"map"},f.zoom=k(c/a.zoom[b.usermap].rfactor,a.precision),f.x=k(d,a.precision),f.y=k(g,a.precision),window.console&&console.log(JSON.stringify(f)));for(var h in a.marker[b.usermap])a.marker[b.usermap].hasOwnProperty(h)&&null!==a.marker[b.usermap][h]&&a.marker[b.usermap][h].setAttribute("transform","translate("+k(a.marker[b.usermap][h]._lng,a.precision)+","+k(a.marker[b.usermap][h]._lat,a.precision)+") scale("+k(a.map[e].precision/a.factor[b.usermap]/c,a.precision)+")");
for(h in a.maplabel[b.usermap])a.maplabel[b.usermap].hasOwnProperty(h)&&null!==a.maplabel[b.usermap][h]&&a.maplabel[b.usermap][h].setAttribute("transform","translate("+k(a.maplabel[b.usermap][h]._lng,a.precision)+","+k(a.maplabel[b.usermap][h]._lat,a.precision)+") scale("+k(a.map[e].precision/a.factor[b.usermap]/c,a.precision)+")");if(k(a.zoom[b.usermap].prevzoom,a.precision)!=c){for(h in a.mapabbr[b.usermap])if(a.mapabbr[b.usermap].hasOwnProperty(h)){a.mapabbr[b.usermap][h].setAttribute("transform",
"translate("+k(a.mapabbr[b.usermap][h]._lng,a.precision)+","+k(a.mapabbr[b.usermap][h]._lat,a.precision)+") scale("+k(a.map[e].precision/a.factor[b.usermap]/c,a.precision)+")");g=k(a.map[e].precision/a.factor[b.usermap]/c,a.precision);var l=k(a.mapabbr[b.usermap][h]._lng/g,a.precision);g=k(a.mapabbr[b.usermap][h]._lat/g,a.precision);d=a.mapabbr[b.usermap][h].getBBox();a.mapabbr[b.usermap][h]._bbox={};a.mapabbr[b.usermap][h]._bbox.x=parseFloat(l+d.x);a.mapabbr[b.usermap][h]._bbox.y=parseFloat(g+d.y);
a.mapabbr[b.usermap][h]._bbox.width=d.width;a.mapabbr[b.usermap][h]._bbox.height=d.height;a.mapabbr[b.usermap][h].hide()}a.geoareasize[b.usermap].sort(function(a,b){return b.area-a.area});for(l=0;l<a.geoareasize[b.usermap].length;l++)if(a.geoareasize[b.usermap].hasOwnProperty(l)&&(h=a.geoareasize[b.usermap][l].id,a.mapabbr[b.usermap].hasOwnProperty(h))){g=a.mapabbr[b.usermap][h]._bbox;a.mapabbr[b.usermap][h].show();for(var z in a.mapabbr[b.usermap])if(z!=h&&a.mapabbr[b.usermap].hasOwnProperty(z)&&
"visible"==a.mapabbr[b.usermap][z].style.visibility&&(d=a.mapabbr[b.usermap][z]._bbox,Oa({x:g.x,y:g.y},{x:parseFloat(g.x+g.width),y:parseFloat(g.y+g.height)},{x:d.x,y:d.y},{x:parseFloat(d.x+d.width),y:parseFloat(d.y+d.height)}))){a.mapabbr[b.usermap][h].hide();break}"undefined"!=typeof a.usermap[b.usermap].map.geometry[h].hidden&&a.usermap[b.usermap].map.geometry[h].hidden&&a.mapabbr[b.usermap][h].hide()}}else for(h in a.mapabbr[b.usermap])a.mapabbr[b.usermap].hasOwnProperty(h)&&a.mapabbr[b.usermap][h].setAttribute("transform",
"translate("+k(a.mapabbr[b.usermap][h]._lng,a.precision)+","+k(a.mapabbr[b.usermap][h]._lat,a.precision)+") scale("+k(a.map[e].precision/a.factor[b.usermap]/c,a.precision)+")");for(h in a.mappoly[b.usermap])if(a.mappoly[b.usermap].hasOwnProperty(h)&&null!==a.mappoly[b.usermap][h]){a.mappoly[b.usermap][h].getElementsByTagName("polygon")[0].setAttribute("stroke-width",k(a.mappoly[b.usermap][h]._options.style.strokeWidth/c*(a.map[e].precision/a.factor[b.usermap]),a.precision));if("undefined"!==typeof a.mappoly[b.usermap][h]._options.style.strokeDasharray&&
"none"!==a.mappoly[b.usermap][h]._options.style.strokeDasharray){z=a.mappoly[b.usermap][h]._options.style.strokeDasharray.split(",");g="";for(l=0;l<z.length;l++)""!=g&&(g+=","),g+=k(z[l]/a.zoom[b.usermap].currentzoom*(a.map[e].precision/a.factor[b.usermap]),a.precision);a.mappoly[b.usermap][h].getElementsByTagName("polygon")[0].setAttribute("stroke-dasharray",g)}for(l in a.mappoly[b.usermap][h]._mainvertices)a.mappoly[b.usermap][h]._mainvertices.hasOwnProperty(l)&&a.mappoly[b.usermap][h]._mainvertices[l].rescale();
for(l in a.mappoly[b.usermap][h]._subvertices)a.mappoly[b.usermap][h]._subvertices.hasOwnProperty(l)&&a.mappoly[b.usermap][h]._subvertices[l].rescale();a.mappoly[b.usermap][h].toggleCategory()}"mappoly"==a.mode[b.usermap]&&"undefined"!=typeof a.poly[b.usermap][1]&&null!=a.poly[b.usermap][1]&&(1<a.poly[b.usermap][1].count()?a.poly[b.usermap][1].getElementsByTagName("polygon")[0].setAttribute("stroke-width",k(a.poly[b.usermap][1]._options.style.strokeWidth/c*(a.map[e].precision/a.factor[b.usermap]),
a.precision)):a.poly[b.usermap][1].getElementsByTagName("polyline")[0].setAttribute("stroke-width",k(a.poly[b.usermap][1]._options.style.strokeWidth/c*(a.map[e].precision/a.factor[b.usermap]),a.precision)));for(h in a.maprect[b.usermap])if(a.maprect[b.usermap].hasOwnProperty(h)&&null!==a.maprect[b.usermap][h]){a.maprect[b.usermap][h].getElementsByTagName("polygon")[0].setAttribute("stroke-width",k(a.maprect[b.usermap][h]._options.style.strokeWidth/c*(a.map[e].precision/a.factor[b.usermap]),a.precision));
if("undefined"!==typeof a.maprect[b.usermap][h]._options.style.strokeDasharray&&"none"!==a.maprect[b.usermap][h]._options.style.strokeDasharray){z=a.maprect[b.usermap][h]._options.style.strokeDasharray.split(",");g="";for(l=0;l<z.length;l++)""!=g&&(g+=","),g+=k(z[l]/a.zoom[b.usermap].currentzoom*(a.map[e].precision/a.factor[b.usermap]),a.precision);a.maprect[b.usermap][h].getElementsByTagName("polygon")[0].setAttribute("stroke-dasharray",g)}for(l in a.maprect[b.usermap][h]._mainvertices)a.maprect[b.usermap][h]._mainvertices.hasOwnProperty(l)&&
a.maprect[b.usermap][h]._mainvertices[l].rescale();a.maprect[b.usermap][h].toggleCategory()}"maprect"==a.mode[b.usermap]&&"undefined"!=typeof a.rect[b.usermap][1]&&null!=a.rect[b.usermap][1]&&a.rect[b.usermap][1].getElementsByTagName("polygon")[0].setAttribute("stroke-width",k(a.rect[b.usermap][1]._options.style.strokeWidth/c*(a.map[e].precision/a.factor[b.usermap]),a.precision));for(h in a.mappath[b.usermap])if(a.mappath[b.usermap].hasOwnProperty(h)&&null!=a.mappath[b.usermap][h]){a.mappath[b.usermap][h].drawMapPath();
for(l in a.mappath[b.usermap][h]._mainvertices)a.mappath[b.usermap][h]._mainvertices.hasOwnProperty(l)&&a.mappath[b.usermap][h]._mainvertices[l].rescale();for(l in a.mappath[b.usermap][h]._subvertices)a.mappath[b.usermap][h]._subvertices.hasOwnProperty(l)&&a.mappath[b.usermap][h]._subvertices[l].rescale();a.mappath[b.usermap][h].toggleCategory()}"mappath"==a.mode[b.usermap]&&"undefined"!=typeof a.path[b.usermap][1]&&null!=a.path[b.usermap][1]&&a.path[b.usermap][1].getElementsByTagName("polyline")[0].setAttribute("stroke-width",
k(a.path[b.usermap][1]._options.style.strokeWidth/c*(a.map[e].precision/a.factor[b.usermap]),a.precision));for(h in a.mapcurve[b.usermap])if(a.mapcurve[b.usermap].hasOwnProperty(h)&&null!=a.mapcurve[b.usermap][h]){a.mapcurve[b.usermap][h].drawMapCurve();for(l in a.mapcurve[b.usermap][h]._mainvertices)a.mapcurve[b.usermap][h]._mainvertices.hasOwnProperty(l)&&a.mapcurve[b.usermap][h]._mainvertices[l].rescale();a.mapcurve[b.usermap][h].toggleCategory()}"mapcurve"==a.mode[b.usermap]&&"undefined"!=typeof a.curve[b.usermap][1]&&
null!=a.curve[b.usermap][1]&&a.curve[b.usermap][1].getElementsByTagName("path")[0].setAttribute("stroke-width",k(a.curve[b.usermap][1]._options.style.strokeWidth/c*(a.map[e].precision/a.factor[b.usermap]),a.precision));for(h in a.mapbubble[b.usermap])a.mapbubble[b.usermap].hasOwnProperty(h)&&null!==a.mapbubble[b.usermap][h]&&a.mapbubble[b.usermap][h].rescale();for(h in a.piechart[b.usermap])a.piechart[b.usermap].hasOwnProperty(h)&&null!==a.piechart[b.usermap][h]&&a.piechart[b.usermap][h].rescale();
a.center[b.usermap].setAttribute("transform","scale("+k(a.map[e].precision/a.factor[b.usermap]/c,a.precision)+")");a.zoom[b.usermap].prevzoom=c},Y=function(a,c,g,d){g=A(g);E(a,c,180/Math.PI*Math.log(Math.tan(Math.PI/4+Math.PI*g/360)),d)},wa=function(b){"normal"!=a.mode[b.arg.usermap]||a.zoom[b.arg.usermap].loadeditingsetting||(b.style.visibility="visible")},La=function(b){var c=String.fromCharCode(104,116,116,112,115,58,47,47,119,119,119,46,105,109,97,112,98,117,105,108,100,101,114,46,99,111,109),
g=String.fromCharCode(80,111,119,101,114,101,100,32,66,121,32,105,77,97,112,66,117,105,108,100,101,114,32,72,84,77,76,53),d=String.fromCharCode(105,77,97,112,66,117,105,108,100,101,114,32,72,84,77,76,53),e=String.fromCharCode(119,119,119,46,105,109,97,112,98,117,105,108,100,101,114,46,99,111,109),f=String.fromCharCode(119,119,119,46,104,116,109,108,53,109,97,112,115,111,102,116,119,97,114,101,46,99,111,109),k=String.fromCharCode(104,116,116,112,115,58,47,47,119,119,119,46,105,109,97,112,98,117,105,
108,100,101,114,46,99,111,109,47,111,114,100,101,114,47),h=window.location.hostname,l=t("g");l.style.opacity=1;a.svg[b.usermap].appendChild(l);l.style.opacity-=.8;var z=t("text");z.appendChild(document.createTextNode(d));z.style.cursor="default";z.style.fill="#FFFFFF";z.style.fontFamily="Arial";z.style.fontWeight="bold";z.style.pointerEvents="none";l.appendChild(z);z.setAttribute("x",-4096);z.setAttribute("y",-4096);var q=t("text");q.appendChild(document.createTextNode(d));q.style.cursor="default";
q.style.fill="#000000";q.style.fontFamily="Arial";q.style.fontWeight="bold";q.style.pointerEvents="none";l.appendChild(q);q.setAttribute("x",-4096);q.setAttribute("y",-4096);q.setAttribute("text-anchor","middle");d=parseInt(a.div[b.usermap].clientWidth/8);for(q.style.fontSize=d+"px";q.getBBox().width>a.div[b.usermap].clientWidth;)d-=2,q.style.fontSize=d+"px";for(;q.getBBox().height>a.div[b.usermap].clientHeight;)d-=2,q.style.fontSize=d+"px";d-=2;q.style.fontSize=d+"px";q.setAttribute("x",a.div[b.usermap].clientWidth/
2);q.setAttribute("y",a.div[b.usermap].clientHeight/2+parseInt(q.style.fontSize)/2);z.setAttribute("text-anchor","middle");z.style.fontSize=d+"px";z.setAttribute("x",a.div[b.usermap].clientWidth/2+3);z.setAttribute("y",a.div[b.usermap].clientHeight/2+parseInt(q.style.fontSize)/2+3);a.wmark[b.usermap].wmark=q;a.wmark[b.usermap].wmarkshadow=z;var r=document.createElement("div");a.div[b.usermap].appendChild(r);r.appendChild(document.createTextNode(g));r.style.position="absolute";r.style.bottom=0-parseInt(a.usermap[b.usermap].div.style.borderWidth)+
"px";r.style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+"px";r.style.font="11px Verdana";r.style.backgroundColor="#ffffff";r.style.padding="3px";r.style.opacity=.5;r.style.cursor="pointer";r.onclick=function(){if("edit"==a.mode[b.usermap]||"undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.editing){if(window.console){var e={event:"popup",object:"map"};e.url=c;window.console&&console.log(JSON.stringify(e))}}else window.open(c)};a.touchdevices&&(r.ontouchstart=function(a){a.preventDefault&&
a.preventDefault();a.stopPropagation&&a.stopPropagation();this._touch=1==a.touches.length?!0:!1});a.touchdevices&&(r.ontouchend=function(e){this._touch&&("edit"==a.mode[b.usermap]||"undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.editing?window.console&&(e={event:"popup",object:"map"},e.url=c,window.console&&console.log(JSON.stringify(e))):window.open(c))});r.onmouseover=function(){r.style.opacity=1};r.onmouseout=function(){r.style.opacity=.5};if(h!=f&&h!=e){var p=document.createElement("div");
a.div[b.usermap].appendChild(p);p.innerHTML='<img ontouchend="imap5.resumePopup(this.parentNode);this.parentNode.style.visibility=\'hidden\';" onclick="imap5.resumePopup(this.parentNode);this.parentNode.style.visibility=\'hidden\';" style="cursor:pointer; position:absolute; right:0px; top:0px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAA3NCSVQICAjb4U/gAAAARVBMVEUAAAC2trbXbVt9fX1mZmb///+UlJT39/fn5+eZmZmbjInZ2dnIgnaLhIPTdWXCwsKkpKSMjIzv7+/e3t7MzMy7u7uCfn4Lu4lWAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFnRFWHRDcmVhdGlvbiBUaW1lADAzLzIwLzE0S4NbxQAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAACqSURBVCiRlZLbDoQgDETdlVKrUhHd/v+nLgUFTTTG4YXM4TItNHCj5kYQx/dCT2B0pufscG/cWID4YZZEWNqOpAATIJASFkJYTAHOImAkycfZFcCixLdCEH3duqfKZF1x82tc1sUqm0PUOlh+6vvsn8DnEqQ8KjofxeIRwjQFQHu8POcnSdnsIa6LkYLdC7S1QNMlf6tnqC0RWkoT5zh9bvvbF7z7DNefB/4cEAzsPz05RwAAAABJRU5ErkJggg==" width="24" height="24"/>';
p.innerHTML=p.innerHTML+"<img ontouchend=\"window.open('"+k+"')\" onclick=\"window.open('"+k+'\')" style="cursor:pointer; position:absolute; left:33px; top:123px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAAdCAMAAAB8M6mmAAAAA3NCSVQICAjb4U/gAAAASFBMVEVBiM+Dr9z0+PxZl9XE2vCsy+ptotjc5e6UvORLjtH///+40+1inNXo8fmgxOfQ4vO60ed9rd7y8vJxptuJteFKjNbc6fbR3utuSFHfAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFnRFWHRDcmVhdGlvbiBUaW1lADAzLzIwLzE0S4NbxQAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAG9SURBVEiJ7VfbcusgDFSF3QMylzhi6P//aVc4NJk0zun0wdOH7GQMYSVWQkAcOv97i3QM3OlMH+EgMcOJ3g9UI3ek2Asv/A41A4/OfM0/8PU/M7yiSCks9RHxqHtnIrrP7rgQBWbrqm4nUvXr0nG9f5lw8LdyZbDfyH25/ohJRBa0jBZR29hsXZ/7wOCLLCLDd7kYdnImL55WGEWZnshFC7KxhkkiJdFwmQVeweXqmiDJwRfhOQ9fJ63PYE6T1AipRZiq+F25UiRFk1T1ks2D8ian0vQmpM7jS7j6Iv/a44KTQ0opESdZZ9lb2SIZH6y9dGS1Lxc5RIrqxN4d/N0WCpx6XJYv1mgRL1WWlp7ULjTsTMXSG3o75MitE2Le5OabYl+7VtiNDJCrkpgmtmT3a+cYNWGOFGZrnRWr124OfZJiazP4O7nAtnGYA4Q9rKFURdZnclh7jjDCAVQzFh61s6EVGy6xDv7+PGaTq8JNGoraYA7N3Z/vqNvTkfPb9eI0LkjHiIgbx4qOqycMfnO4+ga1p8u5fg3dmPwXuc2LHYyDoFMp+ch3mRf+Mg599XN4sT0QJzqfDssP/xE+AeDcGcHI5TetAAAAAElFTkSuQmCC" width="110" height="29"/>';
p.innerHTML+='<img ontouchend="imap5.resumePopup(this.parentNode);this.parentNode.style.visibility=\'hidden\';" onclick="imap5.resumePopup(this.parentNode);this.parentNode.style.visibility=\'hidden\';" style="cursor:pointer; position:absolute; left:163px; top:123px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAdCAMAAADIOV+pAAAAA3NCSVQICAjb4U/gAAAASFBMVEVBiM99rd7o8flZl9W40+2sy+ptotj0+PzR3uuUvORLjtHc5e7////E2vBinNW60eegxOeJteHy8vJxptvO3vdKjNbc6faDr9x61MolAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFnRFWHRDcmVhdGlvbiBUaW1lADAzLzIwLzE0S4NbxQAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAD0SURBVDiN7ZXdksMgCIVpSNbqHg0Jjvv+b7pgO22nk16Y656LGAgf+DMS2n//Co2K152uaRhzrfRziiM+h301oBTztQpTxSDXUCUDw+CMaE/Od1C1nzKrphfzSJjuLw6WCcBCtNhgCbs5H3PqcQ9wgqaMrSAnlo1acPP4OijkCRZPz8iKpuYpqKrxEfAOzk/wlgXVFg7Uoug6BimE9ALavJOBxJfshZdjpkswG7mFvkbPIohlSZ0PoVBaPl35GaEG21sHN4SGlmyO5rqY6aN+qllExD4WD2Cxzby5/AA5ioz3mK8GdbJBsrXkU1ppX0/UtH/HP8K4DBwH48nnAAAAAElFTkSuQmCC" width="56" height="29"/>';
p.style.font="11px Verdana";p.style.position="absolute";p.style.width="256px";p.style.height="160px";p.style.backgroundImage="url(data:image/png;base64,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)";
p.style.boxShadow="rgb(0, 0, 0) 0px 0px 10px 0px";g=parseFloat(window.getComputedStyle(p,null).getPropertyValue("width"));e=parseFloat(window.getComputedStyle(p,null).getPropertyValue("height"));p.style.visibility="hidden";p.style.left=a.div[b.usermap].clientWidth/2-g/2+"px";p.style.top=a.div[b.usermap].clientHeight/2-e/2+"px";p.arg=b;a.wmark[b.usermap].popup=p;setTimeout(function(){wa(p)},6E4)}},va=function(b){var c=a.wmark[b.usermap].wmark,g=a.wmark[b.usermap].wmarkshadow,d=a.wmark[b.usermap].popup,
e=parseInt(a.div[b.usermap].clientWidth/8);for(c.style.fontSize=e+"px";c.getBBox().width>a.div[b.usermap].clientWidth;)e-=2,c.style.fontSize=e+"px";for(;c.getBBox().height>a.div[b.usermap].clientHeight;)e-=2,c.style.fontSize=e+"px";e-=2;c.style.fontSize=e+"px";c.setAttribute("x",a.div[b.usermap].clientWidth/2);c.setAttribute("y",a.div[b.usermap].clientHeight/2+parseInt(c.style.fontSize)/2);g.style.fontSize=e+"px";g.setAttribute("x",a.div[b.usermap].clientWidth/2+3);g.setAttribute("y",a.div[b.usermap].clientHeight/
2+parseInt(c.style.fontSize)/2+3);"undefined"!=typeof d&&(c=parseFloat(window.getComputedStyle(d,null).getPropertyValue("width")),g=parseFloat(window.getComputedStyle(d,null).getPropertyValue("height")),d.style.left=a.div[b.usermap].clientWidth/2-c/2+"px",d.style.top=a.div[b.usermap].clientHeight/2-g/2+"px")},Ma=function(b){var c=String.fromCharCode(104,116,116,112,115,58,47,47,119,119,119,46,105,109,97,112,98,117,105,108,100,101,114,46,99,111,109),g=String.fromCharCode(80,111,119,101,114,101,100,
32,66,121,32,105,77,97,112,66,117,105,108,100,101,114,32,72,84,77,76,53),d=document.createElement("div");a.div[b.usermap].appendChild(d);d.innerHTML="<a href='"+c+"' rel='nofollow'>"+g+"</a>";d.style.position="absolute";d.style.bottom="-1px";d.style.right="1px";d.style.font="11px Verdana";d.style.backgroundColor="#ffffff";d.style.cursor="none";d.style.visibility="hidden"},Pa=function(b){var c=a.usermap[b.usermap].map.id,g=a.usermap[b.usermap].map.lat,d=a.usermap[b.usermap].map.lng,e=a.usermap[b.usermap].map.zoom;
a.zoom[b.usermap]={};a.zoom[b.usermap].initzoom="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.init?k(a.usermap[b.usermap].map.zoom_setting.init.zoom,a.precision):k(e,a.precision);a.zoom[b.usermap].initlat="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.init?k(a.usermap[b.usermap].map.zoom_setting.init.lat,a.precision):k(g,a.precision);a.zoom[b.usermap].initlng="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.init?k(a.usermap[b.usermap].map.zoom_setting.init.lng,a.precision):
k(d,a.precision);a.zoom[b.usermap].maxzoomlevel="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.maxzoomlevel?a.usermap[b.usermap].map.zoom_setting.maxzoomlevel:20;a.zoom[b.usermap].minzoomlevel="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.minzoomlevel?a.usermap[b.usermap].map.zoom_setting.minzoomlevel:1;a.zoom[b.usermap].rfactor=1;"undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.editing?(a.zoom[b.usermap].loadeditingsetting=!0,a.zoom[b.usermap].currentzoom=k(a.usermap[b.usermap].map.zoom_setting.editing.zoom,
a.precision),a.zoom[b.usermap].currentx=k(a.usermap[b.usermap].map.zoom_setting.editing.x,a.precision),a.zoom[b.usermap].currenty=k(a.usermap[b.usermap].map.zoom_setting.editing.y,a.precision)):(a.zoom[b.usermap].loadeditingsetting=!1,a.zoom[b.usermap].currentzoom=k(e,a.precision),a.zoom[b.usermap].currentlat=k(g,a.precision),a.zoom[b.usermap].currentlng=k(d,a.precision));a.zoom[b.usermap].currentzoomlevel=C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor);a.div[b.usermap].style.width=
a.usermap[b.usermap].div.style.width;a.div[b.usermap].style.height=a.usermap[b.usermap].div.style.height;a.div[b.usermap].style.position="relative";if(!a.touchdevices&&(a.div[b.usermap].onmousemove=function(e){if(null!=a.selectedOverlay[b.usermap])a.selectedOverlay[b.usermap].onmousemove(e);"marker"==a.mode[b.usermap]&&(this.style.cursor="pointer",x(b,e,"Click to add a marker"));"maplabel"==a.mode[b.usermap]&&(this.style.cursor="pointer",x(b,e,"Click to add a map label"));if("mappath"==a.mode[b.usermap])if("undefined"!=
typeof a.path[b.usermap][1]&&null!==a.path[b.usermap][1]){if("undefined"!=typeof a.coords[b.usermap]&&0<a.coords[b.usermap].length){this.style.cursor="pointer";x(b,e,"Right Click to end a map path");var d=a.svgcoord[b.usermap];d.x=e.clientX;d.y=e.clientY;d=w(d,a.g[b.usermap]);d.x/=a.map[c].precision/a.factor[b.usermap];d.y/=a.map[c].precision/a.factor[b.usermap];var f=d.x,d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI,d=A(d),f=D(f);a.path[b.usermap][1]._movingpoints=
d+","+f;a.path[b.usermap][1].drawMapPath()}}else this.style.cursor="pointer",x(b,e,"Click to start a map path");"mappoly"==a.mode[b.usermap]&&("undefined"!=typeof a.poly[b.usermap][1]&&null!==a.poly[b.usermap][1]?"undefined"!=typeof a.coords[b.usermap]&&0<a.coords[b.usermap].length&&(this.style.cursor="pointer",1<a.coords[b.usermap].length&&x(b,e,"Right Click to end a polygon"),d=a.svgcoord[b.usermap],d.x=e.clientX,d.y=e.clientY,d=w(d,a.g[b.usermap]),d.x/=a.map[c].precision/a.factor[b.usermap],d.y/=
a.map[c].precision/a.factor[b.usermap],f=d.x,d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI,d=A(d),f=D(f),a.poly[b.usermap][1]._movingpoints=d+","+f,a.poly[b.usermap][1].drawMapPoly()):(this.style.cursor="pointer",x(b,e,"Click to start a polygon")));"maprect"==a.mode[b.usermap]&&("undefined"!=typeof a.rect[b.usermap][1]&&null!==a.rect[b.usermap][1]?"undefined"!=typeof a.coords[b.usermap]&&1==a.coords[b.usermap].length&&(this.style.cursor="pointer",x(b,e,
"Right Click to end a rectangle"),d=a.svgcoord[b.usermap],d.x=e.clientX,d.y=e.clientY,d=w(d,a.g[b.usermap]),d.x/=a.map[c].precision/a.factor[b.usermap],d.y/=a.map[c].precision/a.factor[b.usermap],f=d.x,d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI,d=A(d),f=D(f),a.rect[b.usermap][1]._movingpoints=d+","+f,a.rect[b.usermap][1].drawMapRect()):(this.style.cursor="pointer",x(b,e,"Click to start a rectangle")));"mapcurve"==a.mode[b.usermap]&&("undefined"!=typeof a.curve[b.usermap][1]&&
null!==a.curve[b.usermap][1]?"undefined"!=typeof a.coords[b.usermap]&&0<a.coords[b.usermap].length&&(this.style.cursor="pointer",1<a.coords[b.usermap].length?x(b,e,"Right Click to confirm the curvature"):x(b,e,"Click to define the end point of a curve"),d=a.svgcoord[b.usermap],d.x=e.clientX,d.y=e.clientY,d=w(d,a.g[b.usermap]),d.x/=a.map[c].precision/a.factor[b.usermap],d.y/=a.map[c].precision/a.factor[b.usermap],f=d.x,d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/
4)/Math.PI,d=A(d),f=D(f),a.curve[b.usermap][1]._movingpoints=d+","+f,a.curve[b.usermap][1].drawMapCurve()):(this.style.cursor="pointer",x(b,e,"Click to define the starting point of a curve")));e.preventDefault&&e.preventDefault();a.usermap[b.usermap].map.zoom_setting.draggable&&this._mousedown&&(10<Math.abs(e.pageX-this._mousepositionx)||10<Math.abs(e.pageY-this._mousepositiony))&&(this._mapdragged=!0,f=(this._mousepositionx-e.pageX)/a.zoom[b.usermap].currentzoom,d=(this._mousepositiony-e.pageY)/
a.zoom[b.usermap].currentzoom,this._mousepositionx=e.pageX,this._mousepositiony=e.pageY,a.zoom[b.usermap].currentx=k(a.zoom[b.usermap].currentx+f,a.precision),a.zoom[b.usermap].currenty=k(a.zoom[b.usermap].currenty-d,a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx))},a.div[b.usermap].onmousedown=function(a){a.preventDefault&&a.preventDefault();this._mousepositionx=a.pageX;this._mousepositiony=a.pageY;this._mousedown=!0;this._mapdragged=!1},a.div[b.usermap].onmouseup=
function(a){a.preventDefault&&a.preventDefault();this._mousedown=!1;this._mousepositiony=this._mousepositionx=0},a.div[b.usermap].onmousewheel=function(e){e.preventDefault&&e.preventDefault();if(a.usermap[b.usermap].map.zoom_setting.mouseWheel){a.zoom[b.usermap].prevzoom=a.zoom[b.usermap].currentzoom;var d=a.zoom[b.usermap].currentzoom;e||(e=window.event);var f=C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor);e.wheelDelta&&(0<e.wheelDelta?f<a.zoom[b.usermap].maxzoomlevel&&
(a.zoom[b.usermap].currentzoom=k(1.5*a.zoom[b.usermap].currentzoom,a.precision)):f>a.zoom[b.usermap].minzoomlevel&&(a.zoom[b.usermap].currentzoom=k(a.zoom[b.usermap].currentzoom/1.5,a.precision)));var g=a.svgcoord[b.usermap];g.x=e.clientX;g.y=e.clientY;for(var g=w(g,a.g[b.usermap]),m=this,p=0,n=0;m;)p+=m.offsetLeft,n+=m.offsetTop,m=m.offsetParent;g.x/=a.map[c].precision/a.factor[b.usermap];g.y/=a.map[c].precision/a.factor[b.usermap];m=g.x;g=360*(Math.atan(Math.pow(Math.E,g.y.toFixed(a.precision)*
Math.PI/180))-Math.PI/4)/Math.PI;O(g,m)?a.zoom[b.usermap].currentzoom=k(d,a.precision):0<e.wheelDelta?f<a.zoom[b.usermap].maxzoomlevel&&(a.zoom[b.usermap].currentx=k(a.zoom[b.usermap].currentx-(parseFloat(this.style.width)/2-(e.pageX-p))/a.zoom[b.usermap].currentzoom*.5,a.precision),a.zoom[b.usermap].currenty=k(a.zoom[b.usermap].currenty+(parseFloat(this.style.height)/2-(e.pageY-n))/a.zoom[b.usermap].currentzoom*.5,a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx)):
f>a.zoom[b.usermap].minzoomlevel&&(a.zoom[b.usermap].currentx=k(a.zoom[b.usermap].currentx+(parseFloat(this.style.width)/2-(e.pageX-p))/a.zoom[b.usermap].currentzoom*(1-1/1.5),a.precision),a.zoom[b.usermap].currenty=k(a.zoom[b.usermap].currenty-(parseFloat(this.style.height)/2-(e.pageY-n))/a.zoom[b.usermap].currentzoom*(1-1/1.5),a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx))}},a.div[b.usermap].addEventListener)){var f=function(e){e.preventDefault&&
e.preventDefault();if(a.usermap[b.usermap].map.zoom_setting.mouseWheel){a.zoom[b.usermap].prevzoom=a.zoom[b.usermap].currentzoom;var d=a.zoom[b.usermap].currentzoom;e||(e=window.event);var f=C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor);e.detail&&(0>e.detail?f<a.zoom[b.usermap].maxzoomlevel&&(a.zoom[b.usermap].currentzoom=k(1.5*a.zoom[b.usermap].currentzoom,a.precision)):f>a.zoom[b.usermap].minzoomlevel&&(a.zoom[b.usermap].currentzoom=k(a.zoom[b.usermap].currentzoom/
1.5,a.precision)));var g=a.svgcoord[b.usermap];g.x=e.pageX;g.y=e.pageY;for(var g=w(g,a.g[b.usermap]),m=this,p=0,n=0;m;)p+=m.offsetLeft,n+=m.offsetTop,m=m.offsetParent;g.x/=a.map[c].precision/a.factor[b.usermap];g.y/=a.map[c].precision/a.factor[b.usermap];m=g.x;g=360*(Math.atan(Math.pow(Math.E,g.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI;O(g,m)?a.zoom[b.usermap].currentzoom=k(d,a.precision):0>e.detail?f<a.zoom[b.usermap].maxzoomlevel&&(a.zoom[b.usermap].currentx=k(a.zoom[b.usermap].currentx-
(parseInt(this.style.width)/2-(e.pageX-p))/a.zoom[b.usermap].currentzoom*.5,a.precision),a.zoom[b.usermap].currenty=k(a.zoom[b.usermap].currenty+(parseInt(this.style.height)/2-(e.pageY-n))/a.zoom[b.usermap].currentzoom*.5,a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx)):f>a.zoom[b.usermap].minzoomlevel&&(a.zoom[b.usermap].currentx=k(a.zoom[b.usermap].currentx+(parseInt(this.style.width)/2-(e.pageX-p))/a.zoom[b.usermap].currentzoom*(1-1/1.5),a.precision),
a.zoom[b.usermap].currenty=k(a.zoom[b.usermap].currenty-(parseInt(this.style.height)/2-(e.pageY-n))/a.zoom[b.usermap].currentzoom*(1-1/1.5),a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx))}};a.setMouseWheelEvent=function(a){f(a)};a.div[b.usermap].addEventListener("DOMMouseScroll",f,!1)}a.touchdevices||(a.div[b.usermap].oncontextmenu=function(e){if("mappath"==a.mode[b.usermap]){if(0<a.coords[b.usermap].length){var d=a.svgcoord[b.usermap];d.x=e.clientX;
d.y=e.clientY;d=w(d,a.g[b.usermap]);d.x/=a.map[c].precision/a.factor[b.usermap];d.y/=a.map[c].precision/a.factor[b.usermap];e=d.x;d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI;d=A(d);e=D(e);a.coords[b.usermap].push(k(d,a.precision)+","+k(e,a.precision));a.path[b.usermap][1]._movingpoints="";a.path[b.usermap][1].drawMapPath();e="";for(d=0;d<a.coords[b.usermap].length;d++)""!=e&&(e+=" "),e+=a.coords[b.usermap][d];var d=0,f;for(f in a.mappath[b.usermap])a.mappath[b.usermap].hasOwnProperty(f)&&
"undefined"!==typeof a.mappath[b.usermap][f]&&null!==a.mappath[b.usermap][f]&&a.mappath[b.usermap][f]._id>d&&(d=Number(a.mappath[b.usermap][f]._id));f={event:"newmappath",object:"mappath"};f.points=e;f.id=d+1;window.console&&console.log(JSON.stringify(f));a.coords[b.usermap].length=0;a.g[b.usermap].removeChild(a.path[b.usermap][1]);a.path[b.usermap][1]=null}return!1}if("mappoly"==a.mode[b.usermap]){if(1<a.coords[b.usermap].length){d=a.svgcoord[b.usermap];d.x=e.clientX;d.y=e.clientY;d=w(d,a.g[b.usermap]);
d.x/=a.map[c].precision/a.factor[b.usermap];d.y/=a.map[c].precision/a.factor[b.usermap];e=d.x;d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI;d=A(d);e=D(e);a.coords[b.usermap].push(k(d,a.precision)+","+k(e,a.precision));a.poly[b.usermap][1]._movingpoints="";a.poly[b.usermap][1].drawMapPoly();e="";for(d=0;d<a.coords[b.usermap].length;d++)""!=e&&(e+=" "),e+=a.coords[b.usermap][d];d=0;for(f in a.mappoly[b.usermap])a.mappoly[b.usermap].hasOwnProperty(f)&&"undefined"!==
typeof a.mappoly[b.usermap][f]&&null!==a.mappoly[b.usermap][f]&&a.mappoly[b.usermap][f]._id>d&&(d=Number(a.mappoly[b.usermap][f]._id));d+=1;f={event:"newmappoly",object:"mappoly"};f.points=e;f.id=d;window.console&&console.log(JSON.stringify(f));a.coords[b.usermap].length=0;a.g[b.usermap].removeChild(a.poly[b.usermap][1]);a.poly[b.usermap][1]=null}return!1}if("maprect"==a.mode[b.usermap]){if(1==a.coords[b.usermap].length){d=a.svgcoord[b.usermap];d.x=e.clientX;d.y=e.clientY;d=w(d,a.g[b.usermap]);d.x/=
a.map[c].precision/a.factor[b.usermap];d.y/=a.map[c].precision/a.factor[b.usermap];e=d.x;d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI;d=A(d);e=D(e);var g=a.coords[b.usermap][0].split(",")[0],m=a.coords[b.usermap][0].split(",")[1];a.coords[b.usermap].push(k(g,a.precision)+","+k(e,a.precision));a.coords[b.usermap].push(k(d,a.precision)+","+k(e,a.precision));a.coords[b.usermap].push(k(d,a.precision)+","+k(m,a.precision));a.rect[b.usermap][1]._movingpoints=
"";a.rect[b.usermap][1].drawMapRect();e="";for(d=0;d<a.coords[b.usermap].length;d++)""!=e&&(e+=" "),e+=a.coords[b.usermap][d];d=0;for(f in a.maprect[b.usermap])a.maprect[b.usermap].hasOwnProperty(f)&&"undefined"!==typeof a.maprect[b.usermap][f]&&null!==a.maprect[b.usermap][f]&&a.maprect[b.usermap][f]._id>d&&(d=Number(a.maprect[b.usermap][f]._id));d+=1;f={event:"newmaprect",object:"maprect"};f.points=e;f.id=d;window.console&&console.log(JSON.stringify(f));a.coords[b.usermap].length=0;a.g[b.usermap].removeChild(a.rect[b.usermap][1]);
a.rect[b.usermap][1]=null}return!1}if("mapcurve"==a.mode[b.usermap]){if(1<a.coords[b.usermap].length){d=a.svgcoord[b.usermap];d.x=e.clientX;d.y=e.clientY;d=w(d,a.g[b.usermap]);d.x/=a.map[c].precision/a.factor[b.usermap];d.y/=a.map[c].precision/a.factor[b.usermap];e=d.x;d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI;d=A(d);e=D(e);a.coords[b.usermap].push(k(d,a.precision)+","+k(e,a.precision));a.curve[b.usermap][1]._movingpoints="";a.curve[b.usermap][1].drawMapCurve();
e="";for(d=0;d<a.coords[b.usermap].length;d++)""!=e&&(e+=" "),e+=a.coords[b.usermap][d];d=0;for(f in a.mapcurve[b.usermap])a.mapcurve[b.usermap].hasOwnProperty(f)&&"undefined"!==typeof a.mapcurve[b.usermap][f]&&null!==a.mapcurve[b.usermap][f]&&a.mapcurve[b.usermap][f]._id>d&&(d=Number(a.mapcurve[b.usermap][f]._id));d+=1;f={event:"newmapcurve",object:"mapcurve"};f.points=e;f.id=d;window.console&&console.log(JSON.stringify(f));a.coords[b.usermap].length=0;a.g[b.usermap].removeChild(a.curve[b.usermap][1]);
a.curve[b.usermap][1]=null}return!1}},a.div[b.usermap].onclick=function(e){if(!this._mapdragged&&!this._transformed&&"normal"!=a.mode[b.usermap]&&"edit"!=a.mode[b.usermap]){if("marker"==a.mode[b.usermap]){var d=a.svgcoord[b.usermap];d.x=e.clientX;d.y=e.clientY;d=w(d,a.g[b.usermap]);d.x/=a.map[c].precision/a.factor[b.usermap];d.y/=a.map[c].precision/a.factor[b.usermap];var f=d.x,d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI,d=A(d),f=D(f),g=0,m;for(m in a.marker[b.usermap])a.marker[b.usermap].hasOwnProperty(m)&&
"undefined"!==typeof a.marker[b.usermap][m]&&null!==a.marker[b.usermap][m]&&a.marker[b.usermap][m]._id>g&&(g=Number(a.marker[b.usermap][m]._id));var g=g+1,p={event:"newmarker",object:"marker"};p.lat=k(d,a.precision);p.lng=k(f,a.precision);p.id=g;window.console&&console.log(JSON.stringify(p))}if("maplabel"==a.mode[b.usermap]){d=a.svgcoord[b.usermap];d.x=e.clientX;d.y=e.clientY;d=w(d,a.g[b.usermap]);d.x/=a.map[c].precision/a.factor[b.usermap];d.y/=a.map[c].precision/a.factor[b.usermap];f=d.x;d=360*
(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI;d=A(d);f=D(f);g=0;for(m in a.maplabel[b.usermap])a.maplabel[b.usermap].hasOwnProperty(m)&&"undefined"!==typeof a.maplabel[b.usermap][m]&&null!==a.maplabel[b.usermap][m]&&a.maplabel[b.usermap][m]._id>g&&(g=Number(a.maplabel[b.usermap][m]._id));g+=1;p={event:"newmaplabel",object:"maplabel"};p.lat=k(d,a.precision);p.lng=k(f,a.precision);p.id=g;window.console&&console.log(JSON.stringify(p))}"mappath"==a.mode[b.usermap]&&
(d=a.svgcoord[b.usermap],d.x=e.clientX,d.y=e.clientY,d=w(d,a.g[b.usermap]),d.x/=a.map[c].precision/a.factor[b.usermap],d.y/=a.map[c].precision/a.factor[b.usermap],f=d.x,d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI,d=A(d),f=D(f),a.coords[b.usermap].push(k(d,a.precision)+","+k(f,a.precision)),"undefined"!=typeof a.path[b.usermap][1]&&null!==a.path[b.usermap][1]?a.path[b.usermap][1].addPoint(k(d,a.precision),k(f,a.precision)):(xa.points=k(d,a.precision)+
","+k(f,a.precision),a.path[b.usermap][1]=new ea(b,0,xa)),a.path[b.usermap][1].drawMapPath());"mappoly"==a.mode[b.usermap]&&(d=a.svgcoord[b.usermap],d.x=e.clientX,d.y=e.clientY,d=w(d,a.g[b.usermap]),d.x/=a.map[c].precision/a.factor[b.usermap],d.y/=a.map[c].precision/a.factor[b.usermap],f=d.x,d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI,d=A(d),f=D(f),a.coords[b.usermap].push(k(d,a.precision)+","+k(f,a.precision)),"undefined"!=typeof a.poly[b.usermap][1]&&
null!==a.poly[b.usermap][1]?a.poly[b.usermap][1].addPoint(k(d,a.precision),k(f,a.precision)):(ya.points=k(d,a.precision)+","+k(f,a.precision),a.poly[b.usermap][1]=new da(b,0,ya)),a.poly[b.usermap][1].drawMapPoly());"maprect"==a.mode[b.usermap]&&0==a.coords[b.usermap].length&&(d=a.svgcoord[b.usermap],d.x=e.clientX,d.y=e.clientY,d=w(d,a.g[b.usermap]),d.x/=a.map[c].precision/a.factor[b.usermap],d.y/=a.map[c].precision/a.factor[b.usermap],f=d.x,d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*
Math.PI/180))-Math.PI/4)/Math.PI,d=A(d),f=D(f),a.coords[b.usermap].push(k(d,a.precision)+","+k(f,a.precision)),za.points=k(d,a.precision)+","+k(f,a.precision),a.rect[b.usermap][1]=new ca(b,0,za),a.rect[b.usermap][1]._movingpoints=k(d,a.precision)+","+k(f,a.precision),a.rect[b.usermap][1].drawMapRect());"mapcurve"==a.mode[b.usermap]&&2>a.coords[b.usermap].length&&(d=a.svgcoord[b.usermap],d.x=e.clientX,d.y=e.clientY,d=w(d,a.g[b.usermap]),d.x/=a.map[c].precision/a.factor[b.usermap],d.y/=a.map[c].precision/
a.factor[b.usermap],f=d.x,d=360*(Math.atan(Math.pow(Math.E,d.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI,d=A(d),f=D(f),a.coords[b.usermap].push(k(d,a.precision)+","+k(f,a.precision)),"undefined"!=typeof a.curve[b.usermap][1]&&null!==a.curve[b.usermap][1]?a.curve[b.usermap][1].addPoint(k(d,a.precision),k(f,a.precision)):(Aa.points=k(d,a.precision)+","+k(f,a.precision),a.curve[b.usermap][1]=new ba(b,0,Aa)),a.curve[b.usermap][1].drawMapCurve())}});a.touchdevices&&(a.div[b.usermap].ontouchstart=
function(a){a.preventDefault&&a.preventDefault();this._mousedown=!0;1==a.touches.length?(this._mousepositionx=a.touches[0].pageX,this._mousepositiony=a.touches[0].pageY,this._mapdragged=!1):2==a.touches.length&&(this._transformed=!0,this._pos={},this._pos.start=[],this._pos.start[0]={},this._pos.start[1]={},this._pos.start[0].x=a.touches[0].pageX,this._pos.start[0].y=a.touches[0].pageY,this._pos.start[1].x=a.touches[1].pageX,this._pos.start[1].y=a.touches[1].pageY)});a.touchdevices&&(a.div[b.usermap].ontouchmove=
function(d){var e;d.preventDefault&&d.preventDefault();if(!this._mousedown)return!1;if(1==d.touches.length){if(a.usermap[b.usermap].map.zoom_setting.draggable&&!this._transformed&&(10<Math.abs(d.touches[0].pageX-this._mousepositionx)||10<Math.abs(d.touches[0].pageY-this._mousepositiony))){this._mapdragged=!0;var f=(this._mousepositiony-d.touches[0].pageY)/a.zoom[b.usermap].currentzoom;a.zoom[b.usermap].currentx=k(a.zoom[b.usermap].currentx+(this._mousepositionx-d.touches[0].pageX)/a.zoom[b.usermap].currentzoom,
a.precision);a.zoom[b.usermap].currenty=k(a.zoom[b.usermap].currenty-f,a.precision);this._mousepositionx=d.touches[0].pageX;this._mousepositiony=d.touches[0].pageY;E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx)}}else if(2==d.touches.length&&a.usermap[b.usermap].map.zoom_setting.mouseWheel){a.zoom[b.usermap].prevzoom=a.zoom[b.usermap].currentzoom;f=C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor);this._pos.move=[];this._pos.move[0]=
{};this._pos.move[1]={};this._pos.move[0].x=d.touches[0].pageX;this._pos.move[0].y=d.touches[0].pageY;this._pos.move[1].x=d.touches[1].pageX;this._pos.move[1].y=d.touches[1].pageY;var g=Ba(this._pos.move[0],this._pos.move[1]),m=Ba(this._pos.start[0],this._pos.start[1]);k(a.zoom[b.usermap].currentzoom);e=this._pos.start[0];var p=this._pos.start[1];d=(e.x+p.x)/2;e=(p.y+e.y)/2;var n=a.svgcoord[b.usermap];n.x=d;n.y=e;for(var n=w(n,a.g[b.usermap]),u=this,t=p=0;u;)p+=u.offsetLeft,t+=u.offsetTop,u=u.offsetParent;
n.x/=a.map[c].precision/a.factor[b.usermap];n.y/=a.map[c].precision/a.factor[b.usermap];u=n.x;n=360*(Math.atan(Math.pow(Math.E,n.y.toFixed(a.precision)*Math.PI/180))-Math.PI/4)/Math.PI;50<Math.abs(g-m)&&(this._transformed=!0,O(n,u)||(g>m?f<a.zoom[b.usermap].maxzoomlevel&&(a.zoom[b.usermap].currentzoom=k(1.5*a.zoom[b.usermap].currentzoom,a.precision),a.zoom[b.usermap].currentx=k(a.zoom[b.usermap].currentx-(parseInt(this.style.width)/2-(d-p))/a.zoom[b.usermap].currentzoom*.5,a.precision),a.zoom[b.usermap].currenty=
k(a.zoom[b.usermap].currenty+(parseInt(this.style.height)/2-(e-t))/a.zoom[b.usermap].currentzoom*.5,a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx)):f>a.zoom[b.usermap].minzoomlevel&&(a.zoom[b.usermap].currentzoom=k(a.zoom[b.usermap].currentzoom/1.5,a.precision),a.zoom[b.usermap].currentx=k(a.zoom[b.usermap].currentx+(parseInt(this.style.width)/2-(d-p))/a.zoom[b.usermap].currentzoom*(1-1/1.5),a.precision),a.zoom[b.usermap].currenty=k(a.zoom[b.usermap].currenty-
(parseInt(this.style.height)/2-(e-t))/a.zoom[b.usermap].currentzoom*(1-1/1.5),a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx)),this._pos.start[0].x=this._pos.move[0].x,this._pos.start[0].y=this._pos.move[0].y,this._pos.start[1].x=this._pos.move[1].x,this._pos.start[1].y=this._pos.move[1].y))}});a.touchdevices&&(a.div[b.usermap].ontouchend=function(a){a.preventDefault&&a.preventDefault();0==a.touches.length&&(this._mousedown=this._mapdragged=this._transformed=
!1,this._mousepositiony=this._mousepositionx=0,this._pos={})});a.background[b.usermap]=document.createElement("div");for(var m in a.usermap[b.usermap].div.style)a.usermap[b.usermap].div.style.hasOwnProperty(m)&&("backgroundImage"==m?""!=a.usermap[b.usermap].div.style[m]&&(a.background[b.usermap].style[m]="url('"+a.base[b.usermap]+a.usermap[b.usermap].div.style[m]+"?"+Math.random(1E5)+"')"):a.background[b.usermap].style[m]=a.usermap[b.usermap].div.style[m]);a.background[b.usermap].style.position="absolute";
a.background[b.usermap].style.top="0px";a.background[b.usermap].style.left="0px";a.background[b.usermap].style.width="100%";a.background[b.usermap].style.height="100%";a.div[b.usermap].appendChild(a.background[b.usermap]);a.foreground[b.usermap]=document.createElement("div");a.foreground[b.usermap].style.width="100%";a.foreground[b.usermap].style.height="100%";a.foreground[b.usermap].style.position="absolute";a.foreground[b.usermap].style.top=a.usermap[b.usermap].div.style.borderWidth;a.foreground[b.usermap].style.left=
a.usermap[b.usermap].div.style.borderWidth;a.div[b.usermap].appendChild(a.foreground[b.usermap]);a.zoomcontrol[b.usermap]=document.createElement("div");a.zoomcontrol[b.usermap].style.position="absolute";a.zoomcontrol[b.usermap].style.top=parseInt(a.usermap[b.usermap].div.style.borderWidth)+5+"px";a.zoomcontrol[b.usermap].style.left=parseInt(a.usermap[b.usermap].div.style.borderWidth)+5+"px";a.zoomcontrol[b.usermap].style.backgroundColor="rgba(0,0,0,0)";a.panhome[b.usermap]=document.createElement("div");
a.panhome[b.usermap].style.width=a.touchdevices?"24px":"16px";a.panhome[b.usermap].style.height=a.touchdevices?"24px":"16px";a.panhome[b.usermap].style.position="absolute";a.panhome[b.usermap].style.top="5px";a.panhome[b.usermap].style.left="5px";a.panhome[b.usermap].style.backgroundColor=a.usermap[b.usermap].map.zoom_setting.style.backgroundColor;a.panhome[b.usermap].style.borderWidth="1px";a.panhome[b.usermap].style.borderColor=a.usermap[b.usermap].map.zoom_setting.style.borderColor;a.panhome[b.usermap].style.borderStyle=
"solid";a.panhome[b.usermap].style.borderRadius="2px";a.panhome[b.usermap].unselectable="on";a.panhome[b.usermap].style.visibility="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.homeControl?a.usermap[b.usermap].map.zoom_setting.homeControl?"visible":"hidden":"visible";a.panhome[b.usermap].style.cursor="pointer";a.panhome[b.usermap].title="home";g=t("svg");g.setAttribute("xmlns","http://www.w3.org/2000/svg");g.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");g.setAttribute("version",
"1.1");a.touchdevices?(g.setAttribute("width","24px"),g.setAttribute("height","24px")):(g.setAttribute("width","16px"),g.setAttribute("height","16px"));g.style.overflow="hidden";d=t("polyline");a.touchdevices?d.setAttribute("points","3,14 12,3 21,14"):d.setAttribute("points","2.5,9.5 8.5,3.5 14.5,9.5");d.style.fill="none";d.style.stroke=a.usermap[b.usermap].map.zoom_setting.style.symbolColor;d.style.strokeWidth=1.5;g.appendChild(d);d=t("polyline");a.touchdevices?d.setAttribute("points","4.5,14 4.5,22 19.5,22 19.5,14"):
d.setAttribute("points","4.5,7.5 4.5,14.5 12.5,14.5 12.5,7.5");d.style.fill="none";d.style.stroke=a.usermap[b.usermap].map.zoom_setting.style.symbolColor;d.style.strokeWidth=1;g.appendChild(d);d=t("polyline");a.touchdevices?d.setAttribute("points","9.5,22 9.5,13.5 14.5,13.5 14.5,22"):d.setAttribute("points","6.5,14.5 6.5,9.5 10.5,9.5 10.5,14.5");d.style.fill="none";d.style.stroke=a.usermap[b.usermap].map.zoom_setting.style.symbolColor;d.style.strokeWidth=1;g.appendChild(d);a.panhome[b.usermap].appendChild(g);
a.panhome[b.usermap].onmouseup=function(a){};a.panhome[b.usermap].onmousedown=function(a){};a.panhome[b.usermap].onmousemove=function(a){};a.panhome[b.usermap].onmousewheel=function(a){};a.panhome[b.usermap].addEventListener&&a.panhome[b.usermap].addEventListener("DOMMouseScroll",function(a){},!1);a.touchdevices||(a.panhome[b.usermap].onclick=function(c){c.stopPropagation&&c.stopPropagation();Y(b,a.usermap[b.usermap].map.zoom*a.zoom[b.usermap].rfactor,a.usermap[b.usermap].map.lat,a.usermap[b.usermap].map.lng)});
a.touchdevices&&(a.panhome[b.usermap].ontouchstart=function(a){a.preventDefault&&a.preventDefault();a.stopPropagation&&a.stopPropagation();this._touch=1==a.touches.length?!0:!1});a.touchdevices&&(a.panhome[b.usermap].ontouchend=function(c){this._touch&&Y(b,a.usermap[b.usermap].map.zoom*a.zoom[b.usermap].rfactor,a.usermap[b.usermap].map.lat,a.usermap[b.usermap].map.lng)});a.zoomcontrol[b.usermap].appendChild(a.panhome[b.usermap]);a.zoomin[b.usermap]=document.createElement("div");a.zoomin[b.usermap].style.width=
a.touchdevices?"24px":"16px";a.zoomin[b.usermap].style.height=a.touchdevices?"24px":"16px";a.zoomin[b.usermap].style.position="absolute";a.zoomin[b.usermap].style.top=a.touchdevices?"34px":"24px";a.zoomin[b.usermap].style.left="5px";a.zoomin[b.usermap].style.backgroundColor=a.usermap[b.usermap].map.zoom_setting.style.backgroundColor;a.zoomin[b.usermap].style.borderWidth="1px";a.zoomin[b.usermap].style.borderColor=a.usermap[b.usermap].map.zoom_setting.style.borderColor;a.zoomin[b.usermap].style.borderStyle=
"solid";a.zoomin[b.usermap].style.borderRadius="2px";a.zoomin[b.usermap].style.unselectable="on";a.zoomin[b.usermap].style.visibility="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.zoomControl?a.usermap[b.usermap].map.zoom_setting.zoomControl?"visible":"hidden":"visible";a.zoomin[b.usermap].style.cursor="pointer";a.zoomin[b.usermap].title="zoom in";g=t("svg");g.setAttribute("xmlns","http://www.w3.org/2000/svg");g.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");g.setAttribute("version",
"1.1");a.touchdevices?(g.setAttribute("width","24px"),g.setAttribute("height","24px")):(g.setAttribute("width","16px"),g.setAttribute("height","16px"));g.style.overflow="hidden";d=t("polyline");a.touchdevices?d.setAttribute("points","4,12 20,12"):d.setAttribute("points","3,8 13,8");d.style.fill="none";d.style.stroke=a.usermap[b.usermap].map.zoom_setting.style.symbolColor;d.style.strokeWidth=2;g.appendChild(d);d=t("polyline");a.touchdevices?d.setAttribute("points","12,4 12,20"):d.setAttribute("points",
"8,3 8,13");d.style.fill="none";d.style.stroke=a.usermap[b.usermap].map.zoom_setting.style.symbolColor;d.style.strokeWidth=2;g.appendChild(d);a.zoomin[b.usermap].appendChild(g);a.zoomin[b.usermap].onmouseup=function(a){};a.zoomin[b.usermap].onmousedown=function(a){};a.zoomin[b.usermap].onmousemove=function(a){};a.zoomin[b.usermap].onmousewheel=function(a){};a.zoomin[b.usermap].addEventListener&&a.zoomin[b.usermap].addEventListener("DOMMouseScroll",function(a){},!1);a.touchdevices||(a.zoomin[b.usermap].onclick=
function(c){c.preventDefault&&c.preventDefault();c.stopPropagation&&c.stopPropagation();a.zoom[b.usermap].prevzoom=a.zoom[b.usermap].currentzoom;C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor)<a.zoom[b.usermap].maxzoomlevel&&(a.zoom[b.usermap].currentzoom=k(1.5*a.zoom[b.usermap].currentzoom,a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx))});a.touchdevices&&(a.zoomin[b.usermap].ontouchstart=function(a){a.preventDefault&&
a.preventDefault();a.stopPropagation&&a.stopPropagation();this._touch=1==a.touches.length?!0:!1});a.touchdevices&&(a.zoomin[b.usermap].ontouchend=function(c){a.zoom[b.usermap].prevzoom=a.zoom[b.usermap].currentzoom;c=C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor);this._touch&&c<a.zoom[b.usermap].maxzoomlevel&&(a.zoom[b.usermap].currentzoom=k(1.5*a.zoom[b.usermap].currentzoom,a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx))});
a.zoomcontrol[b.usermap].appendChild(a.zoomin[b.usermap]);a.zoomout[b.usermap]=document.createElement("div");a.zoomout[b.usermap].style.width=a.touchdevices?"24px":"16px";a.zoomout[b.usermap].style.height=a.touchdevices?"24px":"16px";a.zoomout[b.usermap].style.position="absolute";a.zoomout[b.usermap].style.top=a.touchdevices?"63px":"43px";a.zoomout[b.usermap].style.left="5px";a.zoomout[b.usermap].style.backgroundColor=a.usermap[b.usermap].map.zoom_setting.style.backgroundColor;a.zoomout[b.usermap].style.borderWidth=
"1px";a.zoomout[b.usermap].style.borderColor=a.usermap[b.usermap].map.zoom_setting.style.borderColor;a.zoomout[b.usermap].style.borderStyle="solid";a.zoomout[b.usermap].style.borderRadius="2px";a.zoomout[b.usermap].unselectable="on";a.zoomout[b.usermap].style.visibility="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.zoomControl?a.usermap[b.usermap].map.zoom_setting.zoomControl?"visible":"hidden":"visible";a.zoomout[b.usermap].style.cursor="pointer";a.zoomout[b.usermap].title="zoom out";
g=t("svg");g.setAttribute("xmlns","http://www.w3.org/2000/svg");g.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");g.setAttribute("version","1.1");a.touchdevices?(g.setAttribute("width","24px"),g.setAttribute("height","24px")):(g.setAttribute("width","16px"),g.setAttribute("height","16px"));g.style.overflow="hidden";d=t("polyline");a.touchdevices?d.setAttribute("points","4,12 20,12"):d.setAttribute("points","3,8 13,8");d.style.fill="none";d.style.stroke=a.usermap[b.usermap].map.zoom_setting.style.symbolColor;
d.style.strokeWidth=2;g.appendChild(d);a.zoomout[b.usermap].appendChild(g);a.zoomout[b.usermap].onmouseup=function(a){};a.zoomout[b.usermap].onmousedown=function(a){};a.zoomout[b.usermap].onmousemove=function(a){};a.zoomout[b.usermap].onmousewheel=function(a){};a.zoomout[b.usermap].addEventListener&&a.zoomout[b.usermap].addEventListener("DOMMouseScroll",function(a){},!1);a.touchdevices||(a.zoomout[b.usermap].onclick=function(c){c.stopPropagation&&c.stopPropagation();a.zoom[b.usermap].prevzoom=a.zoom[b.usermap].currentzoom;
C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor)>a.zoom[b.usermap].minzoomlevel&&(a.zoom[b.usermap].currentzoom=k(a.zoom[b.usermap].currentzoom/1.5,a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx))});a.touchdevices&&(a.zoomout[b.usermap].ontouchstart=function(a){a.preventDefault&&a.preventDefault();a.stopPropagation&&a.stopPropagation();this._touch=1==a.touches.length?!0:!1});a.touchdevices&&(a.zoomout[b.usermap].ontouchend=
function(c){this._touch&&(a.zoom[b.usermap].prevzoom=a.zoom[b.usermap].currentzoom,C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor)>a.zoom[b.usermap].minzoomlevel&&(a.zoom[b.usermap].currentzoom=k(a.zoom[b.usermap].currentzoom/1.5,a.precision),E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx)))});a.zoomcontrol[b.usermap].appendChild(a.zoomout[b.usermap]);a.div[b.usermap].appendChild(a.zoomcontrol[b.usermap]);a.local&&(g=document.createElement("script"),
g.type="application/javascript",g.src=b.base+"imap5map_"+a.usermap[b.usermap].map.id+".js?"+Math.random(1E5),g.onerror=function(){},g.onload=function(){Na(b)},document.body.appendChild(g))},ua=function(b){if("edit"==a.mode[b.usermap])for(var c in a.geometry[b.usermap])a.geometry[b.usermap].hasOwnProperty(c)&&(a.geometry[b.usermap][c].style.cursor="pointer");else for(c in a.geometry[b.usermap])if(a.geometry[b.usermap].hasOwnProperty(c)){var g=a.geometry[b.usermap][c].id;a.geometry[b.usermap][c].style.cursor=
"undefined"!=typeof a.usermap[b.usermap].map.geometry[g]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[g].link?"pointer":"auto"}},t=function(a){return document.createElementNS("http://www.w3.org/2000/svg",a)},X=function(b){"undefined"!=typeof a.usermap[b.usermap].map.geometry[b.geometry]&&"undefined"!=typeof a.usermap[b.usermap].map.geometry[b.geometry].fill&&(a.geometry[b.usermap].hasOwnProperty(b.geometry)&&(a.geometry[b.usermap][b.geometry].style.visibility="undefined"!=typeof a.usermap[b.usermap].map.geometry[b.geometry].hidden&&
a.usermap[b.usermap].map.geometry[b.geometry].hidden?"hidden":"visible"),a.heatmap[b.usermap].enable?"undefined"!=typeof a.usermap[b.usermap].map.geometry[b.geometry].disableHeatMap&&a.usermap[b.usermap].map.geometry[b.geometry].disableHeatMap?a.geometry[b.usermap].hasOwnProperty(b.geometry)&&a.geometry[b.usermap][b.geometry].setAttribute("fill",a.usermap[b.usermap].map.geometry[b.geometry].fill):"continuous"==a.usermap[b.usermap].map.heatmap.heattype?a.geometry[b.usermap].hasOwnProperty(b.geometry)&&
a.geometry[b.usermap][b.geometry].setAttribute("fill",fa(a.usermap[b.usermap].map.heatmap.continuous.startcolor,a.usermap[b.usermap].map.heatmap.continuous.endcolor,ga(a.heatmap[b.usermap].hmin,a.heatmap[b.usermap].hmax,a.usermap[b.usermap].map.geometry[b.geometry].heatvalue))):a.geometry[b.usermap].hasOwnProperty(b.geometry)&&a.geometry[b.usermap][b.geometry].setAttribute("fill",ha(a.usermap[b.usermap].map.geometry[b.geometry].heatvalue,a.usermap[b.usermap].map.heatmap.discrete.rangeset.split(","),
a.usermap[b.usermap].map.heatmap.discrete.colorset.split(","))):a.geometry[b.usermap].hasOwnProperty(b.geometry)&&a.geometry[b.usermap][b.geometry].setAttribute("fill",a.usermap[b.usermap].map.geometry[b.geometry].fill))},T=function(b){for(var c in a.usermap[b.usermap].map.mappoly)a.usermap[b.usermap].map.mappoly.hasOwnProperty(c)&&a.mappoly[b.usermap].hasOwnProperty(c)&&a.mappoly[b.usermap][c].toggleCategory();for(c in a.usermap[b.usermap].map.maprect)a.usermap[b.usermap].map.maprect.hasOwnProperty(c)&&
a.maprect[b.usermap].hasOwnProperty(c)&&a.maprect[b.usermap][c].toggleCategory();for(c in a.usermap[b.usermap].map.mappath)a.usermap[b.usermap].map.mappath.hasOwnProperty(c)&&a.mappath[b.usermap].hasOwnProperty(c)&&a.mappath[b.usermap][c].toggleCategory();for(c in a.usermap[b.usermap].map.mapcurve)a.usermap[b.usermap].map.mapcurve.hasOwnProperty(c)&&a.mapcurve[b.usermap].hasOwnProperty(c)&&a.mapcurve[b.usermap][c].toggleCategory();for(c in a.usermap[b.usermap].map.maplabel)a.usermap[b.usermap].map.maplabel.hasOwnProperty(c)&&
a.maplabel[b.usermap].hasOwnProperty(c)&&a.maplabel[b.usermap][c].toggleCategory();for(c in a.usermap[b.usermap].map.marker)a.usermap[b.usermap].map.marker.hasOwnProperty(c)&&a.marker[b.usermap].hasOwnProperty(c)&&a.marker[b.usermap][c].toggleCategory();for(c in a.usermap[b.usermap].map.maplegend)a.usermap[b.usermap].map.maplegend.hasOwnProperty(c)&&a.maplegend[b.usermap].hasOwnProperty(c)&&a.maplegend[b.usermap][c].toggleCategory()},ja=function(b){if(a.heatmap[b.usermap].enable)if("continuous"==
a.usermap[b.usermap].map.heatmap.heattype){var c={},c=ta(b);a.heatmap[b.usermap].hmin=c.hmin;a.heatmap[b.usermap].hmax=c.hmax}else{var c=a.usermap[b.usermap].map.heatmap.discrete.rangeset.split(",").length,g=a.usermap[b.usermap].map.heatmap.discrete.colorset.split(",").length;0<c&&0<g&&g==c+1||(a.heatmap[b.usermap].enable=!1)}},Ca=function(b){a.groupHL[b.usermap]=[];for(var c in a.geometry[b.usermap])a.geometry[b.usermap].hasOwnProperty(c)&&(a.geometry[b.usermap][c].group={},a.geometry[b.usermap][c].group.id=
"undefined"==typeof a.usermap[b.usermap].map.geometry[c].group?0:a.usermap[b.usermap].map.geometry[c].group,"undefined"==typeof a.groupHL[b.usermap][a.geometry[b.usermap][c].group.id]&&(a.groupHL[b.usermap][a.geometry[b.usermap][c].group.id]=[]),a.groupHL[b.usermap][a.geometry[b.usermap][c].group.id].push(c))},C=function(a,c){for(var g=c*Math.pow(1/1.5,4),d=-1,e=0;20>e;e++)if(.1>Math.abs(a-g*Math.pow(1.5,e))){d=e+1;break}return d},Ba=function(a,c){var g=c.x-a.x,d=c.y-a.y;return Math.sqrt(g*g+d*d)},
k=function(a,c){var g=Math.pow(10,c);return Math.round(a*g)/g},R=function(b,c){return _result=a.heatmap[b.usermap].enable?"undefined"!=typeof a.usermap[b.usermap].map.geometry[c].disableHeatMap&&a.usermap[b.usermap].map.geometry[c].disableHeatMap?a.usermap[b.usermap].map.geometry[c].fill_mouseover:"continuous"==a.usermap[b.usermap].map.heatmap.heattype?a.usermap[b.usermap].map.heatmap.continuous.highlightcolor:a.usermap[b.usermap].map.heatmap.discrete.highlightcolor:a.usermap[b.usermap].map.geometry[c].fill_mouseover},
G=function(b,c){return _result=a.heatmap[b.usermap].enable?"undefined"!=typeof a.usermap[b.usermap].map.geometry[c].disableHeatMap&&a.usermap[b.usermap].map.geometry[c].disableHeatMap?a.usermap[b.usermap].map.geometry[c].fill:"continuous"==a.usermap[b.usermap].map.heatmap.heattype?fa(a.usermap[b.usermap].map.heatmap.continuous.startcolor,a.usermap[b.usermap].map.heatmap.continuous.endcolor,ga(a.heatmap[b.usermap].hmin,a.heatmap[b.usermap].hmax,a.usermap[b.usermap].map.geometry[c].heatvalue)):ha(a.usermap[b.usermap].map.geometry[c].heatvalue,
a.usermap[b.usermap].map.heatmap.discrete.rangeset.split(","),a.usermap[b.usermap].map.heatmap.discrete.colorset.split(",")):a.usermap[b.usermap].map.geometry[c].fill},ga=function(a,c,g){return c==a?0:(g+Math.abs(a))/(c-a)*100},ta=function(b){var c=0,g=0,d;for(d in a.usermap[b.usermap].map.geometry)!a.usermap[b.usermap].map.geometry.hasOwnProperty(d)||"undefined"!=typeof a.usermap[b.usermap].map.geometry[d].disableHeatMap&&a.usermap[b.usermap].map.geometry[d].disableHeatMap||(a.usermap[b.usermap].map.geometry[d].heatvalue<
c&&(c=a.usermap[b.usermap].map.geometry[d].heatvalue),a.usermap[b.usermap].map.geometry[d].heatvalue>g&&(g=a.usermap[b.usermap].map.geometry[d].heatvalue));return{hmin:c,hmax:g}},ha=function(a,c,g){var d,e=c.length;if(a<c[0])d=g[0];else if(a>=c[e-1])d=g[e];else for(var f=0;f<e-1;f++)if(a>=c[f]&&a<c[f+1]){d=g[f+1];break}return d},fa=function(a,c,g){var d,e,f;d=I(a);e=J(a);f=K(a);var k;a=I(c);k=J(c);c=K(c);e+=(k-e)*g/100;f+=(c-f)*g/100;return"#"+Q(d+(a-d)*g/100,2)+Q(e,2)+Q(f,2)},Q=function(a,c){for(var g=
parseInt(a).toString(16),d=c-g.length,e=0;e<d;e++)g="0"+g;return g},ka=function(a){return"#"==a.charAt(0)?a.substring(1,7):a},K=function(a){return parseInt(ka(a).substring(4,6),16)},J=function(a){return parseInt(ka(a).substring(2,4),16)},I=function(a){return parseInt(ka(a).substring(0,2),16)},H=function(a){divhint=document.getElementById("imap5_"+a.usermap+"_hint");divhint.style.display="none"},x=function(b,c,g){var d;document.getElementById("imap5_"+b.usermap+"_hint")?d=document.getElementById("imap5_"+
b.usermap+"_hint"):(d=document.createElement("div"),d.id="imap5_"+b.usermap+"_hint",a.div[b.usermap].appendChild(d));d.style.backgroundColor="#FFFF88";d.style.pointerEvents="none";d.style.position="fixed";d.style.padding="2px";d.style.margin="5px";d.style.border="1px solid gray";d.style.borderRadius="5px";d.style.top=c.clientY+10+"px";d.style.left=c.clientX+10+"px";d.style.font="12px Arial";d.style.display="block";d.innerHTML=g},Ja=function(a,c){var g=Math.max(Math.abs(a/32768),Math.abs(c/32768));
return g=1<g?2*Math.round(g):1},O=function(a,c){return 89.5<a||-89.5>a||180<c||-180>c},D=function(a){180<a&&(a=-180+(a-180)%360);-180>a&&(a=180+(a+180)%360);return a},A=function(a){89.5<a&&(a=89.5);-89.5>a&&(a=-89.5);return a},Ka=function(b){var c=0,g=0,d=0;if(3<b.length){for(var e=0;e<b.length-1;e++)b.hasOwnProperty(e)&&(d+=(b[e].lng+b[e+1].lng)*(b[e].lng*v(b[e+1].lat)-b[e+1].lng*v(b[e].lat)),g+=(v(b[e].lat)+v(b[e+1].lat))*(b[e].lng*v(b[e+1].lat)-b[e+1].lng*v(b[e].lat)),c=c+b[e].lng*v(b[e+1].lat)-
b[e+1].lng*v(b[e].lat));c/=2;g=k(P(g/(6*c)),a.precision);d=k(d/(6*c),a.precision)}else g=k(b[0].lat,a.precision),d=k(b[0].lng,a.precision);return{lat:g,lng:d}},aa=function(a,c,g,d){return Z({x:g.x,y:g.y},{x:g.x,y:d.y},a,c)||Z({x:g.x,y:d.y},{x:d.x,y:d.y},a,c)||Z({x:d.x,y:d.y},{x:d.x,y:g.y},a,c)||Z({x:d.x,y:g.y},{x:g.x,y:g.y},a,c)?!0:!1},Oa=function(a,c,g,d){return aa({x:a.x,y:a.y},{x:a.x,y:c.y},g,d)||aa({x:a.x,y:c.y},{x:c.x,y:c.y},g,d)||aa({x:c.x,y:c.y},{x:c.x,y:a.y},g,d)||aa({x:c.x,y:a.y},{x:a.x,
y:a.y},g,d)?!0:!1},Z=function(a,c,g,d){var e,f=(d.x-g.x)*(a.y-g.y)-(d.y-g.y)*(a.x-g.x);e=(c.x-a.x)*(a.y-g.y)-(c.y-a.y)*(a.x-g.x);a=(d.y-g.y)*(c.x-a.x)-(d.x-g.x)*(c.y-a.y);0!=a?(f/=a,e/=a,e=0<=f&&1>=f&&0<=e&&1>=e?!0:!1):e=!1;return e},W=function(a,c,g,d){var e,f,k,h;e=2*Math.PI/3;d=d/180*Math.PI;a-=g/2*Math.cos(d);c+=g/2*Math.sin(d);var l;l="M "+(a+Math.cos(d)*g)+","+(c-Math.sin(d)*g);for(f=1;4>=f;f++)k=a+Math.cos(d+e*f)*g,h=c-Math.sin(d+e*f)*g,l=2>=f?l+" M "+k+","+h:l+" L "+k+","+h;return l},V=function(a,
c,g,d){var e,f,k,h;e=2*Math.PI/3;d=d/180*Math.PI;a-=g/2*Math.cos(d);c+=g/2*Math.sin(d);var l;l=""+(a+Math.cos(d)*g)+","+(c-Math.sin(d)*g);for(f=1;3>=f;f++)k=a+Math.cos(d+e*f)*g,h=c-Math.sin(d+e*f)*g,l=l+" "+k+","+h;return l},M=function(a,c,g,d,e){var f=180*Math.atan((d-c)/(g-a))/Math.PI;0!=f?0<f?d>c?(a=180-f,f=360-f):(a=360-f,f=180-f):d>c?(a=360-f,f=180-f):(a=180-f,f=360-f):g>a?(a=180,f=0):(a=0,f=180);0==e&&(result=a);1==e&&(result=f);return result};window.imap5={};var a=window.imap5;a.div=[];a.background=
[];a.foreground=[];a.usermap=[];a.map=[];a.mode=[];a.geometry=[];a.svg=[];a.g=[];a.svgcoord=[];a.zoom=[];a.zoomcontrol=[];a.panhome=[];a.zoomin=[];a.zoomout=[];a.selected=[];a.infobox=[];a.coords=[];a.selectedOverlay=[];a.selectedVerticesObj=[];a.marker=[];a.maplabel=[];a.mappath=[];a.mappoly=[];a.maprect=[];a.mapcurve=[];a.maplegend=[];a.mapabbr=[];a.geoareasize=[];a.mapbubble=[];a.mapbubblesize=[];a.piechart=[];a.path=[];a.poly=[];a.rect=[];a.curve=[];a.groupHL=[];a.center=[];a.grouphighlight=[];
a.fadeout=[];a.heatmap=[];a.categorylegend=[];a.maptitle=[];a.base=[];a.responsivemap=[];a.wmark=[];a.precision=6;a.factor=[];a.setMode=function(b){a.mode[b.usermap]=b.mode;ua(b);if("edit"==a.mode[b.usermap])for(var c in a.maplabel[b.usermap])a.maplabel[b.usermap].hasOwnProperty(c)&&(a.maplabel[b.usermap][c].getElementsByTagName("text")[0].style.pointerEvents="auto");else for(c in a.maplabel[b.usermap])a.maplabel[b.usermap].hasOwnProperty(c)&&(a.maplabel[b.usermap][c].getElementsByTagName("text")[0].style.pointerEvents=
"none");T(b)};a.setGeometry=function(b){a.usermap[b.usermap].map.geometry[b.geometry]=b.data;X(b);Ca(b);ja(b)};a.setGeometries=function(b){for(var c in b.geometry)b.geometry.hasOwnProperty(c)&&(a.usermap[b.usermap].map.geometry[c]=b.geometry[c],a.mapabbr[b.usermap].hasOwnProperty(c)&&(a.mapabbr[b.usermap][c].setLabel(b.geometry[c].title),"undefined"!=typeof b.geometry[c].hideAbbreviation&&(b.geometry[c].hideAbbreviation||"undefined"!=typeof a.usermap[b.usermap].map.geometry[c].hidden&&a.usermap[b.usermap].map.geometry[c].hidden?
a.mapabbr[b.usermap][c].hide():a.mapabbr[b.usermap][c].show())),a.mapbubble[b.usermap].hasOwnProperty(c)&&null!==a.mapbubble[b.usermap][c]&&(a.mapbubble[b.usermap][c]._options.bubblevalue=b.geometry[c].bubblevalue));Ca(b);ja(b);T(b);for(c in a.usermap[b.usermap].map.geometry)a.usermap[b.usermap].map.geometry.hasOwnProperty(c)&&X({usermap:b.usermap,geometry:c});if("undefined"!=typeof a.usermap[b.usermap].map.bubblemap&&"undefined"!=typeof a.usermap[b.usermap].map.bubblemap.enable&&a.usermap[b.usermap].map.bubblemap.enable){var g=
0;for(c in a.geometry[b.usermap])Math.abs(a.usermap[b.usermap].map.geometry[c].bubblevalue)>=g&&(g=Math.abs(a.usermap[b.usermap].map.geometry[c].bubblevalue));a.usermap[b.usermap].map.bubblemap.maxbubble=g;for(c in a.mapbubble[b.usermap])a.mapbubble[b.usermap].hasOwnProperty(c)&&(a.mapbubble[b.usermap][c].drawMapBubble(),"undefined"!=typeof a.usermap[b.usermap].map.geometry[c].hidden&&a.usermap[b.usermap].map.geometry[c].hidden?a.mapbubble[b.usermap][c].hide():a.mapbubble[b.usermap][c].show())}if("undefined"!=
typeof a.usermap[b.usermap].map.piechart&&"undefined"!=typeof a.usermap[b.usermap].map.piechart.enable&&a.usermap[b.usermap].map.piechart.enable)for(c in a.piechart[b.usermap])a.piechart[b.usermap].hasOwnProperty(c)&&("undefined"!=typeof a.usermap[b.usermap].map.geometry[c].hidden&&a.usermap[b.usermap].map.geometry[c].hidden?a.piechart[b.usermap][c].hide():a.piechart[b.usermap][c].show())};a.setFadeOut=function(b){a.usermap[b.usermap].map.fadeout=b.fadeout;a.fadeout[b.usermap].enable=b.fadeout.enable};
a.setGroupHighlight=function(b){a.usermap[b.usermap].map.grouphighlight=b.grouphighlight;a.grouphighlight[b.usermap].enable=b.grouphighlight.enable};a.setHeatMap=function(b){a.usermap[b.usermap].map.heatmap=b.heatmap;a.heatmap[b.usermap].enable=b.heatmap.enable;ja(b);for(var c in a.usermap[b.usermap].map.geometry)a.usermap[b.usermap].map.geometry.hasOwnProperty(c)&&X({usermap:b.usermap,geometry:c})};a.setCategoryLegend=function(b){var c="undefined"==typeof a.usermap[b.usermap].map.categorylegend?
!1:a.usermap[b.usermap].map.categorylegend.enable;a.usermap[b.usermap].map.categorylegend=b.categorylegend;a.usermap[b.usermap].map.categorylegend.enable?c?(a.categorylegend[b.usermap].setOptions(b.categorylegend),a.categorylegend[b.usermap].drawCategoryLegend(),a.updateCategoryLegend(b)):a.categorylegend[b.usermap]=new ma(b,a.usermap[b.usermap].map.categorylegend):c&&a.categorylegend[b.usermap].remove();T(b)};a.setMapTitle=function(b){a.usermap[b.usermap].map.maptitle=b.maptitle;"undefined"!==typeof a.maptitle[b.usermap]&&
null!==a.maptitle[b.usermap]?(a.maptitle[b.usermap].setOptions(b.maptitle),a.maptitle[b.usermap].drawMapTitle()):a.maptitle[b.usermap]=new na(b,b.maptitle)};a.setBubbleMap=function(b){var c="undefined"==typeof a.usermap[b.usermap].map.bubblemap?!1:a.usermap[b.usermap].map.bubblemap.enable;a.usermap[b.usermap].map.bubblemap=b.bubblemap;if(a.usermap[b.usermap].map.bubblemap.enable)if(c){var c=0,g;for(g in a.geometry[b.usermap])Math.abs(a.usermap[b.usermap].map.geometry[g].bubblevalue)>=c&&(c=Math.abs(a.usermap[b.usermap].map.geometry[g].bubblevalue));
a.usermap[b.usermap].map.bubblemap.maxbubble=c;for(g in a.mapbubble[b.usermap])a.mapbubble[b.usermap].hasOwnProperty(g)&&(a.mapbubble[b.usermap][g].drawMapBubble(),"undefined"!=typeof a.usermap[b.usermap].map.geometry[g].hidden&&a.usermap[b.usermap].map.geometry[g].hidden?a.mapbubble[b.usermap][g].hide():a.mapbubble[b.usermap][g].show())}else{c=0;a.mapbubblesize[b.usermap].length=0;for(g in a.geometry[b.usermap])a.mapbubblesize[b.usermap].push({id:a.geometry[b.usermap][g].id,bubblesize:Math.abs(a.usermap[b.usermap].map.geometry[g].bubblevalue)}),
Math.abs(a.usermap[b.usermap].map.geometry[g].bubblevalue)>=c&&(c=Math.abs(a.usermap[b.usermap].map.geometry[g].bubblevalue));a.mapbubblesize[b.usermap].sort(function(a,b){return b.bubblesize-a.bubblesize});a.usermap[b.usermap].map.bubblemap.maxbubble=c;for(c=0;c<a.mapbubblesize[b.usermap].length;c++)if(a.mapbubblesize[b.usermap].hasOwnProperty(c)&&(g=a.mapbubblesize[b.usermap][c].id,a.geometry[b.usermap].hasOwnProperty(g))){var d={};d.lat=a.geometry[b.usermap][g].centroid.lat;d.lng=a.geometry[b.usermap][g].centroid.lng;
d.bubblevalue=a.usermap[b.usermap].map.geometry[g].bubblevalue;a.mapbubble[b.usermap][g]=new qa(b,g,d);"undefined"!=typeof a.usermap[b.usermap].map.geometry[g].hidden&&a.usermap[b.usermap].map.geometry[g].hidden?a.mapbubble[b.usermap][g].hide():a.mapbubble[b.usermap][g].show()}}else if(c)for(g in a.mapbubble[b.usermap])a.mapbubble[b.usermap].hasOwnProperty(g)&&a.mapbubble[b.usermap][g].remove()};a.setPieChart=function(b){var c="undefined"==typeof a.usermap[b.usermap].map.piechart?!1:a.usermap[b.usermap].map.piechart.enable;
a.usermap[b.usermap].map.piechart=b.piechart;if(a.usermap[b.usermap].map.piechart.enable)if(c)for(var g in a.piechart[b.usermap])a.piechart[b.usermap].hasOwnProperty(g)&&(a.piechart[b.usermap][g].drawPieChart(),"undefined"!=typeof a.usermap[b.usermap].map.geometry[g].hidden&&a.usermap[b.usermap].map.geometry[g].hidden?a.piechart[b.usermap][g].hide():a.piechart[b.usermap][g].show());else for(g in a.geometry[b.usermap])a.geometry[b.usermap].hasOwnProperty(g)&&(c={},c.lat=a.geometry[b.usermap][g].centroid.lat,
c.lng=a.geometry[b.usermap][g].centroid.lng,c.pievalue=a.usermap[b.usermap].map.geometry[g].pievalue,a.piechart[b.usermap][g]=new pa(b,g,c),"undefined"!=typeof a.usermap[b.usermap].map.geometry[g].hidden&&a.usermap[b.usermap].map.geometry[g].hidden?a.piechart[b.usermap][g].hide():a.piechart[b.usermap][g].show());else if(c)for(g in a.piechart[b.usermap])a.piechart[b.usermap].hasOwnProperty(g)&&a.piechart[b.usermap][g].remove()};a.setZoomSetting=function(b){for(var c in b.zoom_setting)b.zoom_setting.hasOwnProperty(c)&&
(a.usermap[b.usermap].map.zoom_setting[c]=b.zoom_setting[c]);a.panhome[b.usermap].style.visibility="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.homeControl?a.usermap[b.usermap].map.zoom_setting.homeControl?"visible":"hidden":"visible";a.zoomin[b.usermap].style.visibility="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.zoomControl?a.usermap[b.usermap].map.zoom_setting.zoomControl?"visible":"hidden":"visible";a.zoomout[b.usermap].style.visibility="undefined"!=typeof a.usermap[b.usermap].map.zoom_setting.zoomControl?
a.usermap[b.usermap].map.zoom_setting.zoomControl?"visible":"hidden":"visible"};a.setMarkers=function(b){for(var c in b.marker)b.marker.hasOwnProperty(c)&&(a.usermap[b.usermap].map.marker[c]=b.marker[c],"undefined"!==typeof a.marker[b.usermap][c]&&null!==a.marker[b.usermap][c]?(a.marker[b.usermap][c].setOptions(b.marker[c]),a.marker[b.usermap][c].drawMarker()):a.marker[b.usermap][c]=new sa(b,c,b.marker[c]),a.marker[b.usermap][c].toggleCategory())};a.delMarkers=function(b){a.marker[b.usermap][b.id].remove()};
a.setMapLabels=function(b){for(var c in b.maplabel)b.maplabel.hasOwnProperty(c)&&(a.usermap[b.usermap].map.maplabel[c]=b.maplabel[c],"undefined"!==typeof a.maplabel[b.usermap][c]&&null!==a.maplabel[b.usermap][c]?(a.maplabel[b.usermap][c].setOptions(b.maplabel[c]),a.maplabel[b.usermap][c].drawMapLabel()):a.maplabel[b.usermap][c]=new ra(b,c,b.maplabel[c]),a.maplabel[b.usermap][c].toggleCategory())};a.delMapLabels=function(b){a.maplabel[b.usermap][b.id].remove()};a.setMapPaths=function(b){for(var c in b.mappath)b.mappath.hasOwnProperty(c)&&
(a.usermap[b.usermap].map.mappath[c]=b.mappath[c],"undefined"!==typeof a.mappath[b.usermap][c]&&null!==a.mappath[b.usermap][c]?(a.mappath[b.usermap][c].setOptions(b.mappath[c]),a.mappath[b.usermap][c].drawMapPath()):a.mappath[b.usermap][c]=new ea(b,c,b.mappath[c]),a.mappath[b.usermap][c].toggleCategory())};a.delMapPaths=function(b){a.selectedVerticesObj[b.usermap]==a.mappath[b.usermap][b.id]&&(a.selectedVerticesObj[b.usermap]=null);a.mappath[b.usermap][b.id].remove()};a.selectMapPaths=function(b){a.mappath[b.usermap][b.id].createVertices()};
a.setMapPolys=function(b){for(var c in b.mappoly)b.mappoly.hasOwnProperty(c)&&(a.usermap[b.usermap].map.mappoly[c]=b.mappoly[c],"undefined"!==typeof a.mappoly[b.usermap][c]&&null!==a.mappoly[b.usermap][c]?(a.mappoly[b.usermap][c].setOptions(b.mappoly[c]),a.mappoly[b.usermap][c].drawMapPoly()):a.mappoly[b.usermap][c]=new da(b,c,b.mappoly[c]),a.mappoly[b.usermap][c].toggleCategory())};a.delMapPolys=function(b){a.selectedVerticesObj[b.usermap]==a.mappoly[b.usermap][b.id]&&(a.selectedVerticesObj[b.usermap]=
null);a.mappoly[b.usermap][b.id].remove()};a.selectMapPolys=function(b){a.mappoly[b.usermap][b.id].createVertices()};a.setMapRects=function(b){for(var c in b.maprect)b.maprect.hasOwnProperty(c)&&(a.usermap[b.usermap].map.maprect[c]=b.maprect[c],"undefined"!==typeof a.maprect[b.usermap][c]&&null!==a.maprect[b.usermap][c]?(a.maprect[b.usermap][c].setOptions(b.maprect[c]),a.maprect[b.usermap][c].drawMapRect()):a.maprect[b.usermap][c]=new ca(b,c,b.maprect[c]),a.maprect[b.usermap][c].toggleCategory())};
a.delMapRects=function(b){a.selectedVerticesObj[b.usermap]==a.maprect[b.usermap][b.id]&&(a.selectedVerticesObj[b.usermap]=null);a.maprect[b.usermap][b.id].remove()};a.selectMapRects=function(b){a.maprect[b.usermap][b.id].createVertices()};a.setMapCurves=function(b){for(var c in b.mapcurve)b.mapcurve.hasOwnProperty(c)&&(a.usermap[b.usermap].map.mapcurve[c]=b.mapcurve[c],"undefined"!==typeof a.mapcurve[b.usermap][c]&&null!==a.mapcurve[b.usermap][c]?(a.mapcurve[b.usermap][c].setOptions(b.mapcurve[c]),
a.mapcurve[b.usermap][c].drawMapCurve()):a.mapcurve[b.usermap][c]=new ba(b,c,b.mapcurve[c]),a.mapcurve[b.usermap][c].toggleCategory())};a.delMapCurves=function(b){a.selectedVerticesObj[b.usermap]==a.mapcurve[b.usermap][b.id]&&(a.selectedVerticesObj[b.usermap]=null);a.mapcurve[b.usermap][b.id].remove()};a.selectMapCurves=function(b){a.mapcurve[b.usermap][b.id].createVertices()};a.setMapLegends=function(b){for(var c in b.maplegend)b.maplegend.hasOwnProperty(c)&&(a.usermap[b.usermap].map.maplegend[c]=
b.maplegend[c],"undefined"!==typeof a.maplegend[b.usermap][c]&&null!==a.maplegend[b.usermap][c]?(a.maplegend[b.usermap][c].setOptions(b.maplegend[c]),a.maplegend[b.usermap][c].drawMapLegend()):a.maplegend[b.usermap][c]=new oa(b,c,b.maplegend[c]),a.maplegend[b.usermap][c].toggleCategory())};a.delMapLegends=function(b){a.maplegend[b.usermap][b.id].remove()};a.initUserMap=function(b){a.usermap[b.id]=b};a.initMap=function(b){a.map[b.id]=b};a.responsive=function(b){var c=1,c=a.zoom[b.usermap].currentzoom/
(a.usermap[b.usermap].map.zoom*a.zoom[b.usermap].rfactor),g=parseFloat(a.usermap[b.usermap].div.style.width),d=parseFloat(a.usermap[b.usermap].div.style.height),e=parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,null).getPropertyValue("padding-right"))+parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,null).getPropertyValue("padding-left"));parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,null).getPropertyValue("padding-top"));parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,
null).getPropertyValue("padding-bottom"));var f=parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,null).getPropertyValue("border-left-width"))+parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,null).getPropertyValue("border-right-width"));parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,null).getPropertyValue("margin-left"));parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,null).getPropertyValue("margin-right"));parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,
null).getPropertyValue("border-top-width"));parseFloat(window.getComputedStyle(a.div[b.usermap].parentNode,null).getPropertyValue("border-bottom-width"));var k=2*parseFloat(a.usermap[b.usermap].div.style.borderWidth),e=Math.floor(a.div[b.usermap].parentNode.offsetWidth-e-f-k-2),f=e/g,g=Math.floor(e*d/g);a.div[b.usermap].style.width=e+"px";a.div[b.usermap].style.height=g+"px";a.svg[b.usermap].setAttribute("width",a.div[b.usermap].offsetWidth-k+"px");a.svg[b.usermap].setAttribute("height",a.div[b.usermap].offsetHeight-
k+"px");a.zoom[b.usermap].rfactor=f;a.zoom[b.usermap].currentzoom=a.usermap[b.usermap].map.zoom*f*c;E(b,a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].currenty,a.zoom[b.usermap].currentx);"undefined"!=typeof a.usermap[b.usermap].map.maptitle&&a.maptitle[b.usermap].drawMapTitle();for(var h in a.usermap[b.usermap].map.maplegend)a.usermap[b.usermap].map.maplegend.hasOwnProperty(h)&&(a.maplegend[b.usermap][h].show(),a.maplegend[b.usermap][h].offsetWidth+20>a.div[b.usermap].clientWidth||a.maplegend[b.usermap][h].offsetHeight+
20>a.div[b.usermap].clientHeight?a.maplegend[b.usermap][h].hide():a.maplegend[b.usermap][h].toggleCategory());"undefined"!=typeof a.usermap[b.usermap].map.categorylegend&&"undefined"!=typeof a.usermap[b.usermap].map.categorylegend.enable&&a.usermap[b.usermap].map.categorylegend.enable&&(a.categorylegend[b.usermap].show(),a.categorylegend[b.usermap].offsetWidth+20>a.div[b.usermap].clientWidth||a.categorylegend[b.usermap].offsetHeight+20>a.div[b.usermap].clientHeight?a.categorylegend[b.usermap].hide():
a.categorylegend[b.usermap].show())};a.init=function(b){b.base||(b.base="");if(b.usermap&&(a.touchdevices="ontouchstart"in document.documentElement&&null==navigator.userAgent.match(/Windows NT/i),a.mode[b.usermap]="normal",a.geometry[b.usermap]=[],a.selected[b.usermap]=[],a.infobox[b.usermap]=[],a.coords[b.usermap]=[],a.selectedOverlay[b.usermap]=null,a.selectedVerticesObj[b.usermap]=null,a.marker[b.usermap]=[],a.maplabel[b.usermap]=[],a.mappath[b.usermap]=[],a.mappoly[b.usermap]=[],a.maprect[b.usermap]=
[],a.mapcurve[b.usermap]=[],a.maplegend[b.usermap]=[],a.mapabbr[b.usermap]=[],a.geoareasize[b.usermap]=[],a.mapbubble[b.usermap]=[],a.mapbubblesize[b.usermap]=[],a.piechart[b.usermap]=[],a.path[b.usermap]=[],a.poly[b.usermap]=[],a.rect[b.usermap]=[],a.curve[b.usermap]=[],a.groupHL[b.usermap]=[],a.grouphighlight[b.usermap]={},a.fadeout[b.usermap]={},a.heatmap[b.usermap]={},a.categorylegend[b.usermap]={},a.maptitle[b.usermap]={},a.base[b.usermap]=b.base,a.factor[b.usermap]=1,a.responsivemap[b.usermap]=
"undefined"==typeof b.responsivemap?!1:b.responsivemap,a.wmark[b.usermap]=[],document.writeln("\x3c!--[if lt IE 9]>"),document.writeln("<div>You can only view this map using Internet Explorer 9 or above, please upgrade or use other modern browsers like chrome, firefox or safari</div>"),document.writeln("<![endif]--\x3e"),document.writeln('<div id="imap5_'+b.usermap+'"></div>'),a.div[b.usermap]=document.getElementById("imap5_"+b.usermap),b.local)){a.local=!0;var c=document.createElement("script");
c.type="application/javascript";c.src=b.base+"imap5usermap_"+b.usermap+".js?"+Math.random(1E5);c.onerror=function(){};c.onload=function(){Pa(b)};document.body.appendChild(c)}};a.updateCategoryLegend=function(a){T(a)};a.zoomTo=function(a,c,g,d){Y(a,c,g,d)};a.resumePopup=function(a){setTimeout(function(){wa(a)},6E4)};a.zoomToXY=function(a,c,g,d){E(a,c,g,d)};a.getLatLng=function(b){var c=a.zoom[b.usermap].currentzoom,g=a.zoom[b.usermap].currentx,d={event:"getlatlng",object:"map"};d.lat=k(360*(Math.atan(Math.pow(Math.E,
a.zoom[b.usermap].currenty*Math.PI/180))-Math.PI/4)/Math.PI,a.precision);d.lng=k(g,a.precision);d.zoom=k(c/a.zoom[b.usermap].rfactor,a.precision);window.console&&console.log(JSON.stringify(d))};a.getMaxZoom=function(b){var c={event:"getmaxzoom",object:"map"};c.zoom=C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor);c.prezoom=C(a.usermap[b.usermap].map.zoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor);window.console&&console.log(JSON.stringify(c))};a.getMinZoom=
function(b){var c={event:"getminzoom",object:"map"};c.zoom=C(a.zoom[b.usermap].currentzoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor);c.prezoom=C(a.usermap[b.usermap].map.zoom,a.zoom[b.usermap].initzoom*a.zoom[b.usermap].rfactor);window.console&&console.log(JSON.stringify(c))};a.setZoom=function(b,c){var g=a.usermap[b.usermap].map.id;a.g[b.usermap].setAttribute("transform","translate("+(a.div[b.usermap].clientWidth/2+-a.usermap[b.usermap].map.lng*c)+","+(a.div[b.usermap].clientHeight/2+
a.usermap[b.usermap].map.lat*c)+") scale("+c/(a.map[g].precision/a.factor[b.usermap])+",-"+c/(a.map[g].precision/a.factor[b.usermap])+")");a.g[b.usermap].setAttribute("stroke-width",a.usermap[b.usermap].map.geometry_default.stroke_width/c*(a.map[g].precision/a.factor[b.usermap]))};var xa={name:"Path 1",points:"",style:{stroke:"#000000",strokeWidth:"2",strokeOpacity:"1"}},ia={name:"Label 1",label:{text:"",style:{fontSize:"12px",fontColor:"#000000",fontFamily:"Arial",fontStyle:"italic",fontWeight:"bold"}}},
ya={name:"Polygon 1",points:"",fill:"#000000",fillOpacity:.5,style:{stroke:"#000000",strokeWidth:"2",strokeOpacity:"1"}},za={name:"Rectangle 1",points:"",fill:"#000000",fillOpacity:.5,style:{stroke:"#000000",strokeWidth:"2",strokeOpacity:"1"}},Aa={name:"Curve 1",points:"",style:{stroke:"#000000",strokeWidth:"2",strokeOpacity:"1"}}}})();